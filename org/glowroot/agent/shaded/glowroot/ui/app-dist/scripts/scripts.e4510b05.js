var glowroot=angular.module("glowroot",["ui.router","ui.bootstrap.buttons","ui.bootstrap.dropdown","ui.bootstrap.popover","ui.bootstrap.typeahead","ui.bootstrap.modal","ui.bootstrap.debounce","ui.codemirror","ui.select","ngSanitize"]),Glowroot;glowroot.config(["$locationProvider","$httpProvider",function(e,t){e.html5Mode(!0);var a=["$rootScope","$injector","$location","$q","$timeout","login",function(e,t,a,n,i,o){return{response:function(a){var n=a.headers("Glowroot-Layout-Version");return n&&e.layout&&n!==e.layout.version&&t.get("$http").get("backend/layout").then(function(t){e.setLayout(t.data)},function(t){e.navbarErrorMessage="An error occurred getting layout",t.data.message&&(e.navbarErrorMessage+=": "+t.data.message);var a=e.$on("$stateChangeSuccess",function(){e.navbarErrorMessage="",a()})}),a},responseError:function(e){if(401===e.status)return"/login"===a.path()?n.defer().promise:(e.data.timedOut?o.goToLogin("Your session has timed out"):o.goToLogin(),n.defer().promise);if(0===e.status){var t=n.defer();return i(function(){t.reject(e)},500),t.promise}return n.reject(e)}}}];t.interceptors.push(a)}]),glowroot.run(["$rootScope","$http","$location","$window","$state","$timeout","login","queryStrings",function(e,t,a,n,i,o,r,l){function s(){o(function(){t.get("backend/check-layout").then(function(){s()},function(){s()})},6e4)}e.agentId="",e.$on("$locationChangeSuccess",function(){if(e.agentId=a.search()["agent-id"]||"",e.agentRollupId=a.search()["agent-rollup-id"]||e.agentId,e.layout)if(!e.layout.central||e.agentRollupId){var t=e.layout.agentRollups[e.agentRollupId];e.agentPermissions=t?t.permissions:void 0}else delete e.agentPermissions}),e.agentQueryString=function(){return e.layout.central?e.agentId?"?agent-id="+encodeURIComponent(e.agentId):e.agentRollupId?"?agent-rollup-id="+encodeURIComponent(e.agentRollupId):"":""},e.agentRollupUrl=function(t){var n=e.agentRollupQuery(t);return a.path().substring(1)+l.encodeObject(n)},e.agentRollupQuery=function(e){var t=angular.copy(a.search());delete t["agent-rollup-id"],delete t["agent-id"];var n={};return e.agent?n["agent-id"]=e.id:n["agent-rollup-id"]=e.id,angular.merge(n,t),n},e.transactionTypes=function(){if(!e.layout)return[];if(!e.layout.agentRollups)return[];var t=e.layout.agentRollups[e.agentRollupId];return t?t.transactionTypes:[]},e.defaultTransactionType=function(){if(!e.layout)return"";if(!e.layout.agentRollups)return"";var t=a.search()["agent-rollup-id"]||a.search()["agent-id"]||"",n=e.layout.agentRollups[t];return n?n.defaultDisplayedTransactionType:""},e.goToLogin=function(e){return!!e.ctrlKey||(r.goToLogin(),!1)},e.signOut=function(){var a=$(".navbar-collapse");a.removeClass("in"),a.addClass("collapse"),t.post("backend/sign-out").then(function(t){e.setLayout(t.data),e.layout.redirectToLogin||(e.displaySignOutMessage=!0,o(function(){e.displaySignOutMessage=!1},2e3))},function(t){e.navbarErrorMessage="An error occurred signing out",t.data.message&&(e.navbarErrorMessage+=": "+t.data.message);var a=e.$on("$stateChangeSuccess",function(){e.navbarErrorMessage="",a()})})},e.hideNavbar=function(){return"/login"===a.path()};var d=$("#container"),c=$(window);e.containerWidth=d.width(),e.windowHeight=c.height(),$(window).resize(function(){var t=d.width(),a=c.height();t===e.containerWidth&&a===e.windowHeight||e.$apply(function(){e.containerWidth=t,e.windowHeight=a})}),s();var g;e.initLayout=function(){function t(a){0===a?n.location.reload():(e.navbarErrorMessage="New version of Glowroot UI has been deployed, refreshing browser in "+a+" second"+(1===a?"":"s")+"...",o(function(){t(a-1)},1e3))}if(e.layout.agentRollupValues=[],angular.forEach(e.layout.agentRollups,function(t,a){for(var n="",i=0;i<t.depth;i++)n+="    ";t.indentedDisplay=n+t.display,t.id=a,e.layout.agentRollupValues.push(t)}),!e.layout.central||e.agentRollupId){var a=e.layout.agentRollups[e.agentRollupId];e.agentPermissions=a?a.permissions:void 0}else delete e.agentPermissions;var i={};angular.forEach(moment.tz.names(),function(e){i[e]=!0});var r=[];angular.forEach(e.layout.timeZoneIds,function(e){i[e]&&r.push(e)}),e.layout.timeZoneIds=r,g&&g!==e.layout.glowrootVersion&&t(10),g=e.layout.glowrootVersion},e.setLayout=function(t){e.layout=t,e.initLayout(),e.layout.redirectToLogin?r.goToLogin():"/login"!==a.path()||!t.loggedIn&&t.loginEnabled||a.path("/").replace()},window.layout?e.setLayout(window.layout):t.get("backend/layout").then(function(t){e.setLayout(t.data)},function(t){e.navbarErrorMessage="An error occurred getting layout",t.data.message&&(e.navbarErrorMessage+=": "+t.data.message);var a=e.$on("$stateChangeSuccess",function(){e.navbarErrorMessage="",a()})}),e.$on("$stateChangeSuccess",function(){window.ga&&window.ga("send","pageview",{page:a.path()})});var p="([1-9]?[0-9]?(\\.[0-9]*)?|100(\\.0*)?)";e.pattern={percentage:new RegExp("^"+p+"$"),percentageList:new RegExp("^("+p+" *, *)*"+p+"$"),integer:/^(0|[1-9][0-9]*)$/,double:/^(0|[1-9][0-9]*)?(\.[0-9]*)?$/},ZeroClipboard.config({bubbleEvents:!1,cacheBust:!1}),$(document).on("focusin","#global-zeroclipboard-html-bridge",!1)}]),Glowroot=function(){function e(e,a){$(e).each(function(){var e=$(this);e.data("gtTimeout")&&clearTimeout(e.data("gtTimeout")),e.stop().animate({opacity:"100"}),e.removeClass("hide");var n=this;e.data("gtTimeout",setTimeout(function(){t(n,1e3)},a))})}function t(e,t){var a=$(e);a.fadeOut(t,function(){a.addClass("hide"),a.css("display","")})}return{showAndFadeSuccessMessage:function(t){e(t,1500)},cancelFadeSuccessMessage:function(e){$(e).each(function(){var e=$(this);e.data("gtTimeout")&&clearTimeout(e.data("gtTimeout")),e.stop().animate({opacity:"100"}),e.removeClass("hide")})},fadeOut:t,showSpinner:function(e,t){var a=$(e)[0],n=new Spinner({lines:9,radius:8,width:5,zIndex:1020}),i=setTimeout(function(){$(a).removeClass("hide"),n.spin(a),t&&t()},100);return{stop:function(){clearTimeout(i),$(a).addClass("hide"),n.stop()}}}}}(),$(document).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}),glowroot.config(["$provide","$stateProvider","$urlRouterProvider",function(e,t,a){var n=function(e){return["$q","$rootScope","$location",function(t,a,n){if(window.layout)return"/login"===n.path()?function(){}:((!a.layout.central||n.search()["agent-id"]||n.search()["agent-rollup-id"])&&e&&!n.search()["transaction-type"]&&(n.search("transaction-type",a.defaultTransactionType()),n.replace()),function(){});var i=t.defer(),o=a.$watch("layout",function(t){if(t){if("/login"===n.path())return i.resolve(),void o();(!a.layout.central||n.search()["agent-id"]||n.search()["agent-rollup-id"])&&e&&!n.search()["transaction-type"]&&(n.search("transaction-type",a.defaultTransactionType()),n.replace()),i.resolve(),o()}});return i.promise}]};a.otherwise(function(e){var t=e.get("$rootScope");if(!t.layout)return"transaction/average";if(t.layout.showNavbarTransaction)return"transaction/average";if(t.layout.showNavbarError)return"error/messages";if(t.layout.showNavbarJvm){if(t.layout.central)return"jvm/gauges";var a=t.layout.agentRollups[""].permissions.jvm;return a.gauges?"jvm/gauges":a.threadDump?"jvm/thread-dump":a.heapDump?"jvm/heap-dump":a.heapHistogram?"jvm/heap-histogram":a.mbeanTree?"jvm/mbean-tree":a.systemProperties?"jvm/system-properties":"jvm/environment"}return t.layout.showNavbarConfig?"config/transaction":t.layout.adminView?"admin/agent-list":t.layout.loggedIn&&!t.layout.ldap?"profile/change-password":"transaction/average"}),t.state("transaction",{abstract:!0,url:"/transaction?agent-id&agent-rollup-id&transaction-type",templateUrl:"views/transaction.html",controller:"TransactionCtrl",resolve:{headerDisplay:function(){return"Transactions"},shortName:function(){return"transaction"},defaultSummarySortOrder:function(){return"total-time"},waitForLayout:n(!0)}}),t.state("transaction.detail",{abstract:!0,views:{sidebar:{templateUrl:"views/transaction/sidebar.html",controller:"TransactionSidebarCtrl",resolve:{summarySortOrders:function(){return{"total-time":"By percent of total time","average-time":"By average time",throughput:"By throughput (per min)"}},summaryValueFn:["$filter",function(e){return function(t,a,n,i){return"total-time"===a?(100*t.totalDurationNanos/n.totalDurationNanos).toFixed(1)+" %":"average-time"===a?e("gtMillis")(t.totalDurationNanos/(1e6*t.transactionCount))+" ms":"throughput"===a?(6e4*t.transactionCount/i).toFixed(1)+"/min":""}}]}},tabs:{templateUrl:"views/transaction/tabs.html",controller:"TransactionTabCtrl"}}}),t.state("transaction.detail.average",{url:"/average?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/average.html",controller:"TransactionAverageCtrl"}}}),t.state("transaction.detail.percentiles",{url:"/percentiles?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/percentiles.html",controller:"TransactionPercentilesCtrl"}}}),t.state("transaction.detail.throughput",{url:"/throughput?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/throughput.html",controller:"TransactionThroughputCtrl"}}}),t.state("transaction.detail.traces",{url:"/traces?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/traces.html",controller:"TracesCtrl",resolve:{traceKind:function(){return"transaction"}}}}}),t.state("transaction.detail.queries",{url:"/queries?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/queries.html",controller:"TransactionQueriesCtrl"}}}),t.state("transaction.detail.services",{url:"/services?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/services.html",controller:"TransactionServicesCtrl"}}}),t.state("transaction.detail.threadProfile",{url:"/thread-profile?agent-id&transaction-type&transaction-name",views:{"main@transaction":{templateUrl:"views/transaction/profile.html",controller:"TransactionProfileCtrl"}}});var i=["$q","$timeout",function(e,t){function a(){window.d3?n.resolve():t(a,100)}var n=e.defer();return t(a,100),n.promise}];t.state("transaction-thread-flame-graph",{url:"/transaction/thread-flame-graph",templateUrl:"views/transaction/flame-graph.html",controller:"TransactionFlameGraphCtrl",resolve:{waitForD3:i,waitForLayout:n(!0)}}),t.state("error",{abstract:!0,url:"/error?agent-id&agent-rollup-id&transaction-type",templateUrl:"views/transaction.html",controller:"TransactionCtrl",resolve:{headerDisplay:function(){return"Errors"},shortName:function(){return"error"},defaultSummarySortOrder:function(){return"error-count"},waitForLayout:n(!0)}}),t.state("error.detail",{abstract:!0,views:{sidebar:{templateUrl:"views/transaction/sidebar.html",controller:"TransactionSidebarCtrl",resolve:{summarySortOrders:function(){return{"error-count":"By error count","error-rate":"By error rate"}},summaryValueFn:function(){return function(e,t){return"error-count"===t?e.errorCount:"error-rate"===t?(100*e.errorCount/e.transactionCount).toFixed(1)+" %":""}}}},tabs:{templateUrl:"views/transaction/error-tabs.html",controller:"TransactionTabCtrl"}}}),t.state("error.detail.messages",{url:"/messages?agent-id&transaction-type&transaction-name",views:{"main@error":{templateUrl:"views/transaction/error-messages.html",controller:"ErrorMessagesCtrl"}}}),t.state("error.detail.traces",{url:"/traces?agent-id&transaction-type&transaction-name",views:{"main@error":{templateUrl:"views/transaction/traces.html",controller:"TracesCtrl",resolve:{traceKind:function(){return"error"}}}}}),t.state("jvm",{url:"/jvm",templateUrl:"views/jvm.html",controller:"JvmCtrl",resolve:{waitForLayout:n(!1)}}),t.state("jvm.gauges",{url:"/gauges?agent-id&agent-rollup-id",templateUrl:"views/jvm/gauge-values.html",controller:"JvmGaugeValuesCtrl"}),t.state("jvm.threadDump",{url:"/thread-dump?agent-id&agent-rollup-id",templateUrl:"views/jvm/thread-dump.html",controller:"JvmThreadDumpCtrl"}),t.state("jvm.jstack",{url:"/jstack?agent-id&agent-rollup-id",templateUrl:"views/jvm/jstack.html",controller:"JvmJstackCtrl"}),t.state("jvm.heapDump",{url:"/heap-dump?agent-id&agent-rollup-id",templateUrl:"views/jvm/heap-dump.html",controller:"JvmHeapDumpCtrl"}),t.state("jvm.heapHistogram",{url:"/heap-histogram?agent-id&agent-rollup-id",templateUrl:"views/jvm/heap-histogram.html",controller:"JvmHeapHistogramCtrl"}),t.state("jvm.gc",{url:"/gc?agent-id&agent-rollup-id",templateUrl:"views/jvm/gc.html",controller:"JvmGcCtrl"}),t.state("jvm.mbeanTree",{url:"/mbean-tree?agent-id&agent-rollup-id",templateUrl:"views/jvm/mbean-tree.html",controller:"JvmMBeanTreeCtrl"}),t.state("jvm.systemProperties",{url:"/system-properties?agent-id&agent-rollup-id",templateUrl:"views/jvm/system-properties.html",controller:"JvmSystemPropertiesCtrl"}),t.state("jvm.environment",{url:"/environment?agent-id&agent-rollup-id",templateUrl:"views/jvm/environment.html",controller:"JvmEnvironmentCtrl"}),t.state("jvm.capabilities",{url:"/capabilities?agent-id&agent-rollup-id",templateUrl:"views/jvm/capabilities.html",controller:"JvmCapabilitiesCtrl"}),t.state("syntheticMonitors",{url:"/synthetic-monitors?agent-id&agent-rollup-id",templateUrl:"views/synthetic-monitors.html",controller:"SyntheticMonitorsCtrl",resolve:{waitForLayout:n(!1)}}),t.state("incidents",{url:"/incidents",templateUrl:"views/incidents.html",controller:"IncidentsCtrl",resolve:{waitForLayout:n(!1)}}),t.state("report",{url:"/report",templateUrl:"views/report.html",controller:"ReportCtrl",resolve:{waitForLayout:n(!1)}}),t.state("report.adhoc",{url:"/ad-hoc",templateUrl:"views/report/adhoc.html",controller:"ReportAdhocCtrl"}),t.state("config",{url:"/config",templateUrl:"views/config.html",controller:"ConfigCtrl",resolve:{waitForLayout:n(!1)}}),t.state("config.transaction",{url:"/transaction?agent-id",templateUrl:"views/config/transaction.html",controller:"ConfigTransactionCtrl"}),t.state("config.gaugeList",{url:"/gauge-list?agent-id",templateUrl:"views/config/gauge-list.html",controller:"ConfigGaugeListCtrl"}),t.state("config.gauge",{url:"/gauge?agent-id&v",templateUrl:"views/config/gauge.html",controller:"ConfigGaugeCtrl"}),t.state("config.syntheticMonitorList",{url:"/synthetic-monitor-list?agent-id&agent-rollup-id",templateUrl:"views/config/synthetic-monitor-list.html",controller:"ConfigSyntheticMonitorListCtrl"}),t.state("config.syntheticMonitor",{url:"/synthetic-monitor?agent-id&agent-rollup-id&id",templateUrl:"views/config/synthetic-monitor.html",controller:"ConfigSyntheticMonitorCtrl"}),t.state("config.alertList",{url:"/alert-list?agent-id&agent-rollup-id",templateUrl:"views/config/alert-list.html",controller:"ConfigAlertListCtrl"}),t.state("config.alert",{url:"/alert?agent-id&agent-rollup-id&id",templateUrl:"views/config/alert.html",controller:"ConfigAlertCtrl"}),t.state("config.ui",{url:"/ui?agent-id&agent-rollup-id",templateUrl:"views/config/ui.html",controller:"ConfigUiCtrl"}),t.state("config.pluginList",{url:"/plugin-list?agent-id",templateUrl:"views/config/plugin-list.html",controller:"ConfigPluginListCtrl"}),t.state("config.plugin",{url:"/plugin?agent-id&plugin-id",templateUrl:"views/config/plugin.html",controller:"ConfigPluginCtrl"}),t.state("config.instrumentationList",{url:"/instrumentation-list?agent-id",templateUrl:"views/config/instrumentation-list.html",controller:"ConfigInstrumentationListCtrl"}),t.state("config.instrumentation",{url:"/instrumentation?agent-id&v",templateUrl:"views/config/instrumentation.html",controller:"ConfigInstrumentationCtrl"}),t.state("config.userRecording",{url:"/user-recording?agent-id",templateUrl:"views/config/user-recording.html",controller:"ConfigUserRecordingCtrl"}),t.state("config.advanced",{url:"/advanced?agent-id",templateUrl:"views/config/advanced.html",controller:"ConfigAdvancedCtrl"}),t.state("admin",{url:"/admin",templateUrl:"views/admin.html",controller:"AdminCtrl",resolve:{waitForLayout:n(!1)}}),t.state("admin.agentList",{url:"/agent-list",templateUrl:"views/admin/agent-list.html",controller:"AdminAgentListCtrl"}),t.state("admin.agent",{url:"/agent",templateUrl:"views/admin/agent.html",controller:"AdminAgentCtrl"}),t.state("admin.userList",{url:"/user-list",templateUrl:"views/admin/user-list.html",controller:"AdminUserListCtrl"}),t.state("admin.user",{url:"/user",templateUrl:"views/admin/user.html",controller:"AdminUserCtrl"}),t.state("admin.roleList",{url:"/role-list",templateUrl:"views/admin/role-list.html",controller:"AdminRoleListCtrl"}),t.state("admin.role",{url:"/role",templateUrl:"views/admin/role.html",controller:"AdminRoleCtrl"}),t.state("admin.web",{url:"/web",templateUrl:"views/admin/web.html",controller:"AdminWebCtrl"}),t.state("admin.storage",{url:"/storage",templateUrl:"views/admin/storage.html",controller:"AdminStorageCtrl"}),t.state("admin.smtp",{url:"/smtp",templateUrl:"views/admin/smtp.html",controller:"AdminSmtpCtrl"}),t.state("admin.httpProxy",{url:"/http-proxy",templateUrl:"views/admin/http-proxy.html",controller:"AdminHttpProxyCtrl"}),t.state("admin.integrationList",{url:"/integration-list",templateUrl:"views/admin/integration-list.html"}),t.state("admin.ldap",{url:"/integration/ldap",templateUrl:"views/admin/integration/ldap.html",controller:"AdminLdapCtrl"}),t.state("admin.pagerDuty",{url:"/integration/pager-duty",templateUrl:"views/admin/integration/pager-duty.html",controller:"AdminPagerDutyCtrl"}),t.state("admin.healthchecksIo",{url:"/integration/healthchecks-io",templateUrl:"views/admin/integration/healthchecks-io.html",controller:"AdminHealthchecksIoCtrl"}),t.state("profile",{url:"/profile",templateUrl:"views/profile.html",controller:"ProfileCtrl",resolve:{waitForLayout:n(!1)}}),t.state("profile.changePassword",{url:"/change-password",templateUrl:"views/profile/change-password.html",controller:"ProfileChangePasswordCtrl"}),t.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl",resolve:{waitForLayout:n(!1)}})}]),glowroot.factory("gtButtonGroupControllerFactory",["$q",function(e){return{create:function(t,a){var n=$(t),i=!1;return{onClick:function(t){if(!i){var o=n.find(".gt-button-message"),r=n.find(".gt-button-spinner");o.addClass("hide");var l;a||(l=Glowroot.showSpinner(r));var s=e.defer();s.promise.then(function(e){l&&l.stop(),o.text(e||""),o.removeClass("gt-button-message-error"),o.addClass("gt-button-message-success"),Glowroot.showAndFadeSuccessMessage(o),i=!1},function(e){l&&l.stop(),Glowroot.cancelFadeSuccessMessage(o),o.text(e),o.removeClass("gt-button-message-success"),o.addClass("gt-button-message-error"),o.removeClass("hide"),i=!1}),i=!0,t({deferred:s})}}}}}}]),glowroot.directive("gtButtonGroup",["gtButtonGroupControllerFactory",function(e){return{scope:{},transclude:!0,template:'<div class="clearfix">  <span ng-transclude style="margin-right: 15px;"></span>  <div class="gt-button-spinner hide"></div>  <div class="gt-button-message hide" style="padding-top: 5px;"></div></div>',controller:["$element",function(t){var a=e.create(t);this.onClick=a.onClick}]}}]),glowroot.directive("gtButton",["gtButtonGroupControllerFactory","modals",function(e,t){return{scope:{gtLabel:"@",gtClick:"&",gtBtnClass:"@",gtDisabled:"&",gtNoSpinner:"@",gtConfirmHeader:"@",gtConfirmBody:"@"},templateUrl:"template/gt-button.html",require:"^?gtButtonGroup",link:function(a,n,i,o){o||(a.noGroup=!0,o=e.create(n,a.gtNoSpinner)),a.onClick=function(){if(a.gtConfirmHeader){var e=$("#confirmationModal");e.find(".modal-header h3").text(a.gtConfirmHeader),e.find(".modal-body p").text(a.gtConfirmBody),t.display("#confirmationModal",!0),$("#confirmationModalButton").off("click"),$("#confirmationModalButton").on("click",function(){a.$apply(function(){$("#confirmationModal").modal("hide"),o.onClick(a.gtClick)})})}else o.onClick(a.gtClick)}}}}]),glowroot.directive("gtFormGroup",["conversions",function(e){return{scope:{gtType:"@",gtLabel:"@",gtCheckboxLabel:"@",gtModel:"=",gtWidth:"@",gtAddon:"@",gtPattern:"@",gtRequired:"&",gtDisabled:"&",gtPlaceholder:"@",gtNumber:"&",gtRows:"@",gtColClass1:"@",gtColClass2:"@"},transclude:!0,require:"^form",templateUrl:"template/gt-form-group.html",link:function(t,a,n,i){t.formCtrl=i,t.gtId=t.$id,t.gtType||(t.gtType="text"),"codemirror"===t.gtType&&(t.codeMirrorOpts={indentUnit:4,lineNumbers:!0,matchBrackets:!0,mode:"text/x-java"},t.gtDisabled()&&(t.codeMirrorOpts.readOnly="nocursor")),t.$watch("gtModel",function(a){e.toNumber(t.ngModel)!==a&&(t.ngModel=a)}),t.$watch("ngModel",function(a){t.gtNumber()?t.gtModel=e.toNumber(a):t.gtModel=a}),t.$watch("gtPattern",function(e){if(e){var a=e.match(/^\/(.*)\/$/);t.ngPattern=a?new RegExp(a[1]):t.$parent.$eval(e)}else t.ngPattern=/.?/})}}}]),glowroot.directive("gtInputGroupDropdown",function(){return{scope:{gtModel:"=",gtItems:"&",gtClass:"@"},templateUrl:"template/gt-input-group-dropdown.html",replace:!0,link:function(e){e.$watch("gtModel",function(t){angular.forEach(e.gtItems(),function(a){a.value===t&&(e.gtDisplay=a.display)})}),e.gtClass?e.classes="input-group-btn "+e.gtClass:e.classes="input-group-btn"}}}),glowroot.directive("gtNavbarItem",[function(){return{scope:{gtDisplay:"@",gtItemName:"@",gtUrl:"@"},replace:!0,transclude:!0,templateUrl:"template/gt-navbar-item.html",link:function(e){e.isActive=function(){return e.$parent.activeNavbarItem===e.gtItemName},e.ngClick=function(){var e=$(".navbar-collapse");e.removeClass("in"),e.addClass("collapse")}}}}]),glowroot.directive("gtSidebarItem",["$location",function(e){return{scope:{gtDisplay:"@",gtDisplayRight:"@",gtUrl:"@",gtActive:"&",gtSubActive:"&"},replace:!0,templateUrl:"template/gt-sidebar-item.html",link:function(t,a,n){t.isActive=function(){return n.gtActive?t.gtActive():e.path()==="/"+t.gtUrl},t.isSubActive=function(){return n.gtSubActive&&t.gtSubActive()}}}}]),glowroot.directive("gtDisplayWhitespace",function(){return{scope:{gtBind:"&"},link:function(e,t){var a=e.gtBind();t.text(a);var n=t.html();n=(n=n.replace("\n","<em>\\n</em>").replace("\r","<em>\\r</em>").replace("\t","<em>\\t</em>")).replace("</em><em>",""),t.html(n)}}}),glowroot.directive("gtSpinner",function(){return function(e,t,a){var n,i;t.addClass("hide"),e.$watch(a.gtShow,function(e){if(e){if(n)return;var o;a.gtSpinnerInline&&(o=10),n=new Spinner({lines:9,radius:8,width:5,left:o,zIndex:1020}),a.gtNoDelay?(t.removeClass("hide"),n.spin(t[0])):(clearTimeout(i),i=setTimeout(function(){t.removeClass("hide"),n.spin(t[0])},100))}else n&&(clearTimeout(i),t.addClass("hide"),n.stop(),n=void 0)})}}),glowroot.directive("gtFormWithPrimaryButton",function(){return function(e,t){t.on("keypress","input",function(e){13===e.which&&t.find(".btn-primary:enabled").first().click()})}}),glowroot.directive("gtFormAutofocusOnFirstInput",["$timeout",function(e){return function(t,a){e(function(){var e="input:not(.gt-autofocus-ignore)",n=t.$watch(function(){return a.find(e).length&&a.find("input").first().is(":visible")},function(t){t&&(a.find(e).first().focus(),n())})},100)}}]),glowroot.directive("gtSmartClick",function(){return{scope:{gtSmartClick:"&"},link:function(e,t){t.mousedown(function(t){e.mousedownPageX=t.pageX,e.mousedownPageY=t.pageY}),t.click(function(t,a){!a&&(Math.abs(t.pageX-e.mousedownPageX)>5||Math.abs(t.pageY-e.mousedownPageY)>5)||e.$apply(function(){e.gtSmartClick({$event:t})})})}}}),glowroot.directive("gtSelectpicker",["$timeout",function(e){return{scope:{ngModel:"=",gtSelectpickerOptions:"&",gtTitle:"&"},link:function(t,a){a.attr("title",t.gtTitle),a.selectpicker(t.gtSelectpickerOptions()),t.$watch("ngModel",function(){a.selectpicker("val",t.ngModel)}),e(function(){a.selectpicker("refresh")}),t.$on("$destroy",function(){a.selectpicker("destroy")})}}}]),glowroot.directive("gtDatePicker",["$timeout",function(e){return{scope:{gtModel:"=",gtId:"@"},templateUrl:"template/gt-date-picker.html",link:function(t,a){var n=a.find(".date"),i={time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right"},o=n.datetimepicker({icons:i,format:"L"});t.$watch("gtModel",function(e){n.data("DateTimePicker").date(moment(e))}),o.on("dp.change",function(a){e(function(){t.gtModel=a.date.valueOf()})})}}}]),glowroot.directive("gtTimerDisplay",function(){return{scope:{heading:"@",flattenedTimers:"=",treeTimers:"=",transactionCount:"="},templateUrl:"template/gt-timer-display.html",link:function(e){function t(e){var t=[];return angular.forEach(e,function(e){t.push(e.totalNanos)}),t.sort(function(e,t){return t-e}),t}function a(){function t(t,a){var n=a[Math.min(e.limit,a.length)-1],i=0;angular.forEach(t,function(t){t.show=t.totalNanos>=n&&i++<e.limit})}e.ftShowMore=e.limit<e.flattenedTimers.length,e.ttShowMore=e.limit<e.treeTimers.length,e.showLess=10!==e.limit,t(e.flattenedTimers,n),t(e.treeTimers,i)}var n=[],i=[];e.limit=10,e.$watch("flattenedTimers",function(){n=t(e.flattenedTimers),i=t(e.treeTimers),a()}),e.clickShowMore=function(){e.limit*=2,a()},e.clickShowLessFT=function(){for(e.limit/=2;e.limit>=e.flattenedTimers.length;)e.limit/=2;a()},e.clickShowLessTT=function(){e.limit/=2,a()},e.clickShowAll=function(){for(;e.limit<e.treeTimers.length;)e.limit*=2;a()}}}}),glowroot.directive("gtThreadStats",function(){return{scope:{threadStats:"=",transactionCount:"="},templateUrl:"template/gt-thread-stats.html"}}),glowroot.filter("gtBytes",function(){return HandlebarsRendering.formatBytes}),glowroot.filter("gtMillis",function(){return HandlebarsRendering.formatMillis}),glowroot.filter("gtCount",function(){return HandlebarsRendering.formatCount}),glowroot.filter("gtDuration",function(){return function(e){if(void 0===e)return"";var t=moment.duration(e),a=[];return t.days()>=1&&a.push(Math.floor(t.days())+"d"),t.hours()>=1&&a.push(Math.floor(t.hours())+"h"),t.minutes()>=1&&a.push(Math.floor(t.minutes())+"m"),t.seconds()>=1&&a.push(Math.floor(t.seconds())+"s"),a.join(" ")}}),glowroot.filter("gtGaugeValue",function(){return function(e){return(e<1e6?parseFloat(e.toPrecision(6)):Math.round(e)).toLocaleString(void 0,{maximumFractionDigits:20})}}),glowroot.filter("gtOnOff",function(){return function(e){return e?"ON":"OFF"}}),glowroot.filter("gtTypeaheadClassHighlight",["$sce",function(e){function t(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(a,n){return n?(a=a.replace(new RegExp("^"+t(n),"gi"),"<strong>$&</strong>"),a=a.replace(new RegExp("\\.("+t(n)+")","gi"),".<strong>$1</strong>"),a=a.replace(new RegExp("\\$("+t(n)+")","gi"),"$<strong>$1</strong>"),e.trustAsHtml(a)):a}}]);var HandlebarsRendering,SHOW_ELLIPSED_NODE_MARKERS=!1;HandlebarsRendering=function(){function e(e,t){function a(e,n){t(e,n),e.childTimers&&$.each(e.childTimers,function(e,t){a(t,n+1)})}$.isArray(e)?$.each(e,function(e,t){a(t,0)}):a(e,0)}function t(e){e.treeTimers&&(e.treeTotalNanosList=a(e.treeTimers),e.flattenedTotalNanosList=a(e.flattenedTimers))}function a(t){var a=[];return e(t,function(e){a.push(e.totalNanos)}),a.sort(function(e,t){return t-e}),a}function n(t,a,n){var i=n[Math.min(t.limit,n.length)-1],o=0;e(a,function(e){e.show=e.totalNanos>=i&&o++<t.limit})}function i(t,a,n){e(n,function(e){e.show?$("#"+t.prefix+a+e.id).show():$("#"+t.prefix+a+e.id).hide()})}function o(e){e.ftShowMore=e.limit<e.flattenedTimers.length,e.ttShowMore=e.limit<e.timers.length,e.showLess=10!==e.limit,n(e,e.treeTimers,e.treeTotalNanosList),n(e,e.flattenedTimers,e.flattenedTotalNanosList)}function r(e){o(e),e.ftShowMore||$("#"+e.prefix+"ftForFocus").focus(),e.ttShowMore||$("#"+e.prefix+"ttForFocus").focus(),e.showLess||($("#"+e.prefix+"ttForFocus").focus(),$("#"+e.prefix+"ftForFocus").focus()),setTimeout(function(){i(e,"tt",e.treeTimers),i(e,"ft",e.flattenedTimers),$("#"+e.prefix+"ttShowMore").toggle(e.ttShowMore),$("#"+e.prefix+"ttShowAll").toggle(e.ttShowMore),$("#"+e.prefix+"ftShowMore").toggle(e.ftShowMore),$("#"+e.prefix+"ftShowAll").toggle(e.ftShowMore),$("#"+e.prefix+"ttShowLess").toggle(e.showLess),$("#"+e.prefix+"ftShowLess").toggle(e.showLess),$("#"+e.prefix+"ttShowMoreAndLess").toggle(e.ttShowMore&&e.showLess),$("#"+e.prefix+"ftShowMoreAndLess").toggle(e.ftShowMore&&e.showLess)})}function l(t){if(t.treeTimers){var a=0,n=[];e(t.treeTimers,function(e,t){e.id=a++,e.depth=t,n.push(e),e.childTimers&&e.childTimers.sort(function(e,t){return t.totalNanos-e.totalNanos})}),t.timers=n}}function s(e){function t(e,o){var r=n[e.name];r?-1===o.indexOf(e.name)&&(r.totalNanos+=e.totalNanos,r.active=r.active||e.active,r.count+=e.count):(r={name:e.name,totalNanos:e.totalNanos,count:e.count,active:e.active,id:a++},n[e.name]=r,i.push(r)),e.childTimers&&$.each(e.childTimers,function(a,n){t(n,o.concat(e.name))})}if(e.treeTimers){var a=0,n={},i=[];$.isArray(e.treeTimers)?$.each(e.treeTimers,function(e,a){t(a,[])}):t(e.treeTimers,[]),i.sort(function(e,t){return t.totalNanos-e.totalNanos}),e.flattenedTimers=i}}function d(e,t){function a(e){return t?'<span class="gt-bold">'+e+":</span>":e+":"}var n="";return $.each(e,function(e,i){$.isArray(i)?$.each(i,function(a,i){var o={};o[e]=i,n+=d(o,t)}):n+="object"==typeof i&&null!==i?a(e)+'<br><div class="gt-indent2">'+d(i)+"</div>":'<div class="clearfix"><div style="float: left;">'+a(e)+'&nbsp;</div><div class="gt-trace-attr-value">'+i+"</div></div>"}),n}function c(e){var t=angular.element(document.body).injector(),a=t.get("$rootScope"),n=t.get("login");a.$apply(function(){e?n.goToLogin("Your session has timed out"):n.goToLogin()})}function g(e,t,a,n){var i=$(t);if(!i.data("gtLoading"))if(i.data("gtLoaded"))i.hasClass("hide")?i.removeClass("hide"):i.addClass("hide");else if(a)w(a,i),i.removeClass("hide"),i.data("gtLoaded",!0);else{i.data("gtLoading",!0);var o=Glowroot.showSpinner(e.parent().find(".gt-trace-detail-spinner"));$.get(n).done(function(e){e.overwritten?i.find(".gt-profile").html('<div style="padding: 1em;">The profile has expired, see <a href="admin/storage#trace-capped-database-size">Configuration &gt; Storage &gt; Trace detail data</a></div>'):e.expired?i.find(".gt-profile").html.append('<div style="padding: 1em;">This trace has expired</div>'):w(e,i),i.removeClass("hide")}).fail(function(e){401===e.status?c(e.responseJSON.timedOut):(i.find(".gt-profile").html('<div class="gt-red" style="padding: 1em 0;">An error occurred retrieving the profile</div>'),i.removeClass("hide"))}).always(function(){o.stop(),i.data("gtLoading",!1),i.data("gtLoaded",!0)})}}function p(){N=($("#entries").width()-220)/j,N=Math.max(N,60),N=Math.min(N,240)}function u(e,t){$.each(e,function(e,a){a.queryMessage&&(a.queryMessage.sharedQueryText=t[a.queryMessage.sharedQueryTextIndex],a.queryMessage.sharedQueryText.fullTextSha1||(a.message=a.queryMessage.prefix+a.queryMessage.sharedQueryText.fullText+a.queryMessage.suffix)),a.childEntries&&u(a.childEntries,t)})}function m(e){function t(e,i){var o,r;for(o=0;o<e.length;o++)(r=e[o]).collapsed=!1,r.depth=i,a.push(r),r.index=n++,r.childEntries&&t(r.childEntries,i+1)}var a=[],n=0;return t(e,0),a}function h(e,t){var a,n;a=0===t?100:500;var i="";for(n=t;n<Math.min(t+a,e.length);n++)i+=JST["trace-entry"](e[n]);$("#entries").append(i),t+100<e.length&&setTimeout(function(){h(e,t+a)},10)}function f(e,t,a,n){var i,o;if(0===a.lastIndexOf("/*",0)){var r=a.indexOf("*/")+2;i=a.substring(0,r)+"\n",o=a.substring(r).trim()}else i="",o=a;var l=SqlPrettyPrinter.format(o);if("object"==typeof l)window.console&&(console.log(l.message),console.log(o));else{if(i.length){for(var s="",d=0;d<l.length&&" "===l[d];d++)s+=" ";l=s+i+l}var c=n.replace(/ => [0-9]+ rows?$/,""),g=n.substring(c.length+1),p="jdbc execution:\n\n";p+='<span class="gt-indent2 gt-inline-block" style="white-space: pre-wrap;">'+l+"</span>",c&&(p+='\n\n<span class="gt-indent2">parameters:</span>\n\n<span class="gt-indent2">  '+c+"</span>"),g&&(p+='\n\n<span class="gt-indent2">rows:</span>\n\n<span class="gt-indent2">  '+g+"</span>"),t.css("padding-bottom","10px");var u=t.find(".gt-clip");u.css("top","10px"),u.css("right","10px");var m=t.find(".gt-pre-wrap");m.html(p),m.css("min-width",.6*e.parent().width())}}function v(e){function t(){n.toggleClass("hide"),a.toggleClass("hide"),a.width()>=a.parent().width()&&a.css("display","block"),n.hasClass("hide")?(a.attr("tabindex",-1),a.css("outline","none"),a.focus()):(n.attr("tabindex",-1),n.css("outline","none"),n.focus())}var a=e.find(".gt-expanded-content"),n=e.find(".gt-unexpanded-content");if(a.hasClass("hide")&&!a.data("gtExpandedPreviously")){var i=a.find(".fa-clipboard");i.on("mouseenter",function(){a.css("background-color","#ddd")}),a.on("mouseleave",function(){a.css("background-color","")});var o=a.find(".gt-clip-text");gtClipboard(i,function(){return o[0]},function(){var e=o.text();return 0===e.lastIndexOf("jdbc execution:\n\n",0)&&(e=e.substring("jdbc execution:\n\n".length)),e});var r,l=a.find(".gt-expanded-trace-entry");if(l.length){var s=l.data("gt-trace-entry-index");r=A[s].queryMessage}if(r&&r.sharedQueryText.fullTextSha1&&!r.sharedQueryText.fullText){var d,g=e.parents(".gt-trace-parent").data("gtAgentRollupId"),p=Glowroot.showSpinner(a.find(".gt-trace-detail-spinner"),function(){t(),d=!0});$.get("backend/transaction/full-query-text?agent-rollup-id="+encodeURIComponent(g)+"&full-text-sha1="+r.sharedQueryText.fullTextSha1).done(function(e){e.expired?l.text("[the full query text has expired]"):(l.text(r.prefix+e.fullText+r.suffix),"jdbc execution: "===r.prefix&&f(n,a,e.fullText,r.suffix.trim()),r.sharedQueryText.fullText=e.fullText)}).fail(function(e){401===e.status?c(e.responseJSON.timedOut):l.html('<div class="gt-red">An error occurred retrieving the full query text</div>')}).always(function(){p.stop(),d||t()})}else if(r&&r.sharedQueryText.fullTextSha1)l.text(r.prefix+r.sharedQueryText.fullText+r.suffix),"jdbc execution: "===r.prefix&&f(n,a,r.sharedQueryText.fullText,r.suffix.trim()),t();else{var u=l.text().trim();if(0===u.lastIndexOf("jdbc execution: ",0)){var m=u.substring("jdbc execution: ".length),h=m.replace(/ => [0-9]+ rows?$/,"").replace(/ \[.*?]$/,""),v=m.substring(h.length+1);f(n,a,h,v)}t()}}else t();a.data("gtExpandedPreviously",!0)}function b(e,t,a){a?v(e):Math.abs(t.pageX-q)>5||Math.abs(t.pageY-B)>5||v(e)}function y(e){return Handlebars.Utils.escapeExpression(e)}function w(e,t){function a(t,a){function i(e){if(e===U)return y(e);if(0===l.length)return y(e);var t,a=[];for(r=0;r<l.length;r++)-1!==(t=e.toUpperCase().indexOf(l[r]))&&a.push([t,t+l[r].length]);if(0===a.length)return y(e);a.sort(function(e,t){return e[0]-t[0]});var n=a[0];return y(e.substring(0,n[0]))+"<strong>"+y(e.substring(n[0],n[1]))+"</strong>"+i(e.substring(n[1]))}function o(a,n){function r(e){var t,a=e.toUpperCase();for(t=0;t<l.length;t++)if(-1!==a.indexOf(l[t]))return!0;return!1}for(var s=[a];a.childNodes&&1===a.childNodes.length&&!a.leafThreadState&&(a.sampleCount===a.childNodes[0].sampleCount||a.sampleCount<e.unfilteredSampleCount)&&(!SHOW_ELLIPSED_NODE_MARKERS||!a.ellipsedSampleCount);)a=a.childNodes[0],s.push(a);var d,c,g=!1;for(d=0;d<s.length;d++)if((c=s[d].stackTraceElement)!==U&&r(c)){g=!0;break}var p=s[s.length-1];if(p.leafThreadState&&r(p.leafThreadState)&&(g=!0),g||n){for(d=0;d<s.length;d++)s[d].filteredSampleCount=s[d].sampleCount,s[d].filteredEllipsedSampleCount=s[d].ellipsedSampleCount;if(p.childNodes)for(d=0;d<p.childNodes.length;d++)o(p.childNodes[d],!0)}else{for(d=0;d<s.length;d++)s[d].filteredSampleCount=0,s[d].filteredEllipsedSampleCount=!1;if(p.childNodes)for(d=0;d<p.childNodes.length;d++)p.filteredSampleCount+=o(p.childNodes[d]);p.ellipsedSampleCount&&(p.filteredSampleCount+=p.ellipsedSampleCount)}if(p.ellipsedSampleCount&&p.filteredEllipsedSampleCount?$("#gtProfileNodeEllipsed"+p.id).show():p.ellipsedSampleCount&&$("#gtProfileNodeEllipsed"+p.id).hide(),0===p.filteredSampleCount)return $("#gtProfileNode"+p.id).hide(),0;for(d=0;d<s.length;d++){var u=i(s[d].stackTraceElement);$("#gtProfileNodeText"+s[d].id).html(u),s.length>1&&d===s.length-1&&$("#gtProfileNodeTextUnexpanded"+p.id).html(u)}var m=p.filteredSampleCount/e.unfilteredSampleCount*100;if($("#gtProfileNodePercent"+p.id).text(C(m)+"%"),$("#gtProfileNode"+p.id).show(),s.length>1){var h=$("#gtProfileNodeText"+p.id).parent(),f=$("#gtProfileNodeText"+p.id).parent().parent().find(".gt-unexpanded-content");g&&t.length?(f.addClass("hide"),h.removeClass("hide")):(f.removeClass("hide"),h.addClass("hide"))}return p.leafThreadState&&$("#gtProfileNodeThreadState"+p.id).html(i(p.leafThreadState)),p.filteredSampleCount}var r,l=[];for(r=0;r<t.length;r++)l.push(t[r].toUpperCase());o(n,a||!t.length)}var n={stackTraceElement:"",sampleCount:0,ellipsedSampleCount:0,childNodes:[]};$.each(e.rootNodes,function(e,t){n.sampleCount+=t.sampleCount,n.ellipsedSampleCount+=t.ellipsedSampleCount,(!t.ellipsedSampleCount||t.sampleCount>t.ellipsedSampleCount)&&n.childNodes.push(t)}),n.childNodes&&1===n.childNodes.length&&!n.ellipsedSampleCount?n=n.childNodes[0]:n.stackTraceElement=U;var i=$(t);!function(){function e(t){if(t.id=O++,t.childNodes){var a;for(a=0;a<t.childNodes.length;a++)e(t.childNodes[a])}}e(n)}();var o=function(t){function a(i,o){var r;if(0===(r=t?i.timerCounts[t]||0:i.sampleCount))return"";for(var l=[i];i.childNodes&&1===i.childNodes.length&&!i.leafThreadState&&(i.sampleCount===i.childNodes[0].sampleCount||i.sampleCount<e.unfilteredSampleCount)&&(!SHOW_ELLIPSED_NODE_MARKERS||!i.ellipsedSampleCount);)i=i.childNodes[0],l.push(i);t||(r=l[l.length-1].sampleCount);var s='<span id="gtProfileNode'+i.id+'">';s+='<span class="gt-inline-block gt-width6" style="margin-left: '+2*o*P+'px;"',s+=' id="gtProfileNodePercent'+i.id+'">';var d=r/e.unfilteredSampleCount*100;if(s+=C(d),s+="% </span>",1===l.length?(s+='<span style="visibility: hidden;"><strong>...</strong> </span>',s+='<span class="gt-inline-block gt-pad1profile">',s+='<span class="gt-monospace" id="gtProfileNodeText'+i.id+'">',s+=y(i.stackTraceElement),s+="</span></span><br>"):(s+="<span>",s+='<span class="gt-inline-block gt-unexpanded-content" style="vertical-align: top;">',s+='<span class="gt-link-color"><strong>...</strong> </span>',s+='<span class="gt-monospace" id="gtProfileNodeTextUnexpanded'+l[l.length-1].id+'">',s+=y(l[l.length-1].stackTraceElement)+"</span><br></span>",s+='<span style="visibility: hidden;"><strong>...</strong> </span>',s+='<span class="gt-inline-block gt-expanded-content hide" style="vertical-align: top;">',$.each(l,function(e,t){s+='<span class="gt-monospace" id="gtProfileNodeText'+t.id+'">'+y(t.stackTraceElement)+"</span><br>"}),s+="</span></span><br>"),i.leafThreadState&&(s+='<span class="gt-inline-block gt-width4" style="margin-left: '+(o+5)*D+'px;"></span>',s+='<span style="visibility: hidden;"><strong>...</strong> </span>',s+='<span class="gt-inline-block gt-pad1profile gt-monospace" id="gtProfileNodeThreadState',s+=i.id+'">',s+=y(i.leafThreadState),s+="</span><br>"),i.childNodes){var c=i.childNodes;c.sort(function(e,a){return t?(a.timerCounts[t]||0)-(e.timerCounts[t]||0):a.sampleCount-e.sampleCount});for(var g=0;g<c.length;g++)s+=a(c[g],o+1)}if(SHOW_ELLIPSED_NODE_MARKERS&&i.ellipsedSampleCount){var p=i.ellipsedSampleCount/n.sampleCount*100;s+='<div id="gtProfileNodeEllipsed'+i.id+'">',s+='<span class="gt-inline-block gt-width4" style="margin-left: '+(o+5)*D+'px;"></span>',s+='<span style="visibility: hidden;"><strong>...</strong> </span>',s+='<span class="gt-inline-block gt-pad1profile">(one or more branches ~ ',s+=C(p),s+="%)</span></div>"}return SHOW_ELLIPSED_NODE_MARKERS||i.childNodes||i.leafThreadState||(s+='<div id="gtProfileNodeEllipsed'+i.id+'">',s+='<span class="gt-inline-block gt-width4" style="margin-left: '+(o+5)*D+'px;"></span>',s+='<span style="visibility: hidden;"><strong>...</strong> </span>',s+='<span class="gt-inline-block gt-pad1profile" style="font-style: italic;">truncated branches',s+="</span></div>"),s+="</span>"}return n.childNodes?a(n,0):""}();i.find(".gt-profile").html(o);var r,l=i.find(".gt-profile-text-filter"),s=i.find(".gt-profile-text-filter-refresh");l.off("input.gtProfileFilter"),s.length||l.on("input.gtProfileFilter",function(){clearTimeout(r),r=setTimeout(function(){var e=l.val();a(e?[e]:[])},50)});var d=l.val(),c=gtParseIncludesExcludes(d);c.error||!c.includes.length&&!c.excludes.length||(a(c.includes,!0),i.data("gtTextFilterOverride",!0))}function x(e){if(isNaN(parseFloat(e))||!isFinite(e))return"-";if(0===e)return"0";var t=["bytes","KB","MB","GB","TB","PB"],a=Math.floor(Math.log(e)/Math.log(1024)),n=e/Math.pow(1024,Math.floor(a));return 0===a?n.toFixed(0)+" bytes":n.toFixed(1)+" "+t[a]}function k(e){return Math.abs(e)<5e-7?"0.0":Math.abs(e)<1e-6?"0.000001":Math.abs(e)<1e-5?e.toPrecision(1):Math.abs(e)<1?e.toPrecision(2):S(e)}function T(e){return void 0===e?"":Math.abs(e)<.1?e.toPrecision(1):S(e)}function C(e){return 100===e?"100":e>99.9?"99.9":0===e?"0":e<.1?"0.1":T(e)}function S(e){return(Math.round(10*e)/10).toLocaleString(void 0,{minimumFractionDigits:1})}function M(e){$("#"+e.prefix+"ttShowMore").click(function(){e.limit*=2,r(e)}),$("#"+e.prefix+"ftShowMore").click(function(){e.limit*=2,r(e)})}function E(e){$("#"+e.prefix+"ttShowLess").click(function(){e.limit/=2,r(e)}),$("#"+e.prefix+"ftShowLess").click(function(){for(e.limit/=2;e.limit>=e.flattenedTimers.length;)e.limit/=2;r(e)})}function I(e){$("#"+e.prefix+"ttShowAll").click(function(){for(;e.limit<e.timers.length;)e.limit*=2;r(e)}),$("#"+e.prefix+"ftShowAll").click(function(){for(;e.limit<e.timers.length;)e.limit*=2;r(e)})}var N,R,A,P=8.41,D=2*P,j=8.41;Handlebars.registerHelper("eachKeyValuePair",function(e,t){var a="";return e&&$.each(e,function(e,n){$.each(n,function(n,i){a+=t.fn({key:e,value:i})})}),a}),Handlebars.registerHelper("ifNonEmptyObject",function(e,t){return e&&!$.isEmptyObject(e)?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifDisplayMessage",function(e,t){return e.message||e.queryMessage||!e.error?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifNotNA",function(e,t){return-1!==e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("formatAllocatedBytes",function(e){return x(e)}),Handlebars.registerHelper("ifNotOne",function(e,t){return 1!==e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("date",function(e){return moment(e).format("YYYY-MM-DD h:mm:ss.SSS a (Z)")}),Handlebars.registerHelper("nanosToMillis",function(e){return k(e?e/1e6:0)}),Handlebars.registerHelper("formatInteger",function(e){return e.toLocaleString()}),Handlebars.registerHelper("ifExistenceYes",function(e,t){return"yes"===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifExistenceExpired",function(e,t){return"expired"===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifExistenceNo",function(e,t){return"no"===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifAnyThreadInfo",function(e,t){return e.threadCpuNanos||e.threadBlockedNanos||e.threadWaitedNanos||e.threadAllocatedBytes?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("headerDetailHtml",function(e){return d(e,!0)}),Handlebars.registerHelper("entryDetailHtml",function(e){return d(e)}),Handlebars.registerHelper("initialMftStyle",function(e){return e>10?' style="display: none;"':""}),Handlebars.registerHelper("ifLongMessage",function(e,t){return(e.queryMessage&&e.queryMessage.sharedQueryText.fullTextSha1?N+1:e.message.length)>N?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifSqlMessage",function(e,t){return 0===e.lastIndexOf("jdbc execution: ",0)?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("errorIndentClass",function(e){return e?"gt-indent6":"gt-indent2"}),Handlebars.registerHelper("exceptionIndentClass",function(e){return e?"gt-indent2":"gt-indent4"}),Handlebars.registerHelper("traceEntryIndentPx",function(e){return 2*j*(e.depth+1)}),Handlebars.registerHelper("timerIndent",function(e){return P*e.depth}),Handlebars.registerHelper("traceEntryBarLeft",function(e){var t=Math.floor(50*e/R);return 2*Math.min(t,49)}),Handlebars.registerHelper("traceEntryBarWidth",function(e){var t=Math.floor(50*e.startOffsetNanos/R),a=Math.floor(50*(e.startOffsetNanos+e.durationNanos-1)/R);return 2*Math.max(1,a-t+1)}),Handlebars.registerHelper("firstPart",function(e){var t=N-2*e.depth;return(e.queryMessage&&e.queryMessage.sharedQueryText.fullTextSha1?e.queryMessage.prefix+e.queryMessage.sharedQueryText.truncatedText:e.message).slice(0,Math.ceil(t/2))}),Handlebars.registerHelper("lastPart",function(e){var t=N-2*e.depth;return(e.queryMessage&&e.queryMessage.sharedQueryText.fullTextSha1?e.queryMessage.sharedQueryText.truncatedEndText+e.queryMessage.suffix:e.message).slice(-Math.floor(t/2))}),Handlebars.registerHelper("exceptionHtml",function(e){var t='<div style="white-space: pre;">';for(t+='<div style="font-weight: bold; white-space: pre-wrap;">';e;){var a=e.message;a&&(a=": "+a.replace(/\n/g,"\n    ")),t+=y(e.className+a)+"\n</div>";var n;for(n=0;n<e.stackTraceElements.length;n++)t+="at "+y(e.stackTraceElements[n])+"\n";e.framesInCommonWithEnclosing&&(t+="... "+e.framesInCommonWithEnclosing+" more\n"),(e=e.cause)&&(t+='\n<div style="font-weight: bold; white-space: pre-wrap;">Caused by: ')}return t+="</div>"}),Handlebars.registerHelper("locationStackTraceHtml",function(e){var t,a='<div class="gt-monospace" style="white-space: pre;">';for(t=0;t<e.length;t++)a+=y(e[t])+"\n";return a+="</div>"});var q,B;$(document).on("mousedown",".gt-unexpanded-content, .gt-expanded-content",function(e){q=e.pageX,B=e.pageY}),$(document).on("click",".gt-timers-view-toggle",function(){var e=$(this).parents(".gt-timers");e.children(".gt-timers-table").toggleClass("hide");var t=e.find(".gt-timers-view-toggle:visible");t.attr("tabindex",-1),t.css("outline","none"),t.focus()}),$(document).on("click",".gt-unexpanded-content, .gt-expanded-content",function(e,t){b($(this).parent(),e,t)}),$(document).on("click",".gt-entries-toggle",function(){var e=$("#entries");if(!e.data("gtLoading"))if(e.data("gtLoaded"))e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide");else{var t=$(this).parents(".gt-trace-parent"),a=t.data("gtEntries");if(a)e.data("gtLoaded",!0),p(),u(a,t.data("gtSharedQueryTexts")),A=m(a),e.removeClass("hide"),h(A,0);else{var n=t.data("gtAgentRollupId"),i=t.data("gtAgentId"),o=t.data("gtTraceId"),r=t.data("gtCheckLiveTraces");e.data("gtLoading",!0);var l=$(this),s=Glowroot.showSpinner(l.parent().find(".gt-trace-detail-spinner")),d="backend/trace/entries?agent-rollup-id="+encodeURIComponent(n)+"&agent-id="+encodeURIComponent(i)+"&trace-id="+o;r&&(d+="&check-live-traces=true"),$.get(d).done(function(t){if(t.overwritten)e.append('<div style="padding: 1em;">The trace entries have expired, see <a href="admin/storage#trace-capped-database-size">Configuration &gt; Storage &gt; Trace detail data</a></div>');else if(t.expired)e.append('<div style="padding: 1em;">This trace has expired</div>');else{p(),u(t.entries,t.sharedQueryTexts);var a=t.entries[t.entries.length-1];R=Math.max(R,a.startOffsetNanos+a.durationNanos),A=m(t.entries),e.removeClass("hide"),h(A,0)}}).fail(function(t){401===t.status?c(t.responseJSON.timedOut):e.append('<div class="gt-red" style="padding: 1em;">An error occurred retrieving the trace entries</div>')}).always(function(){s.stop(),e.data("gtLoading",!1),e.data("gtLoaded",!0)})}}}),$(document).on("click",".gt-trace-entry-toggle",function(){function e(t,a){var n;for(n=0;n<t.childEntries.length;n++){var i=t.childEntries[n];a?$("#gtTraceEntry"+i.index).hide():$("#gtTraceEntry"+i.index).show(),i.childEntries&&!i.collapsed&&e(i,a)}}var t=$(this).data("gt-index"),a=A[t];a.collapsed=!a.collapsed,e(a,a.collapsed);var n=$(this).find("i");a.collapsed?(n.removeClass("fa-minus-square-o"),n.addClass("fa-plus-square-o")):(n.removeClass("fa-plus-square-o"),n.addClass("fa-minus-square-o"))}),$(document).on("click",".gt-main-thread-profile-toggle",function(){var e,t=$(this).parents(".gt-trace-parent"),a=$(this),n=t.data("gtMainThreadProfile");if(!n){var i=t.data("gtAgentRollupId"),o=t.data("gtAgentId"),r=t.data("gtTraceId"),l=t.data("gtCheckLiveTraces");e="backend/trace/main-thread-profile?agent-rollup-id="+encodeURIComponent(i)+"&agent-id="+encodeURIComponent(o)+"&trace-id="+r,l&&(e+="&check-live-traces=true")}g(a,"#mainThreadProfileOuter",n,e)}),$(document).on("click",".gt-aux-thread-profile-toggle",function(){var e,t=$(this).parents(".gt-trace-parent"),a=$(this),n=t.data("gtAuxThreadProfile");if(!n){var i=t.data("gtAgentRollupId"),o=t.data("gtAgentId"),r=t.data("gtTraceId"),l=t.data("gtCheckLiveTraces");e="backend/trace/aux-thread-profile?agent-rollup-id="+encodeURIComponent(i)+"&agent-id="+encodeURIComponent(o)+"&trace-id="+r,l&&(e+="&check-live-traces=true")}g(a,"#auxThreadProfileOuter",n,e)});var U="<multiple root nodes>",O=0;return{renderTrace:function(e,a,n,i,r,d){e.mainBreakdown={treeTimers:e.mainThreadRootTimer,prefix:"m",limit:10},e.auxBreakdown={treeTimers:e.auxThreadRootTimers,prefix:"a",limit:10},l(e.mainBreakdown),l(e.auxBreakdown),s(e.mainBreakdown),s(e.auxBreakdown),t(e.mainBreakdown),t(e.auxBreakdown),o(e.mainBreakdown),o(e.auxBreakdown);var c=JST.trace(e);d.html(c),d.addClass("gt-trace-parent"),void 0!==a&&(d.data("gtAgentRollupId",a),d.data("gtAgentId",n),d.data("gtTraceId",i),d.data("gtCheckLiveTraces",r)),R=e.durationNanos,M(e.mainBreakdown),M(e.auxBreakdown),E(e.mainBreakdown),E(e.auxBreakdown),I(e.mainBreakdown),I(e.auxBreakdown)},renderTraceFromExport:function(e,t,a,n,i,o){t.data("gtEntries",a),t.data("gtSharedQueryTexts",n),t.data("gtMainThreadProfile",i),t.data("gtAuxThreadProfile",o),this.renderTrace(e,void 0,void 0,void 0,!1,t)},formatBytes:x,formatMillis:k,formatCount:T,profileToggle:g}}(),window.gtClipboard=function(e,t,a){var n=$(e);if(!n.data("gtZeroClip")){if("undefined"==typeof ZeroClipboard||ZeroClipboard.isFlashUnusable())n.tooltip({title:"Select for clipboard",placement:"bottom",container:"body"}),n.click(function(e){return setTimeout(function(){$(document.body).on("focusin.glowroot.hack",!1);var a=window.getSelection(),i=document.createRange();i.selectNodeContents(t()),a.removeAllRanges(),a.addRange(i),$(e.target).closest('[tabindex="-1"]').focus(),n.attr("title","Now press Ctrl-C!").tooltip("fixTitle").tooltip("show"),n.attr("title","Select for clipboard").tooltip("fixTitle"),setTimeout(function(){$(document.body).off("focusin.glowroot.hack")})}),!1});else{var i=new ZeroClipboard(n);$("#global-zeroclipboard-html-bridge").tooltip({title:"Copy to clipboard",placement:"bottom"}),i.on("ready",function(){i.on("copy",function(e){var t=a();e.clipboardData.setData("text/plain",t+"\n"),$(e.target).closest('[tabindex="-1"]').focus(),$("#global-zeroclipboard-html-bridge").attr("title","Copied!").tooltip("fixTitle").tooltip("show"),$("#global-zeroclipboard-html-bridge").attr("title","Copy to clipboard").tooltip("fixTitle")})})}n.data("gtZeroClip",!0)}},window.gtParseIncludesExcludes=function(e){function t(){r?s.push(i):l.push(i)}var a,n,i,o,r,l=[],s=[];for(e||(e=""),a=0;a<e.length;a++)if(n=e.charAt(a),void 0!==i)if(n===o||!o&&" "===n)t(),i=void 0,o=void 0,r=!1;else{if(!(o||"'"!==n&&'"'!==n))return{error:"Mismatched quote"};i+=n}else if("'"===n||'"'===n)i="",o=n;else if("-"===n){if(a===e.length-1||" "===e.charAt(a+1))return{error:"Invalid location for minus"};r=!0}else" "!==n&&(i=n);return o?{error:"Mismatched quote"}:(i&&t(),{includes:l,excludes:s})},glowroot.factory("modals",["$timeout","$location",function(e,t){return{display:function(a,n){var i=$(a);n&&(i.off("show.bs.modal"),i.on("show.bs.modal",function(){$(this).css("display","block");var e=$(this).find(".modal-dialog"),t=Math.max(($(window).height()-e.height())/2,0);e.css("margin-top",t)})),i.modal();var o=$("body");$(".navbar-fixed-top").css("padding-right",o.css("padding-right")),$(".navbar-fixed-bottom").css("padding-right",o.css("padding-right")),i.off("hide.bs.modal"),i.on("hide.bs.modal",function(){e(function(){var e=i.data("location-query");angular.isArray(e)?angular.forEach(e,function(e){t.search(e,null)}):e&&t.search(e,null)}),$(".navbar-fixed-top").css("padding-right",""),$(".navbar-fixed-bottom").css("padding-right",""),$("#chart canvas").show()}),e(function(){i.find(".modal-body").attr("tabIndex",-1),i.find(".modal-body").css("outline","none"),i.find(".modal-body").focus()})}}}]),glowroot.factory("traceModal",["$http","modals",function(e,t){return{displayModal:function(a,n,i,o){var r,l=$("#traceModal .modal-body");t.display("#traceModal");var s="backend/trace/header?agent-rollup-id="+encodeURIComponent(a)+"&agent-id="+encodeURIComponent(n)+"&trace-id="+i;o&&(s+="&check-live-traces=true"),e.get(s).then(function(e){var t=e.data;r.stop(),$("#chart canvas").hide(),t.expired?l.html("expired"):(t.showExport=!0,HandlebarsRendering.renderTrace(t,a,n,i,o,l),$("#traceModal .modal-body button.download-trace").click(function(){var e=$(this).parents(".gt-trace-parent"),t=e.data("gtTraceId"),i=e.data("gtCheckLiveTraces"),o=document.getElementsByTagName("base")[0].href+"export/trace?";a!==n&&(o+="agent-rollup-id="+encodeURIComponent(a)+"&"),o+="agent-id="+encodeURIComponent(n)+"&trace-id="+t,i&&(o+="&check-live-traces=true"),window.location=o}))},function(){l.html('<div class="gt-red" style="padding: 1em;">An error occurred retrieving the trace</div>')}),l.html('<div style="position: relative; display: inline-block; padding-left: 40px; padding-top: 60px;"></div>'),r=Glowroot.showSpinner(l.children().first())}}}]),glowroot.factory("encryptionKeyMessage",[function(){return{extra:function(){var e="\n\ncassandra.symmetricEncryptionKey can be any 32 character hex string";if(window.crypto&&window.crypto.getRandomValues){var t="",a=new Uint32Array(4);window.crypto.getRandomValues(a);for(var n=0;n<a.length;n++)t+=("0000000"+a[n].toString(16)).slice(-8);return e+", e.g. here's one generated right now in your browser that you could use: "+t}return e}}}]),glowroot.factory("confirmIfHasChanges",["$rootScope","$location","modals",function(e,t,a){return function(n){var i;return function(o,r){if(!n.httpError&&!i&&n.hasChanges()){o.preventDefault();var l=$("#confirmationModal");l.find(".modal-header h3").text("You have unsaved changes"),l.find(".modal-body p").text("Are you sure you want to navigate away from this page?"),a.display("#confirmationModal",!0),$("#confirmationModalButton").off("click"),$("#confirmationModalButton").on("click",function(){e.$apply(function(){i=!0,$("#confirmationModal").modal("hide"),t.$$parse(r)})})}}}}]),glowroot.factory("locationChanges",["$location",function(e){return{on:function(t,a){var n=e.path();t.$on("$locationChangeSuccess",function(){e.path()===n&&a()}),a()}}}]),glowroot.factory("httpErrors",["$rootScope",function(e){function t(e){if(0===e.status||-1===e.status)return{headline:"Unable to connect to server"};var t=e.data,a=t.message;return a||t.stackTrace||(a=t),{headline:"An error occurred",message:a,stackTrace:t.stackTrace}}return e.$on("$locationChangeSuccess",function(){delete e.httpError}),{handle:function(a,n,i){i?403===a.status?i.reject("You don't have permission for this action"):412===a.status?i.reject("Someone else has updated the data on this page, please reload and try again"):(e.httpError=t(a),i.reject(e.httpError.headline)):e.httpError=t(a)},clear:function(){delete e.httpError}}}]),glowroot.factory("login",["$location",function(e){var t,a;return{goToLogin:function(n,i){a=n,"/login"!==(t=i?"/":e.url())&&($(".modal-backdrop").remove(),e.url("/login"))},getMessage:function(){return a},returnToOriginalPath:function(){t&&"/login"!==t?e.url(t):e.url("/")}}}]),glowroot.factory("charts",["$http","$rootScope","$timeout","keyedColorPools","queryStrings","httpErrors",function(e,t,a,n,i,o){function r(e,t,a,n,i,o,r){if(e.range.chartRefresh++,n&&e.range.last)return e.range.last=l(2*e.range.last),void e.applyLast();var d,c,g=s(t,a,e.useGaugeViewThresholdMultiplier,r);if(n||o){var p=s(d=Math.floor(t/g)*g,c=Math.ceil(a/g)*g,e.useGaugeViewThresholdMultiplier,r);p!==g&&(d=Math.floor(t/p)*p,c=Math.ceil(a/p)*p)}else d=Math.ceil(t/g)*g,(c=Math.floor(a/g)*g)<=d&&(a-c>d-t?d=(c+=g)-g:c=(d-=g)+g);var u=Date.now();if((c>u||a>u)&&(!r||c-d>=6e4)){if(!n&&!i&&e.range.last)return r&&6e4===e.range.last?(e.range.chartTo=6e4*Math.ceil(u/6e4),e.range.chartFrom=e.range.chartTo-6e4,void(e.range.last=0)):(e.range.last=l(e.range.last/2),void e.applyLast());if(r&&c-d==12e4)return e.range.last=6e4,void e.applyLast();if(r&&u<d)return e.range.last=6e4,void e.applyLast();var m=l(u-d,i);m>0&&(e.range.last=m),e.applyLast()}else e.range.chartFrom=d,e.range.chartTo=c,e.range.last=0}function l(e,t){if(e>864e5)return t?36e5*Math.floor(e/36e5):864e5*Math.ceil(e/864e5);if(e>36e5&&!t)return 36e5*Math.ceil(e/36e5);return t?6e4*Math.floor(e/6e4):6e4*Math.ceil(e/6e4)}function s(e,a,n,i){var o=a-e;if(i&&o<12e4)return 1e3;var r,l=Date.now()-e,s=t.layout.rollupConfigs;for(r=0;r<s.length-1;r++){var d=s[r],c=s[r+1].viewThresholdMillis;n&&(c*=4);var g=t.layout.rollupExpirationMillis[r];if(o<c&&(0===g||g>l))return d.intervalMillis}return s[s.length-1].intervalMillis}function d(e,t){var a=e.plot.getData();if(t.seriesLabels=[],1!==a.length||void 0!==a[0].label){var n;for(n=0;n<a.length;n++)t.seriesLabels.push({color:a[n].color,text:a[n].label})}}return{createState:function(){return{plot:void 0,keyedColorPool:n.create()}},init:function(e,t,a){a.showChartSpinner=0,t.bind("plotzoom",function(e,t,n){var i=n.amount&&n.amount<1;a.$apply(function(){var e=t.getAxes().xaxis.options.min,n=t.getAxes().xaxis.options.max;r(a,e,n,i)})}),t.bind("plotselected",function(t,n){a.$apply(function(){e.plot.clearSelection();var t=n.xaxis.from,i=n.xaxis.to;r(a,t,i,!1,!0)})}),a.zoomOut=function(){var e=a.range.chartFrom,t=a.range.chartTo,n=t-e;r(a,e-n/2,t+n/2,!0)},a.refresh=function(){a.applyLast(),a.range.chartRefresh++}},initResize:function(e,t){t.$watchGroup(["containerWidth","windowHeight"],function(){e.resize(),e.setupGrid(),e.draw()})},plot:function(e,t,a,n,i){var o={grid:{minBorderMargin:0,borderColor:"#7d7358",borderWidth:1,hoverable:!0},xaxis:{mode:"time",timezone:"browser",twelveHourClock:!0,ticks:5,min:i.range.chartFrom,max:i.range.chartTo,reserveSpace:!1},yaxis:{ticks:10,zoomRange:!1,min:0,max:10,label:"milliseconds",labelPadding:7,tickFormatter:function(e){return e.toLocaleString(void 0)}},zoom:{interactive:!0,ctrlKey:!0,amount:2,skipDraw:!0},selection:{mode:"x"},series:{stack:!0,lines:{show:!0,fill:!0},points:{radius:8}},legend:{show:!1}};a.plot=$.plot(n,e,$.extend(!0,o,t)),a.plot.getAxes().yaxis.options.max=void 0,$(document).off("touchstart.chart"),$(document).on("touchstart.chart",function(){a.plot.hideTooltip()})},refreshData:function(t,a,n,r,l,c){var g=n.range.chartFrom,p=n.range.chartTo,u={agentRollupId:n.agentRollupId,transactionType:n.transactionType,transactionName:n.transactionName,from:g,to:p};r&&(u.autoRefresh=!0),l&&l(u);var m=!n.suppressChartSpinner;m&&n.showChartSpinner++,n.suppressChartSpinner=!1,e.get(t+i.encodeObject(u)).then(function(e){if(o.clear(),m&&n.showChartSpinner--,!n.showChartSpinner){var t=e.data;n.chartNoData=!t.dataSeries.length,c(t),a.plot.getAxes().xaxis.options.min=g,a.plot.getAxes().xaxis.options.max=p,a.dataPointIntervalMillis=s(u.from,u.to,n.useGaugeViewThresholdMultiplier);var i=[],r=[];angular.forEach(t.dataSeries,function(e){r.push(e.name?e.name:"Other")}),a.keyedColorPool.reset(r),angular.forEach(t.dataSeries,function(e,t){var n=r[t],o={data:e.data,label:n,shortLabel:e.shortLabel,color:a.keyedColorPool.get(n),points:{fillColor:a.keyedColorPool.get(n)}};i.push(o)}),i.length?a.plot.setData(i):a.plot.setData([[]]),a.plot.setupGrid(),a.plot.draw(),d(a,n)}},function(e){m&&n.showChartSpinner--,o.handle(e,n)})},renderTooltipHtml:function(e,t,a,n,i,o,r,l,s,d,c){function g(e){var t=moment(e);return d?t.format(d):t.valueOf()%6e4==0?t.format("LT"):t.format("LTS")}var p='<table class="gt-chart-tooltip"><thead><tr><td colspan="3" style="font-weight: 600;">';p+=g(e),t&&(p+=c||" to ",p+=g(t)),l&&(p+='<span style="font-weight: 400;">'+l+"</span>"),p+="</td></tr>",void 0!==a&&(p+='<tr><td colspan="3">',p+=a,p+=" transactions",p+="</td></tr>"),p+="</thead><tbody>";var u,m,h,f,v=o.getData(),b=!1;for(u=0;u<v.length;u++)m=v[u],s?(f=r(void 0,m.label),b=!0):m.data[n]?(b=!0,f=r(m.data[n][1],m.label)):f="no data",p+="<tr",h=m.shortLabel?m.shortLabel:m.label,u===i&&(p+=' style="background-color: #eee;"'),p+='><td class="legendColorBox" width="16"><div style="border: 1px solid rgb(204, 204, 204); padding: 1px;"><div style="width: 4px; height: 0px; border: 5px solid '+m.color+'; overflow: hidden;"></div></div></td><td style="padding-right: 10px;">'+h+'</td><td style="font-weight: 600;">'+f+"</td></tr>";return b?p+="</tbody></table>":"No data"},updateRange:r,getDataPointIntervalMillis:s,startAutoRefresh:function(e,t){function n(){e.$apply(function(){e.range.chartAutoRefresh++,e.refresh()}),document.removeEventListener("visibilitychange",n)}function i(){o=a(function(){e.range.last&&(document.hidden?document.addEventListener("visibilitychange",n):(e.suppressChartSpinner=!0,e.range.chartAutoRefresh++,e.refresh())),i()},t)}var o;i(),e.$on("$destroy",function(){a.cancel(o)})}}}]),glowroot.factory("keyedColorPools",[function(){function e(e){function t(e){var t=e.toString(16);return 1===t.length?"0"+t:t}return"#"+t(e.r)+t(e.g)+t(e.b)}function t(t){if(t<n.length)return n[t];var o=$.color.parse(a[t%a.length]);t%a.length==0&&t&&(i-=.3)<.5&&(i+=1);var r=e(o.scale("rgb",i));return n.push(r),r}var a=["#edc240","#8fc6ef","#cb4b4b","#4da74d","#9440ed"],n=a.slice(0),i=1;return{create:function(){function e(){for(var e=0;e<n.length;e++){var a=n[e];if(!i[a])return a}return t(n.length)}var a={},i={};return{reset:function(t){var n={};i={},angular.forEach(t,function(e){var t=a[e];t&&(n[e]=t,i[t]=!0)}),a=n,angular.forEach(t,function(t){if("Other"===t)a[t]="#888";else if(!a[t]){var n=e();a[t]=n,i[n]=!0}})},keys:function(){return Object.keys(a)},add:function(t){var n=a[t];return n||(n=e(),a[t]=n,i[n]=!0,n)},get:function(e){return a[e]},remove:function(e){var t=a[e];t&&(delete a[e],delete i[t])}}}}}]),glowroot.factory("queryStrings",[function(){return{encodeObject:function(e){function t(e){var t=a.indexOf(e);-1!==t&&(n.push(e),a.splice(t,1))}var a=Object.keys(e),n=[];t("agent-rollup-id"),t("agent-id"),t("transaction-type"),t("transaction-name"),Array.prototype.push.apply(n,a);var i="";return angular.forEach(n,function(t){var a=e[t];void 0!==a&&null!==a&&(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),angular.isArray(a)?angular.forEach(a,function(e){i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(e)}):(i&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(a)))}),i?"?"+i:""}}}]),glowroot.factory("conversions",[function(){return{toNumber:function(e){if(""===e)return null;var t=parseFloat(e);return isNaN(t)?e:t}}}]),glowroot.factory("instrumentationExport",[function(){return{clean:function(e){delete e.version,e.classAnnotation||delete e.classAnnotation,e.subTypeRestriction||delete e.subTypeRestriction,e.superTypeRestriction||delete e.superTypeRestriction,e.methodAnnotation||delete e.methodAnnotation,e.methodReturnType||delete e.methodReturnType,e.methodModifiers.length||delete e.methodModifiers,e.nestingGroup||delete e.nestingGroup,e.order||delete e.order,e.transactionType||delete e.transactionType,e.transactionNameTemplate||delete e.transactionNameTemplate,e.transactionUserTemplate||delete e.transactionUserTemplate,e.transactionAttributeTemplates&&Object.keys(e.transactionAttributeTemplates).length||delete e.transactionAttributeTemplates,null===e.transactionSlowThresholdMillis&&delete e.transactionSlowThresholdMillis,e.transactionOuter||delete e.transactionOuter,e.traceEntryMessageTemplate||delete e.traceEntryMessageTemplate,e.traceEntryStackThresholdMillis||delete e.traceEntryStackThresholdMillis,e.traceEntryCaptureSelfNested||delete e.traceEntryCaptureSelfNested,e.timerName||delete e.timerName,e.enabledProperty||delete e.enabledProperty,e.traceEntryEnabledProperty||delete e.traceEntryEnabledProperty}}}]),glowroot.controller("NavbarCtrl",["$scope","$location","queryStrings",function(e,t,a){e.queryString=function(n,i){var o={},r="/report/"===t.path().substr(0,"/report/".length);if(n&&!r&&(o["agent-rollup-id"]=t.search()["agent-rollup-id"],o["agent-id"]=t.search()["agent-id"]),i&&!r){var l=t.search()["transaction-type"];l||(l=e.defaultTransactionType()),l&&(o["transaction-type"]=l)}var s=t.search().last;s&&(o.last=s);var d=t.search().from,c=t.search().to;return void 0!==d&&void 0!==c&&(o.from=6e4*Math.floor(d/6e4),o.to=6e4*Math.ceil(c/6e4)),a.encodeObject(o)},e.configUrl=function(){return e.layout.central&&e.agentPermissions&&e.agentPermissions.config.view?t.search()["agent-rollup-id"]?"config/synthetic-monitor-list?agent-rollup-id="+encodeURIComponent(e.agentRollupId):"config/transaction?agent-id="+encodeURIComponent(e.agentRollupId):"config/transaction"},e.isAnonymous=function(){return e.layout&&e.layout.username&&"anonymous"===e.layout.username.toLowerCase()},e.gearIconUrl=function(){return e.layout?e.layout.central&&e.layout.adminView?"admin/agent-list":!e.layout.central&&(e.agentPermissions&&e.agentPermissions.config.view||e.layout.adminView)?"config/transaction":"change-password":""},e.gearIconNavbarTitle=function(){return e.layout?!e.layout.central&&(e.agentPermissions&&e.agentPermissions.config.view||e.layout.adminView)?"Configuration":e.layout.central&&e.layout.adminView?"Administration":"Profile":""}}]),glowroot.controller("ChartRangeCtrl",["$scope","$location","queryStrings","charts","modals",function(e,t,a,n,i){function o(e){var t=new Date;t.setHours(0,0,0,0);var a=new Date(e);return a.setHours(0,0,0,0),a.getTime()===t.getTime()?"Today":a.getTime()===t.getTime()-864e5?"Yesterday":moment(e).format("l")}e.range.chartRefresh=0,e.range.chartAutoRefresh=0,e.lastDisplay=function(e){function t(e,t){e&&(a+=" "+e+" "+t,1!==e&&(a+="s"))}if(36e5===e)return"Last 60 minutes";if(864e5===e)return"Last 24 hours";var a="Last",n=moment.duration(e);return t(Math.floor(n.asDays()),"day"),t(n.hours(),"hour"),t(n.minutes(),"minute"),t(n.seconds(),"second"),a},e.timeDisplay=function(){if(e.range.last)return e.lastDisplay(e.range.last);var t=6e4*Math.floor(e.range.chartFrom/6e4),a=6e4*Math.ceil(e.range.chartTo/6e4),n=o(t),i=o(a);return n===i?n+", "+moment(t).format("LT")+" to "+moment(a).format("LT"):n+" "+moment(t).format("LT")+" to "+i+" "+moment(a).format("LT")},e.headerRangeQueryString=function(t){var n=e.buildQueryObject();return delete n["trace-chart-from"],delete n["trace-chart-to"],delete n.from,delete n.to,144e5===t?delete n.last:n.last=t,a.encodeObject(n)},e.updateLast=function(t,a){return!(t===e.range.last&&!a.ctrlKey)||(e.range.chartRefresh++,a.preventDefault(),!1)},e.rangeSelections=[18e5,36e5,72e5,144e5,288e5,864e5,1728e5,6048e5,2592e6],e.openCustomRange=function(){i.display("#customDateRangeModal",!0);var t={time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right"},a=e.range.chartFrom,n=e.range.chartTo;$("#customDateRangeFromDate").datetimepicker({icons:t,format:"L"}),$("#customDateRangeFromTime").datetimepicker({icons:t,format:"LT"}),$("#customDateRangeToDate").datetimepicker({icons:t,format:"L"}),$("#customDateRangeToTime").datetimepicker({icons:t,format:"LT"}),$("#customDateRangeFromDate").data("DateTimePicker").date(moment(a).startOf("day")),$("#customDateRangeFromTime").data("DateTimePicker").date(moment(a)),$("#customDateRangeToDate").data("DateTimePicker").date(moment(n).startOf("day")),$("#customDateRangeToTime").data("DateTimePicker").date(moment(n))},e.applyCustomDateRange=function(){function t(e){var t=e.clone().startOf("day");return e.valueOf()-t}var a=$("#customDateRangeFromDate").data("DateTimePicker").date(),n=$("#customDateRangeFromTime").data("DateTimePicker").date(),i=$("#customDateRangeToDate").data("DateTimePicker").date(),o=$("#customDateRangeToTime").data("DateTimePicker").date();e.range.chartFrom=a+t(n),e.range.chartTo=i+t(o),e.range.last=0,e.range.chartRefresh++,$("#customDateRangeModal").modal("hide")}}]),glowroot.controller("TransactionCtrl",["$scope","$location","$timeout","queryStrings","charts","headerDisplay","shortName","defaultSummarySortOrder",function(e,t,a,n,i,o,r,l){function s(){-1!==t.path().lastIndexOf("/"+r+"/",0)&&(e.transactionType=t.search()["transaction-type"],e.transactionName=t.search()["transaction-name"],e.range.last=Number(t.search().last),e.range.chartFrom=Number(t.search().from),e.range.chartTo=Number(t.search().to),isNaN(e.range.chartFrom)||isNaN(e.range.chartTo)?e.range.last||(e.range.last=144e5):e.range.last=0,e.summarySortOrder=t.search()["summary-sort-order"]||e.defaultSummarySortOrder,e.applyLast())}document.title=o+" · Glowroot",e.$parent.activeNavbarItem=r,e.layout.central?e.headerDisplay=e.agentRollupId||"<agent>":e.headerDisplay=o,e.shortName=r,e.defaultSummarySortOrder=l,e.range={},e.hideAgentRollupDropdown=function(){return 1===e.layout.agentRollups.length||!e.layout.central},e.hideTransactionTypeDropdown=function(){var t=e.layout.agentRollups[e.agentRollupId];if(!t)return!1;var a=t.transactionTypes;return!!a&&(1===a.length&&a[0]===e.transactionType)},e.hideMainContent=function(){return e.layout.central&&!e.agentRollupId||!e.transactionType},e.headerQueryString=function(t,a){var i={};return e.layout.central&&(t.agent?i["agent-id"]=t.id:i["agent-rollup-id"]=t.id),i["transaction-type"]=a||t.defaultDisplayedTransactionType,e.range.last?144e5!==e.range.last&&(i.last=e.range.last):(i.from=e.range.chartFrom,i.to=e.range.chartTo),n.encodeObject(i)},e.applyLast=function(){if(e.range.last){var t=moment().startOf("second").valueOf(),a=t-e.range.last,n=t+e.range.last/10,o=i.getDataPointIntervalMillis(a,n),r=Math.floor(a/o)*o,l=Math.ceil(n/o)*o,s=i.getDataPointIntervalMillis(r,l);s!==o&&(r=Math.floor(a/s)*s,l=Math.ceil(n/s)*s),e.range.chartFrom=r,e.range.chartTo=l}},a(function(){e.$on("$locationChangeSuccess",s)}),s(),e.$watchGroup(["range.last","range.chartFrom","range.chartTo","summarySortOrder"],function(a,n){a!==n&&t.search(e.buildQueryObject())}),e.tabQueryString=function(){return n.encodeObject(e.buildQueryObject({}))},e.buildQueryObject=function(a,n){var i=a||angular.copy(t.search());if(e.layout.central){var o=e.layout.agentRollups[e.agentRollupId];o&&(o.agent?i["agent-id"]=e.agentRollupId:i["agent-rollup-id"]=e.agentRollupId)}return i["transaction-type"]=e.transactionType,i["transaction-name"]=e.transactionName,e.range.last?144e5!==e.range.last&&(i.last=e.range.last,delete i.from,delete i.to):(n?(i.from=e.range.chartFrom,i.to=e.range.chartTo):(i.from=6e4*Math.floor(e.range.chartFrom/6e4),i.to=6e4*Math.ceil(e.range.chartTo/6e4)),delete i.last),e.summarySortOrder!==e.defaultSummarySortOrder?i["summary-sort-order"]=e.summarySortOrder:delete i["summary-sort-order"],i},e.currentTabUrl=function(){return t.path().substring(1)}}]),glowroot.controller("TransactionSidebarCtrl",["$scope","$location","$http","$timeout","queryStrings","httpErrors","summarySortOrders","summaryValueFn",function(e,t,a,n,i,o,r,l){function s(t,n){if(e.layout.central&&!e.agentRollupId||!e.transactionType)e.summariesNoSearch=!0;else{e.showSpinner=e.summariesNoSearch;var r={agentRollupId:e.agentRollupId,transactionType:e.transactionType,from:6e4*Math.floor(e.range.chartFrom/6e4),to:6e4*Math.ceil(e.range.chartTo/6e4),sortOrder:e.summarySortOrder,limit:e.summaryLimit};t&&(r.autoRefresh=!0),n&&e.summariesLoadingMore++,g++,a.get("backend/"+e.shortName+"/summaries"+i.encodeObject(r)).then(function(t){if(n&&e.summariesLoadingMore--,!--g){e.showSpinner=!1,e.summariesNoSearch=!1,d=r.sortOrder,c=r.to-r.from;var a=t.data;e.summariesNoData=!a.transactions.length,e.overallSummary=a.overall,e.transactionSummaries=a.transactions,e.moreSummariesAvailable=a.moreAvailable}},function(t){e.showSpinner=!1,n&&e.summariesLoadingMore--,g--,o.handle(t,e)})}}var d,c,g=0;e.summarySortOrders=r,e.summaryLimit=10,e.summariesLoadingMore=0,e.summariesNoSearch=!0,e.overallSummaryValue=function(){return e.overallSummary?l(e.overallSummary,d,e.overallSummary,c):""},e.transactionSummaryValue=function(t){return l(t,d,e.overallSummary,c)},e.sidebarQueryString=function(e){var a=angular.copy(t.search());return a["transaction-name"]=e,i.encodeObject(a)},e.showMoreSummaries=function(){e.summaryLimit*=2,s(!1,!0)},e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh, summarySortOrder]",function(t,a){t!==a&&(t[4]!==a[4]&&(e.summariesNoSearch=!0,delete e.transactionSummaries,delete e.moreSummariesAvailable),n(function(){s(t[3]!==a[3])},100))});var p=!0;e.$on("$stateChangeSuccess",function(){var a=document.activeElement;if(a&&$(a).closest(".gt-sidebar").length){var i=a.getAttribute("gt-url");i&&i!==t.url()&&a.blur()}e.range.last&&!p&&n(function(){s()},100),p=!1}),n(function(){s()},100)}]),glowroot.controller("TransactionTabCtrl",["$scope","$location","$http","$timeout","queryStrings","httpErrors","shortName",function(e,t,a,n,i,o,r){function l(t){if(e.agentPermissions&&e.agentPermissions[r].traces)if(e.layout.central&&!e.agentRollupId||!e.transactionType)e.traceCount=0;else{var n={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.range.chartFrom,to:e.range.chartTo};t&&(n.autoRefresh=!0),d++,a.get("backend/"+r+"/trace-count"+i.encodeObject(n)).then(function(t){--d||("traces"!==e.activeTabItem&&(s=void 0),e.traceCount=t.data)},function(t){d--,o.handle(t,e)})}}var s,d=0;e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh, transactionName]",function(e,t){e!==t&&n(function(){l(e[3]!==t[3])},100)}),e.$on("updateTraceTabCount",function(e,t){s=t}),e.traceCountDisplay=function(){return void 0===e.traceCount?"...":void 0!==s?s:e.traceCount},e.clickTab=function(t,a){return!(t===e.activeTabItem&&!a.ctrlKey)||(e.range.chartRefresh++,a.preventDefault(),!1)},e.keydownTab=function(e,t,a){37!==a.which||a.altKey||a.ctrlKey||!e?39!==a.which||a.altKey||a.ctrlKey||!t||(a.preventDefault(),n(function(){var e=$("#"+t);e.click(),e.focus()})):(a.preventDefault(),n(function(){var t=$("#"+e);t.click(),t.focus()}))};var c=!0;e.$on("$stateChangeSuccess",function(){var a=document.activeElement;if(a&&$(a).closest(".gt-transaction-tabs").length){var i=a.getAttribute("ng-href");i&&i!==t.url().substring(1)&&a.blur()}e.range.last&&!c&&n(function(){l()},100),c=!1}),n(function(){l()},100)}]),glowroot.controller("TransactionAverageCtrl",["$scope","$location","charts",function(e,t,a){function n(t){var a=t.mergedAggregate.mainThreadRootTimers;if(1===a.length)t.mergedAggregate.mainThreadRootTimer=a[0];else{var n,r={name:"<multiple root nodes>",totalNanos:0,count:0,childTimers:a};for(n=0;n<a.length;n++)r.totalNanos+=a[n].totalNanos,r.count+=a[n].count;t.mergedAggregate.mainThreadRootTimer=r}e.transactionCounts=t.transactionCounts,e.mergedAggregate=t.mergedAggregate,e.mergedAggregate.transactionCount&&(e.mainThreadTreeTimers=i(e.mergedAggregate.mainThreadRootTimer),e.auxThreadTreeTimers=i(e.mergedAggregate.auxThreadRootTimers),e.mainThreadFlattenedTimers=o(e.mergedAggregate.mainThreadRootTimer),e.auxThreadFlattenedTimers=o(e.mergedAggregate.auxThreadRootTimers))}function i(e){function t(e,i){e.nestingIndent=i*n*2,a.push(e),e.childTimers&&(e.childTimers.sort(function(e,t){return t.totalNanos-e.totalNanos}),angular.forEach(e.childTimers,function(e){t(e,i+1)}))}var a=[],n=8.41;return angular.isArray(e)?angular.forEach(e,function(e){t(e,0)}):t(e,0),a}function o(e){function t(e,i){var o=a[e.name];o?-1===i.indexOf(e.name)&&(o.totalNanos+=e.totalNanos,o.count+=e.count):(o={name:e.name,totalNanos:e.totalNanos,count:e.count},a[e.name]=o,n.push(o)),e.childTimers&&$.each(e.childTimers,function(a,n){t(n,i.concat(e.name))})}var a={},n=[];return angular.isArray(e)?angular.forEach(e,function(e){t(e,[])}):t(e,[]),n.sort(function(e,t){return t.totalNanos-e.totalNanos}),n}if(e.$parent.activeTabItem="time",!e.hideMainContent()){var r=a.createState();e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(t,i){var o=t[3]!==i[3];a.refreshData("backend/transaction/average",r,e,o,void 0,n)}),e.clickTopRadioButton=function(a){"average"===a?e.range.chartRefresh++:t.url("transaction/"+a+e.tabQueryString())},e.clickActiveTopLink=function(t){return!!t.ctrlKey||(e.range.chartRefresh++,t.preventDefault(),!1)};var l={tooltip:!0,tooltipOpts:{content:function(t,n,i,o){var l,s=0,d=r.plot.getData();for(l=0;l<d.length;l++)s+=d[l].data[o.dataIndex][1];if(0===s)return"No data";var c=n-r.dataPointIntervalMillis;c=Math.ceil(c/r.dataPointIntervalMillis)*r.dataPointIntervalMillis;var g=n;return a.renderTooltipHtml(c,g,e.transactionCounts[n],o.dataIndex,o.seriesIndex,r.plot,function(e){return(100*e/s).toFixed(1)+" %"})}}};a.init(r,$("#chart"),e),a.plot([[]],l,r,$("#chart"),e),a.initResize(r.plot,e),a.startAutoRefresh(e,6e4)}}]),glowroot.controller("TransactionPercentilesCtrl",["$scope","$location","$filter","$timeout","locationChanges","charts","modals",function(e,t,a,n,i,o,r){function l(e){e.sort(function(e,t){return e-t})}function s(e){e.percentile=c}function d(t){e.transactionCounts=t.transactionCounts,e.mergedAggregate=t.mergedAggregate}if(e.$parent.activeTabItem="time",!e.hideMainContent()){var c,g=o.createState();e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(a,n){angular.equals(c,e.layout.agentRollups[e.agentRollupId].defaultDisplayedPercentiles)?t.search("percentile",null):t.search("percentile",c);var i=a[3]!==n[3];o.refreshData("backend/transaction/percentiles",g,e,i,s,d)}),e.clickTopRadioButton=function(a){"percentiles"===a?e.range.chartRefresh++:t.url("transaction/"+a+e.tabQueryString())},e.clickActiveTopLink=function(t){return!!t.ctrlKey||(e.range.chartRefresh++,t.preventDefault(),!1)},e.openCustomPercentilesModal=function(){e.customPercentiles=c.join(", "),r.display("#customPercentilesModal",!0),n(function(){$("#customPercentiles").focus()})},e.applyCustomPercentiles=function(){c=[],angular.forEach(e.customPercentiles.split(","),function(e){(e=e.trim()).length&&c.push(Number(e))}),l(c),$("#customPercentilesModal").modal("hide"),e.range.chartRefresh++},i.on(e,function(){var a=c;if(t.search().percentile){c=[];var n=t.search().percentile;angular.isArray(n)?angular.forEach(n,function(e){c.push(Number(e))}):c.push(Number(n)),l(c)}else c=e.layout.agentRollups[e.agentRollupId].defaultDisplayedPercentiles;void 0===a||angular.equals(c,a)||e.range.chartRefresh++,e.percentiles=c});var p={tooltip:!0,series:{stack:!1,lines:{fill:!1}},tooltipOpts:{content:function(t,n,i,r){var l=n-g.dataPointIntervalMillis;l=Math.ceil(l/g.dataPointIntervalMillis)*g.dataPointIntervalMillis;var s=n;return o.renderTooltipHtml(l,s,e.transactionCounts[n],r.dataIndex,r.seriesIndex,g.plot,function(e){return a("gtMillis")(e)+" milliseconds"})}}};o.init(g,$("#chart"),e),o.plot([[]],p,g,$("#chart"),e),o.initResize(g.plot,e),o.startAutoRefresh(e,6e4)}}]),glowroot.controller("TransactionThroughputCtrl",["$scope","$location","$filter","charts",function(e,t,a,n){function i(t){e.transactionCount=t.transactionCount,e.transactionsPerMin=t.transactionsPerMin}if(e.$parent.activeTabItem="time",!e.hideMainContent()){var o=n.createState();e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(t,a){var r=t[3]!==a[3];n.refreshData("backend/transaction/throughput",o,e,r,void 0,i)}),e.clickTopRadioButton=function(a){"throughput"===a?e.range.chartRefresh++:t.url("transaction/"+a+e.tabQueryString())},e.clickActiveTopLink=function(t){return!!t.ctrlKey||(e.range.chartRefresh++,t.preventDefault(),!1)};var r={tooltip:!0,series:{stack:!1},yaxis:{label:"transactions per minute"},tooltipOpts:{content:function(e,t,n){function i(e){return e%6e4==0?moment(e).format("LT"):moment(e).format("LTS")}var r=n;if(0===r)return"No data";var l=t-o.dataPointIntervalMillis,s=t,d='<div class="gt-chart-tooltip">';return d+='<div style="font-weight: 600;">',d+=i(l=Math.ceil(l/o.dataPointIntervalMillis)*o.dataPointIntervalMillis),d+=" to ",d+=i(s),d+="</div>",d+="<div>",d+=a("gtMillis")(r),d+=" transactions per minute",d+="</div>",d+="</div>"}}};n.init(o,$("#chart"),e),n.plot([[]],r,o,$("#chart"),e),n.initResize(o.plot,e),n.startAutoRefresh(e,6e4)}}]),glowroot.controller("TracesCtrl",["$scope","$location","$http","$q","locationChanges","charts","httpErrors","traceModal","queryStrings","traceKind",function(e,t,a,n,i,o,r,l,s,d){function c(t){if((e.agentRollupId||!e.layout.central)&&e.transactionType){var n=f.from,i=f.to,o=f.limit,l=angular.copy(f);l.agentRollupId=e.agentRollupId,e.transactionName&&(l.transactionName=e.transactionName),t&&(l.autoRefresh=!0);var c=!e.suppressChartSpinner;c&&e.showChartSpinner++,e.suppressChartSpinner=!1,a.get("backend/"+d+"/points"+s.encodeObject(l)).then(function(t){function a(e,t){var a;for(a=0;a<e.length;a++){var n=e[a];if(n[3]===v)return h.highlight(t,n.slice(0,2)),!0}return!1}var l=t.data;if(r.clear(),c&&e.showChartSpinner--,!e.showChartSpinner){var s=l.normalPoints.length+l.errorPoints.length+l.partialPoints.length;e.chartNoData=0===s,e.showExpiredMessage=l.expired,e.chartLimitExceeded=l.limitExceeded,e.chartLimit=o,h.getAxes().xaxis.options.min=n,h.getAxes().xaxis.options.max=i,h.setData([l.normalPoints,l.errorPoints,l.partialPoints]),v&&h.unhighlight(),h.setupGrid(),h.draw(),v&&(a(l.normalPoints,h.getData()[0])||a(l.errorPoints,h.getData()[1])||a(l.partialPoints,h.getData()[2])),g()}},function(t){c&&e.showChartSpinner--,r.handle(t,e)})}}function g(){var t=h.getData(),a=t[0].data.length+t[1].data.length+t[2].data.length;e.$parent&&(e.chartLimitExceeded?e.$parent.$broadcast("updateTraceTabCount",void 0):e.$parent.$broadcast("updateTraceTabCount",a))}function p(e,t){f.from=e,f.to=t}function u(){var t,a,n=h.getAxes().xaxis.options.min,i=h.getAxes().xaxis.options.max,o=[],r=!0;for(t=0;t<h.getData().length;t++){o.push([]);var l=h.getData()[t].data;for(a=0;a<l.length;a++){var s=l[a];s[0]>=n&&s[0]<=i&&(o[t].push(s),r=!1)}}return e.chartNoData=r,o}function m(){var a=e.buildQueryObject({},!0);f.headline&&(a["headline-comparator"]=f.headlineComparator,a.headline=f.headline),f.errorMessage&&(a["error-message-comparator"]=f.errorMessageComparator,a["error-message"]=f.errorMessage),f.user&&(a["user-comparator"]=f.userComparator,a.user=f.user),f.attributeName&&(a["custom-attribute-name"]=f.attributeName),f.attributeValue&&(a["custom-attribute-value-comparator"]=f.attributeValueComparator,a["custom-attribute-value"]=f.attributeValue),Number(f.limit)!==y&&(a.limit=f.limit),a["modal-agent-rollup-id"]=t.search()["modal-agent-rollup-id"],a["modal-agent-id"]=t.search()["modal-agent-id"],a["modal-trace-id"]=t.search()["modal-trace-id"],a["modal-check-live-traces"]=t.search()["modal-check-live-traces"],t.search(a)}if(e.$parent.activeTabItem="traces",!e.hideMainContent()){var h,f,v,b=$("#chart"),y=500;e.showChartSpinner=0,e.showErrorMessageFilter="error"===d,e.filterLimitOptions=[{text:"100",value:100},{text:"200",value:200},{text:"500",value:500},{text:"1,000",value:1e3},{text:"2,000",value:2e3},{text:"5,000",value:5e3}],e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(t,a){f.from=e.range.chartFrom,f.to=e.range.chartTo,m(),e.suppressChartRefresh?e.suppressChartRefresh=!1:c(t[3]!==a[3])}),e.refresh=function(){e.applyLast(),angular.extend(f,e.filter),e.range.chartRefresh++},e.clearCriteria=function(){e.filter.headlineComparator="begins",e.filter.headline="",e.filter.errorMessageComparator="begins",e.filter.errorMessage="",e.filter.userComparator="begins",e.filter.user="",e.filter.attributeName="",e.filter.attributeValueComparator="begins",e.filter.attributeValue="",e.filter.limit=y,e.refresh()},b.bind("plotzoom",function(t,a,n){var i=n.amount&&n.amount<1;e.$apply(function(){var t=a.getAxes().xaxis.options.min,n=a.getAxes().xaxis.options.max;if(o.updateRange(e,t,n,i,!1,!1,!0),i?p(e.range.chartFrom,e.range.chartTo):(f.from=e.range.chartFrom,f.to=e.range.chartTo),i||e.chartLimitExceeded||e.range.chartTo>=Date.now())a.getAxes().xaxis.options.min=e.range.chartFrom,a.getAxes().xaxis.options.max=e.range.chartTo,a.setupGrid(),a.draw(),m();else{e.suppressChartRefresh=!0,a.getAxes().xaxis.options.min=e.range.chartFrom,a.getAxes().xaxis.options.max=e.range.chartTo;var r=u();a.setData(r),a.setupGrid(),a.draw(),g(),m()}})}),b.bind("plotselected",function(t,a){e.$apply(function(){h.clearSelection();var t={from:a.xaxis.from,to:a.xaxis.to};o.updateRange(e,t.from,t.to,!1,!0,!0,!0),p(t.from,t.to),e.chartLimitExceeded?m():(e.suppressChartRefresh=!0,h.getAxes().xaxis.options.min=t.from,h.getAxes().xaxis.options.max=t.to,h.getAxes().yaxis.options.min=a.yaxis.from,h.getAxes().yaxis.options.realMax=a.yaxis.to,h.setData(u()),h.setupGrid(),h.draw(),g(),m())})}),e.zoomOut=function(){var t=e.range.chartFrom,a=e.range.chartTo,n=a-t,i={from:t-n/2,to:a+n/2};o.updateRange(e,i.from,i.to,!0,!1,!1,!0),p(e.range.chartFrom,e.range.chartTo)},b.bind("plotclick",function(a,n,i,o){if(i){h.unhighlight(),h.highlight(i.series,i.datapoint);var r=h.getData()[i.seriesIndex].data[i.dataIndex][2],l=h.getData()[i.seriesIndex].data[i.dataIndex][3],s=2===i.seriesIndex;if(o.ctrlKey){var d=t.url();-1===d.indexOf("?")?d+="?":d+="&",r&&(e.agentRollupId!==r&&(d+="modal-agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&"),d+="modal-agent-id="+encodeURIComponent(r)+"&"),d+="modal-trace-id="+l,s&&(d+="&modal-check-live-traces=true"),window.open(d)}else e.$apply(function(){r&&(e.agentRollupId!==r&&t.search("modal-agent-rollup-id",e.agentRollupId),t.search("modal-agent-id",r)),t.search("modal-trace-id",l),s&&t.search("modal-check-live-traces","true")});v=2===i.seriesIndex?l:null}}),e.filterTextComparatorOptions=[{display:"Begins with",value:"begins"},{display:"Equals",value:"equals"},{display:"Ends with",value:"ends"},{display:"Contains",value:"contains"},{display:"Does not contain",value:"not-contains"}],i.on(e,function(){e.traceAttributeNames=e.layout.agentRollups[e.agentRollupId].traceAttributeNames[e.transactionType];var a=f;(f={}).transactionType=e.transactionType,f.from=e.range.chartFrom,f.to=e.range.chartTo,f.headlineComparator=t.search()["headline-comparator"]||"begins",f.headline=t.search().headline||"",f.errorMessageComparator=t.search()["error-message-comparator"]||"begins",f.errorMessage=t.search()["error-message"]||"",f.userComparator=t.search()["user-comparator"]||"begins",f.user=t.search().user||"",f.attributeName=t.search()["custom-attribute-name"]||"",f.attributeValueComparator=t.search()["custom-attribute-value-comparator"]||"begins",f.attributeValue=t.search()["custom-attribute-value"]||"",f.limit=Number(t.search().limit)||y,void 0===a||angular.equals(f,a)||e.range.chartRefresh++,e.filter=angular.copy(f),delete e.filter.from,delete e.filter.to;var n=t.search()["modal-agent-rollup-id"]||t.search()["modal-agent-id"]||"",i=t.search()["modal-agent-id"]||"",o=t.search()["modal-trace-id"],r=t.search()["modal-check-live-traces"];o?(v=o,$("#traceModal").data("location-query",["modal-agent-rollup-id","modal-agent-id","modal-trace-id","modal-check-live-traces"]),l.displayModal(n,i,o,r)):$("#traceModal").modal("hide")}),function(){var e={legend:{show:!1},series:{points:{show:!0}},grid:{hoverable:!0,clickable:!0,minBorderMargin:0,borderColor:"#7d7358",borderWidth:1},xaxis:{mode:"time",timezone:"browser",twelveHourClock:!0,ticks:5,borderGridLock:1e3,min:f.from,max:f.to,reserveSpace:!1},yaxis:{ticks:10,zoomRange:!1,borderGridLock:1,min:0,max:10,label:"milliseconds",labelPadding:7,tickFormatter:function(e){return e.toLocaleString(void 0)}},zoom:{interactive:!0,ctrlKey:!0,amount:2,skipDraw:!0},colors:[$("#offscreenNormalColor").css("border-top-color"),$("#offscreenErrorColor").css("border-top-color"),$("#offscreenActiveColor").css("border-top-color")],selection:{mode:"x"}};h=$.plot(b,[[]],e)}(),h.getAxes().yaxis.options.max=void 0,o.initResize(h,e),o.startAutoRefresh(e,6e4)}}]),glowroot.controller("TransactionQueriesCtrl",["$scope","$http","$location","$timeout","locationChanges","modals","queryStrings","httpErrors",function(e,t,a,n,i,o,r,l){function s(a,i,l){function s(){u.removeAttr("style"),m.removeAttr("style"),h.removeAttr("style")}function d(e){var t=Math.max(p.width()+80,500),a=p.height()+141;e&&(a=200);var n=t>$(window).width()-50;n&&(a+=17);var i=a>$(window).height()-50;if(t<u.width()){u.css("width",t+"px"),u.css("left","50%"),u.css("margin-left",-t/2+"px"),m.css("right","auto"),m.css("left","50%");var o=t/2-46;i||(o+=17),m.css("margin-left",o+"px"),h.css("right","auto"),h.css("left","50%"),h.css("margin-left",o-3+"px")}i||(u.css("overflow-y","auto"),u.css("height",a+"px"),u.css("top","50%"),u.css("margin-top",-a/2+"px"),u.css("border-top-right-radius","6px"),u.css("border-bottom-right-radius","6px"),m.css("top","50%"),m.css("margin-top",-a/2+10+"px"),h.css("top","50%"),h.css("margin-top",-a/2+34+"px")),n&&(u.css("border-bottom-left-radius",0),u.css("border-bottom-right-radius",0))}function c(t){if(n.cancel(f)&&o.display("#queryModal"),s(),e.unformattedQuery=t,e.formattedQuery="",e.showFormatted=!1,e.queryExpired=!1,g.text(e.unformattedQuery),g.show(),p.hide(),gtClipboard(h,function(){return e.showFormatted?p[0]:g[0]},function(){return e.showFormatted?e.formattedQuery:e.unformattedQuery}),"SQL"===a){var i="";if(0===t.lastIndexOf("/*",0)){var r=t.indexOf("*/")+2;i=t.substring(0,r)+"\n",t=t.substring(r).trim()}var l=SqlPrettyPrinter.format(t);if("object"!=typeof l){if(i.length){for(var c="",u=0;u<l.length&&" "===l[u];u++)c+=" ";e.formattedQuery=c+i+l}else e.formattedQuery=l;e.showFormatted=!0,p.html(e.formattedQuery),g.hide(),p.show(),d()}else window.console&&(console.log(l.message),console.log(t))}}var g=$("#unformattedQuery"),p=$("#formattedQuery");g.text(""),p.html(""),e.unformattedQuery="",e.formattedQuery="",e.showFormatted=!1,e.queryExpired=!1,e.queryError=!1;var u=$("#queryModal .modal-dialog"),m=$("#queryModal button.close"),h=$("#queryModal .fa-clipboard"),f=n(function(){s(),o.display("#queryModal"),d(!0)},200);if(l){var v={agentRollupId:e.agentRollupId,fullTextSha1:l};e.showModalSpinner++,t.get("backend/transaction/full-query-text"+r.encodeObject(v)).then(function(t){e.showModalSpinner--,t.data.expired?e.queryExpired=!0:c(t.data.fullText)},function(){e.showModalSpinner--,e.queryError=!0})}else c(i)}function d(){var a={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.range.chartFrom,to:e.range.chartTo};e.showSpinner++,t.get("backend/transaction/queries"+r.encodeObject(a)).then(function(t){e.showSpinner--;var a=t.data;if(a.overwritten)return e.showOverwrittenMessage=!0,e.showQueries=!1,void(e.queries=[]);e.showQueries=a.length,e.queries=a;var n={};angular.forEach(e.queries,function(e){e.timePerExecution=e.totalDurationNanos/(1e6*e.executionCount),void 0!==e.totalRows&&(e.rowsPerExecution=e.totalRows/e.executionCount),void 0===n[e.queryType]&&(n[e.queryType]=0),n[e.queryType]+=e.totalDurationNanos}),e.queryTypes=Object.keys(n),e.queryTypes.sort(function(e,t){return n[t]-n[e]}),e.queryType&&-1===e.queryTypes.indexOf(e.queryType)&&e.queryTypes.push(e.queryType)},function(t){e.showSpinner--,l.handle(t,e)})}e.$parent.activeTabItem="queries",e.hideMainContent()||(e.showQueries=!1,e.showSpinner=0,e.showModalSpinner=0,e.$watchGroup(["range.chartFrom","range.chartTo","range.chartRefresh"],function(){d()}),e.$watch("queryType",function(){e.queryType?a.search("query-type",e.queryType):a.search("query-type",null)}),e.smallScreen=function(){return window.innerWidth<992},e.sortQueryString=function(t){var a=e.buildQueryObject({});return("total-time"!==t||"total-time"===e.sortAttribute&&!e.sortAsc)&&(a["sort-attribute"]=t),e.sortAttribute!==t||e.sortAsc||(a["sort-direction"]="asc"),e.queryType&&(a["query-type"]=e.queryType),r.encodeObject(a)},e.sortIconClass=function(t){return e.sortAttribute!==t?"":e.sortAsc?"caret gt-caret-sort-ascending":"caret"},i.on(e,function(){e.sortAttribute=a.search()["sort-attribute"]||"total-time",e.sortAsc="asc"===a.search()["sort-direction"],"total-time"===e.sortAttribute?e.sortAttr="-totalDurationNanos":"execution-count"===e.sortAttribute?e.sortAttr="-executionCount":"time-per-execution"===e.sortAttribute?e.sortAttr="-timePerExecution":"rows-per-execution"===e.sortAttribute&&(e.sortAttr="-rowsPerExecution"),e.queryType=a.search()["query-type"];var t=a.search()["modal-query-type"],n=a.search()["modal-query-text"],i=a.search()["modal-query-text-sha1"];n||i?($("#queryModal").data("location-query",["modal-query-type","modal-query-text","modal-query-text-sha1"]),s(t,n,i)):$("#queryModal").modal("hide")}),e.showQueryModal=function(e){a.search("modal-query-type",e.queryType),e.fullQueryTextSha1?a.search("modal-query-text-sha1",e.fullQueryTextSha1):a.search("modal-query-text",e.truncatedQueryText)},e.toggleFormatted=function(){e.showFormatted=!e.showFormatted;var t=$("#formattedQuery"),a=$("#unformattedQuery");e.showFormatted?(a.hide(),t.show()):(a.show(),t.hide())})}]),glowroot.controller("TransactionServicesCtrl",["$scope","$http","$location","locationChanges","modals","queryStrings","httpErrors",function(e,t,a,n,i,o,r){function l(){var a={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.range.chartFrom,to:e.range.chartTo};e.showSpinner++,t.get("backend/transaction/service-calls"+o.encodeObject(a)).then(function(t){e.showSpinner--;var a=t.data;if(a.overwritten)return e.showOverwrittenMessage=!0,e.showServiceCalls=!1,void(e.serviceCalls=[]);e.showServiceCalls=a.length,e.serviceCalls=a;var n={};angular.forEach(e.serviceCalls,function(e){e.timePerExecution=e.totalDurationNanos/(1e6*e.executionCount),void 0===n[e.type]&&(n[e.type]=0),n[e.type]+=e.totalDurationNanos}),e.types=Object.keys(n),e.types.sort(function(e,t){return n[t]-n[e]}),e.type&&-1===e.types.indexOf(e.type)&&e.types.push(e.type)},function(t){e.showSpinner--,r.handle(t,e)})}e.$parent.activeTabItem="services",e.hideMainContent()||(e.showServiceCalls=!1,e.showSpinner=0,e.$watchGroup(["range.chartFrom","range.chartTo","range.chartRefresh"],function(){l()}),e.$watch("type",function(){e.type?a.search("type",e.type):a.search("type",null)}),e.sortQueryString=function(t){var a=e.buildQueryObject({});return("total-time"!==t||"total-time"===e.sortAttribute&&!e.sortAsc)&&(a["sort-attribute"]=t),e.sortAttribute!==t||e.sortAsc||(a["sort-direction"]="asc"),e.type&&(a.type=e.type),o.encodeObject(a)},e.sortIconClass=function(t){return e.sortAttribute!==t?"":e.sortAsc?"caret gt-caret-sort-ascending":"caret"},n.on(e,function(){e.sortAttribute=a.search()["sort-attribute"]||"total-time",e.sortAsc="asc"===a.search()["sort-direction"],"total-time"===e.sortAttribute?e.sortAttr="-totalDurationNanos":"execution-count"===e.sortAttribute?e.sortAttr="-executionCount":"time-per-execution"===e.sortAttribute&&(e.sortAttr="-timePerExecution"),e.type=a.search().type}))}]),glowroot.controller("TransactionProfileCtrl",["$scope","$http","$location","locationChanges","queryStrings","httpErrors",function(e,t,a,n,i,o){function r(){delete e.parsingError;var a=gtParseIncludesExcludes(e.filter);if(a.error)return e.parsingError=a.error,e.showProfile=!0,e.sampleCount=0,$("#profileOuter").removeData("gtLoaded"),void HandlebarsRendering.profileToggle(void 0,"#profileOuter",{stackTraceElement:"",sampleCount:0});var n={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.range.chartFrom,to:e.range.chartTo,auxiliary:e.auxiliary,include:a.includes,exclude:a.excludes,truncateBranchPercentage:e.truncateBranchPercentage};e.showSpinner++,t.get("backend/transaction/profile"+i.encodeObject(n)).then(function(t){e.showSpinner--;var a=t.data;e.showOverwrittenMessage=a.overwritten,e.hasUnfilteredMainThreadProfile=a.hasUnfilteredMainThreadProfile,e.hasUnfilteredAuxThreadProfile=a.hasUnfilteredAuxThreadProfile,e.showOverwrittenMessage?e.showProfile=!1:(e.showProfile=a.profile.unfilteredSampleCount,e.showProfile&&(e.sampleCount=a.profile.unfilteredSampleCount,$("#profileOuter").removeData("gtLoaded"),HandlebarsRendering.profileToggle(void 0,"#profileOuter",a.profile)))},function(t){e.showSpinner--,o.handle(t,e)})}if(e.$parent.activeTabItem="profile",!e.hideMainContent()){var l;e.showProfile=!1,e.showSpinner=0,e.$watchGroup(["range.chartFrom","range.chartTo","range.chartRefresh","auxiliary"],function(){a.search("filter",e.filter||null),a.search("auxiliary",e.auxiliary?"true":null),r()}),e.tabQueryString=function(t){var a=e.buildQueryObject({});return t&&(a.auxiliary=!0),i.encodeObject(a)},e.clickTopRadioButton=function(t){e.auxiliary&&t||!e.auxiliary&&!t?e.range.chartRefresh++:e.auxiliary=t},e.clickActiveTopLink=function(t,a){return!!t.ctrlKey||(!(e.auxiliary&&a||!e.auxiliary&&!a)||(e.range.chartRefresh++,t.preventDefault(),!1))},e.flameGraphHref=function(){var t=e.buildQueryObject();return delete t["summary-sort-order"],e.filter&&(t.filter=e.filter),(e.auxiliary||!e.hasUnfilteredMainThreadProfile&&e.hasUnfilteredAuxThreadProfile)&&(t.auxiliary=!0),"transaction/thread-flame-graph"+i.encodeObject(t)},e.refresh=function(){e.applyLast(),l=e.filter,e.range.chartRefresh++},n.on(e,function(){var t=l;l=a.search().filter||"",void 0!==t&&l!==t&&e.range.chartRefresh++,e.filter=l,e.truncateBranchPercentage=a.search()["truncate-branch-percentage"]||.1,e.auxiliary=a.search().auxiliary||!1}),$(".gt-profile-text-filter").on("gtClearProfileFilter",function(t,a){e.$apply(function(){e.filter="",e.refresh()}),a.handled=!0})}}]),glowroot.controller("TransactionFlameGraphCtrl",["$scope","$location","$http","httpErrors","queryStrings",function(e,t,a,n,i){if(document.title="Transactions · Glowroot",e.$parent.activeNavbarItem="transaction",e.transactionType=t.search()["transaction-type"],e.transactionName=t.search()["transaction-name"],e.from=Number(t.search().from),e.to=Number(t.search().to),e.last=Number(t.search().last),e.auxiliary=t.search().auxiliary||!1,e.filter=t.search().filter,e.truncateBranchPercentage=t.search()["truncate-branch-percentage"]||1,e.last||!isNaN(e.from)&&!isNaN(e.to)||(e.last=144e5),e.last){var o=moment().startOf("second").valueOf();e.from=o-e.last,e.to=o+e.last/10}var r=gtParseIncludesExcludes(e.filter);if(r.error)e.parsingError=r.error,e.loaded=!0;else{var l={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.from,to:e.to,auxiliary:e.auxiliary,include:r.includes,exclude:r.excludes,truncateBranchPercentage:e.truncateBranchPercentage};a.get("backend/transaction/flame-graph"+i.encodeObject(l)).then(function(t){e.loaded=!0;var a=t.data;if(0===a.rootNodes.length)e.chartNoData=!0;else{var n,i=a.height;1===a.rootNodes.length?n=a.rootNodes[0]:(n={name:"<multiple root nodes>",value:a.totalSampleCount,children:a.rootNodes},i++);var o=d3.flameGraph().height(18*i).width(960);d3.select("#chart").datum(n).call(o)}},function(t){n.handle(t,e)})}}]),glowroot.controller("ErrorMessagesCtrl",["$scope","$http","$location","locationChanges","charts","queryStrings","httpErrors",function(e,t,a,n,i,o,r){function l(a,n){if((!e.layout.central||e.agentRollupId)&&e.transactionType){delete e.parsingError;var l=gtParseIncludesExcludes(e.filter);if(l.error)e.parsingError=l.error;else{var s={agentRollupId:e.agentRollupId,transactionType:e.transactionType,transactionName:e.transactionName,from:e.range.chartFrom,to:e.range.chartTo,include:l.includes,exclude:l.excludes,errorMessageLimit:g};a&&(s.autoRefresh=!0);var p=!e.suppressChartSpinner;p&&e.showChartSpinner++,e.suppressChartSpinner=!1,t.get("backend/error/messages"+o.encodeObject(s)).then(function(t){if(r.clear(),p&&e.showChartSpinner--,!e.showChartSpinner){var a=t.data;e.chartNoData=!a.dataSeries.data.length,d.plot.getAxes().xaxis.options.min=s.from,d.plot.getAxes().xaxis.options.max=s.to,d.dataPointIntervalMillis=i.getDataPointIntervalMillis(s.from,s.to),a.dataSeries.data.length?d.plot.setData([{data:a.dataSeries.data}]):d.plot.setData([[]]),d.plot.setupGrid(),d.plot.draw(),c=a.dataSeriesExtra,e.moreErrorMessagesAvailable=a.moreErrorMessagesAvailable,e.errorMessages=a.errorMessages,n&&n.resolve()}},function(t){p&&e.showChartSpinner--,r.handle(t,e,n)})}}}if(e.$parent.activeTabItem="messages",!e.hideMainContent()){var s,d=i.createState();e.showChartSpinner=0;var c,g=25;e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(t,n){a.search("filter",e.filter||null),l(t[3]!==n[3])}),e.tracesQueryString=function(t){var a=e.buildQueryObject();return t.message.length<=1e3?(a.errorMessageComparator="equals",a.errorMessage=t.message):(a.errorMessageComparator="begins",a.errorMessage=t.message.substring(0,1e3)),o.encodeObject(a)},e.showMoreErrorMessages=function(e){g*=2,l(!1,e)},e.refresh=function(){e.applyLast(),s=e.filter,e.range.chartRefresh++},n.on(e,function(){var t=s;s=a.search().filter||"",void 0!==t&&s!==t&&e.range.chartRefresh++,e.filter=s});var p={yaxis:{max:100,label:"error rate (%)"},tooltip:!0,tooltipOpts:{content:function(e,t,a){function n(e){return e%6e4==0?moment(e).format("LT"):moment(e).format("LTS")}if(0===a&&!c[t])return"No errors";var i=t-d.dataPointIntervalMillis,o=t;return'<div class="gt-chart-tooltip"><div style="font-weight: 600;">'+n(i=Math.ceil(i/d.dataPointIntervalMillis)*d.dataPointIntervalMillis)+" to "+n(o)+"</div><div>Error rate: "+a.toFixed(1)+" %</div><div>Error count: "+c[t][0]+"</div><div>Transaction count: "+c[t][1]+"</div></div>"}}};i.init(d,$("#chart"),e),i.plot([[]],p,d,$("#chart"),e),i.initResize(d.plot,e),i.startAutoRefresh(e,6e4)}}]),glowroot.controller("JvmCtrl",["$scope","$location","queryStrings",function(e,t,a){function n(t,n){var i=e.agentRollupQuery(n);return t+a.encodeObject(i)}document.title="JVM · Glowroot",e.$parent.activeNavbarItem="jvm",e.hideAgentRollupDropdown=function(){return!e.layout||(!e.layout.central||1===e.layout.agentRollups.length)},e.hideMainContent=function(){return e.layout.central&&!e.agentRollupId&&!e.agentId},e.currentUrl=function(){return t.path().substring(1)},e.agentRollupUrl=function(e){var a=t.path().substring(1);return"jvm/gauges"===a&&!e.permissions.jvm.gauges||"jvm/thread-dump"===a&&!e.permissions.jvm.threadDump||"jvm/heap-dump"===a&&!e.permissions.jvm.heapDump||"jvm/heap-histogram"===a&&!e.permissions.jvm.heapHistogram||"jvm/gc"===a&&!e.permissions.jvm.gc||"jvm/mbean-tree"===a&&!e.permissions.jvm.mbeanTree||"jvm/system-properties"===a&&!e.permissions.jvm.systemProperties||"jvm/environment"===a&&!e.permissions.jvm.environment||"jvm/capabilities"===a&&!e.permissions.jvm.capabilities?n("jvm/gauges",e):n(a,e)},e.$on("$stateChangeSuccess",function(){if(document.activeElement){var e=document.activeElement.getAttribute("gt-url");e&&e!==t.path().substring(1)&&document.activeElement.blur()}})}]),glowroot.controller("JvmGaugeValuesCtrl",["$scope","$location","$filter","$http","locationChanges","charts","keyedColorPools","queryStrings","httpErrors",function(e,t,a,n,i,o,r,l,s){function d(t){o.refreshData("backend/jvm/gauges",T,e,t,g,p)}function c(a){t.search(e.buildQueryObject()),e.gaugeNames.length?d(a):(d(a),e.chartNoData=!0)}function g(t){t.gaugeName=e.gaugeNames}function p(e){var t,a="";for(t=0;t<e.dataSeries.length;t++){e.dataSeries[t].shortLabel=I[e.dataSeries[t].name];var n=N[e.dataSeries[t].name];0===t?a=n:n!==a&&(a="")}""!==a&&(a=a.substring(1));var i=!1;"bytes"===a&&(a="MB",i=!0),T.plot.getAxes().yaxis.options.label=a,m(e.dataSeries,""===a&&1!==e.dataSeries.length,i)}function u(e){if(0===e)return 1;for(var t=1e-15;e*t*10<=100;)t*=10;return t=parseFloat(t.toPrecision(1))}function m(e,t,a){S={},C={},M={};var n,i,o,r,l={};for(n=0;n<e.length;n++)f((i=e[n]).name,i.data),i.data.length?(h(i),o=t?v(i.data):a?1/1048576:1,l[r=R[i.name]]?"ANY"!==o&&(l[r]=Math.min(l[r],o)):"ANY"!==o&&(l[r]=o)):M[i.name]=!0;for(n=0;n<e.length;n++)(i=e[n]).data.length&&(void 0===(o=l[r=R[i.name]])&&(o=1),S[i.name]=a?1:o,b(i.data,o));y(e)}function h(e){var t,a;for(t=0;t<e.data.length;t++)(a=e.data[t])&&a[1]<0&&(a[1]=0)}function f(e,t){var a,n,i={};for(a=0;a<t.length;a++)(n=t[a])&&(i[n[0]]=n[1]);C[e]=i}function v(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];if(n){var i=n[1];i>t&&(t=i)}}return 0===t?"ANY":u(t)}function b(e,t){if(1!==t)for(var a=0;a<e.length;a++){var n=e[a];n&&(n[1]*=t)}}function y(t){for(var a=!0,n=0;n<t.length;n++){var i=t[n].data;a&&(a=0===i.length)}e.chartNoData=a}function w(e){var t=[];angular.forEach(e,function(e){t.push(e.displayPath)});var a,n,i;for(n=0;n<e.length;n++){var o=t[n],r=e[n].name,l=r.lastIndexOf(" / ");for(a=r.substring(l+1).split(" / ").length+1,i=0;i<e.length;i++)if(i!==n){var s=t[i];a=Math.max(a,x(o,s)+1)}e[n].shortDisplay=o.slice(-a).join(" / ")}}function x(e,t){for(var a=0,n=e.length,i=t.length;a<Math.min(n,i)&&e[n-1-a]===t[i-1-a];)a++;return a}if(e.$parent.heading="Gauges",e.hideMainContent())return e.range={},void(e.buildQueryObject=function(){return{}});e.page={};var k=["java.lang:type=Memory:HeapMemoryUsage.used"],T=o.createState(),C={},S={},M={},E=[],I={},N={},R={};e.page.gaugeFilter="",e.useGaugeViewThresholdMultiplier=!0,e.range={},e.currentTabUrl=function(){return"jvm/gauges"},e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(e,t){e!==t&&c(e[3]!==t[3])}),e.$watchCollection("gaugeNames",function(e,t){(e!==t||e.length)&&c(!1)}),e.$watch("seriesLabels",function(e,t){if(e!==t){var a;for(a=0;a<e.length;a++){var n=I[e[a].text];n&&(e[a].text=n)}}}),e.smallScreen=function(){return window.innerWidth<768},e.buildQueryObject=function(a){var n=a||angular.copy(t.search());return delete n.from,delete n.to,delete n.last,e.range.last?144e5!==e.range.last&&(n.last=e.range.last):(n.from=e.range.chartFrom,n.to=e.range.chartTo),angular.equals(e.gaugeNames,k)?delete n["gauge-name"]:n["gauge-name"]=e.gaugeNames,n},e.applyLast=function(){if(e.range.last){var t=moment().startOf("second").valueOf(),a=t-e.range.last,n=t+e.range.last/10,i=o.getDataPointIntervalMillis(a,n,!0),r=Math.floor(a/i)*i,l=Math.ceil(n/i)*i,s=o.getDataPointIntervalMillis(r,l,!0);s!==i&&(r=Math.floor(a/s)*s,l=Math.ceil(n/s)*s),e.range.chartFrom=r,e.range.chartTo=l}};var A;i.on(e,function(){var a=A;(A={}).last=Number(t.search().last),A.chartFrom=Number(t.search().from),A.chartTo=Number(t.search().to),A.chartFrom&&A.chartTo?A.last=0:A.last||(A.last=144e5),A.gaugeNames=t.search()["gauge-name"],A.gaugeNames||(A.gaugeNames=[],angular.forEach(k,function(e){-1!==E.indexOf(e)&&A.gaugeNames.push(e)})),angular.isArray(A.gaugeNames)||(A.gaugeNames=[A.gaugeNames]),angular.equals(A,a)||(e.gaugeNames=angular.copy(A.gaugeNames),e.range.last=A.last,e.range.chartFrom=A.chartFrom,e.range.chartTo=A.chartTo,e.applyLast())}),e.hideMainContent()||n.get("backend/jvm/all-gauges?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(t){e.loaded=!0,e.allGauges=t.data,w(t.data),E=[],I={},N={},R={},angular.forEach(t.data,function(e){E.push(e.name),I[e.name]=e.shortDisplay,e.unit?N[e.name]=" "+e.unit:N[e.name]="",e.grouping?R[e.name]=e.grouping:R[e.name]=e.name}),e.gaugeNames.length||angular.forEach(k,function(t){-1!==E.indexOf(t)&&e.gaugeNames.push(t)})},function(t){s.handle(t,e)}),e.gaugeNameStyle=function(t){return-1===e.gaugeNames.indexOf(t)?{"font-weight":"normal",cursor:"pointer"}:{"font-weight":"bold",cursor:"pointer"}},e.gaugeColorStyle=function(e){var t={width:"60px",height:"18px"},a=T.keyedColorPool.get(e);return a&&(t["background-color"]=a),t},e.hasGaugeScale=function(e){return S[e]||M[e]},e.gaugeScaleStyle=function(e){return S[e]?{}:{"font-style":"italic"}},e.getGaugeScale=function(e){var t=S[e];if(!t)return"no data";var a=(t=t.toString()).indexOf("e-");if(-1===a)return t;var n=t.substring(a+2)-1;t="0.";for(var i=0;i<n;i++)t+="0";return t+"1"},e.clickGaugeName=function(t){var a=e.gaugeNames.indexOf(t);if(-1===a){e.gaugeNames.push(t);var n={};angular.forEach(E,function(e,t){n[e]=t}),e.gaugeNames.sort(function(e,t){return n[e]-n[t]})}else e.gaugeNames.splice(a,1),delete S[t]},e.showingAllGauges=function(){return!e.allGauges||a("filter")(e.allGauges,{display:e.page.gaugeFilter}).length===e.allGauges.length},e.selectAllGauges=function(){var t=a("filter")(e.allGauges,{display:e.page.gaugeFilter});angular.forEach(t,function(t){-1===e.gaugeNames.indexOf(t.name)&&e.gaugeNames.push(t.name)})},e.deselectAllGauges=function(){var t=a("filter")(e.allGauges,{display:e.page.gaugeFilter});angular.forEach(t,function(t){var a=e.gaugeNames.indexOf(t.name);-1!==a&&e.gaugeNames.splice(a,1)})};var P={tooltip:!0,yaxis:{label:""},series:{stack:!1,lines:{fill:!1}},tooltipOpts:{content:function(t,n,i,r){var l=e.layout.rollupConfigs[0];if(o.getDataPointIntervalMillis(e.range.chartFrom,e.range.chartTo,!0)===l.intervalMillis&&e.range.chartTo-e.range.chartFrom<4*l.viewThresholdMillis){var s=C[t][n],d='<table class="gt-chart-tooltip">';return d+='<tr><td colspan="2" style="font-weight: 600;">'+I[t],d+='</td></tr><tr><td style="padding-right: 10px;">Time:</td><td style="font-weight: 400;">',d+=moment(n).format("h:mm:ss.SSS a (Z)")+"</td></tr>",d+='<tr><td style="padding-right: 10px;">Value:</td><td style="font-weight: 600;">',d+=a("gtGaugeValue")(s)+N[t]+"</td></tr>",d+="</table>"}var c=n-T.dataPointIntervalMillis;c=Math.ceil(c/T.dataPointIntervalMillis)*T.dataPointIntervalMillis;var g=n;return o.renderTooltipHtml(c,g,void 0,r.dataIndex,r.seriesIndex,T.plot,function(e,t){var i=C[t][n];return void 0===i?"no data":a("gtGaugeValue")(i)+N[t]}," (average value over this interval)",!0)}}};o.init(T,$("#chart"),e),o.plot([[]],P,T,$("#chart"),e),o.initResize(T.plot,e),o.startAutoRefresh(e,6e4)}]),glowroot.controller("JvmThreadDumpCtrl",["$scope","$http","$location","$q","locationChanges","traceModal","httpErrors",function(e,t,a,n,i,o,r){if(e.$parent.heading="Thread dump",!e.hideMainContent()){var l;Handlebars.registerHelper("ifBlocked",function(e,t){return"BLOCKED"===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("ifWaiting",function(e,t){return"WAITING"===e||"TIMED_WAITING"===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("agentIdQueryString",function(){return e.agentId?"agent-id="+encodeURIComponent(e.agentId)+"&":""}),e.exportAsText=function(){var e=window.open(),t=l.replace(/ <a [^>]*>view trace<\/a>/g,"");$(e.document.body).html('<pre style="white-space: pre-wrap;">'+t+"</pre>")},i.on(e,function(){var t=a.search()["modal-trace-id"],n=a.search()["modal-check-live-traces"];t?($("#traceModal").data("location-query",["modal-trace-id","modal-check-live-traces"]),o.displayModal(e.agentRollupId,e.agentId,t,n)):$("#traceModal").modal("hide")}),e.refresh=function(a){t.get("backend/jvm/thread-dump?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=t.data.agentNotConnected,e.agentNotConnected||(l=$.trim(JST["thread-dump"](t.data)),$("#threadDump").html("<br>"+l),a&&a.resolve("Refreshed"))},function(t){r.handle(t,e,a)})},e.refresh()}}]),glowroot.controller("JvmJstackCtrl",["$scope","$http","httpErrors",function(e,t,a){if(e.$parent.heading="Thread dump: jstack",!e.hideMainContent()){var n;e.exportAsText=function(){var e=window.open();$(e.document.body).html('<pre style="white-space: pre-wrap;">'+n+"</pre>")},e.refresh=function(i){t.get("backend/jvm/jstack?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0;var a=t.data;e.agentNotConnected=a.agentNotConnected,e.agentUnsupportedOperation=a.agentUnsupportedOperation,e.unavailableDueToRunningInJre=a.unavailableDueToRunningInJre,e.unavailableDueToRunningInIbmJvm=a.unavailableDueToRunningInIbmJvm,e.agentNotConnected||e.agentUnsupportedOperation||e.unavailableDueToRunningInJre||e.unavailableDueToRunningInIbmJvm||(n=a.jstack,$("#jstack").html("<br>"+n),i&&i.resolve("Refreshed"))},function(t){a.handle(t,e,i)})},e.refresh()}}]),glowroot.controller("JvmHeapDumpCtrl",["$scope","$http","httpErrors",function(e,t,a){e.$parent.heading="Heap dump",e.hideMainContent()||(e.page={},e.checkDiskSpace=function(n){var i={directory:e.page.directory};delete e.availableDiskSpaceBytes,e.heapDumpResponse=!1,t.post("backend/jvm/available-disk-space?agent-id="+encodeURIComponent(e.agentId),i).then(function(t){var a=t.data;a.error?n.reject(a.error):a.directoryDoesNotExist?n.reject("Directory does not exist"):(e.availableDiskSpaceBytes=a,n.resolve("See disk space below"))},function(t){a.handle(t,e,n)})},e.heapDump=function(n){var i={directory:e.page.directory};delete e.availableDiskSpaceBytes,e.heapDumpResponse=!1,t.post("backend/jvm/heap-dump?agent-id="+encodeURIComponent(e.agentId),i).then(function(t){var a=t.data;a.error?n.reject(a.error):a.directoryDoesNotExist?n.reject("Directory does not exist"):(n.resolve("Heap dump created"),e.heapDumpResponse=a)},function(t){a.handle(t,e,n)})},t.get("backend/jvm/heap-dump-default-dir?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=t.data.agentNotConnected,e.agentNotConnected||(e.page.directory=t.data.directory)},function(t){a.handle(t,e)}))}]),glowroot.controller("JvmGcCtrl",["$scope","$http","httpErrors",function(e,t,a){e.$parent.heading="GC",e.hideMainContent()||(e.gc=function(n){t.post("backend/jvm/gc?agent-id="+encodeURIComponent(e.agentId)).then(function(){n.resolve("Success")},function(t){a.handle(t,e,n)})},t.get("backend/jvm/gc-check-agent-connected?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=!t.data,e.agentNotConnected},function(t){a.handle(t,e)}))}]),glowroot.controller("JvmHeapHistogramCtrl",["$scope","$http","$location","locationChanges","queryStrings","httpErrors",function(e,t,a,n,i,o){function r(){e.sortAttribute===c&&e.sortAsc===g||("class-name"===e.sortAttribute?e.histogram.items.sort(function(t,a){var n=t.className.toLowerCase(),i=a.className.toLowerCase(),o=n<i?-1:n>i?1:0;return e.sortAsc?o:-o}):e.histogram.items.sort(function(t,a){var n=t[e.sortAttribute]-a[e.sortAttribute];return e.sortAsc?n:-n}),c=e.sortAttribute,g=e.sortAsc)}function l(){if(void 0===e.displayedItems&&(e.displayedItems=[]),e.displayedItems.length=0,e.limitApplied=!1,e.filteredTotalBytes=0,e.filteredTotalCount=0,""===e.page.filterValue)return e.displayedItems=e.histogram.items.slice(0,e.page.filterLimit),e.limitApplied=e.histogram.items.length>e.page.filterLimit,e.filteredTotalBytes=e.histogram.totalBytes,e.filteredTotalCount=e.histogram.totalCount,d=0,void angular.forEach(e.displayedItems,function(e){d=Math.max(d,e.bytes)});var t=e.histogram.items;d=0;for(var a=0;a<t.length;a++){var n=t[a];s(n.className)&&(e.displayedItems.length<e.page.filterLimit?(e.displayedItems.push(n),d=Math.max(d,n.bytes)):e.limitApplied=!0,e.filteredTotalBytes+=n.bytes,e.filteredTotalCount+=n.count)}}function s(t){return"begins"===e.page.filterComparator?0===t.toLowerCase().indexOf(e.page.filterValue.toLowerCase()):"ends"===e.page.filterComparator?-1!==t.toLowerCase().indexOf(e.page.filterValue.toLowerCase(),t.length-e.page.filterValue.length):-1!==t.toLowerCase().indexOf(e.page.filterValue.toLowerCase())}if(e.$parent.heading="Heap histogram",e.page={},!e.hideMainContent()){var d;e.classNameBarWidth=function(e){return e/d*100+"%"},e.$watch("page.filterComparator",function(e,t){t!==e&&("contains"===e?a.search("filter-comparator",null):a.search("filter-comparator",e))}),e.$watch("page.filterValue",function(e,t){t!==e&&(e?a.search("filter-value",e):a.search("filter-value",null))}),e.$watch("page.filterLimit",function(e,t){t!==e&&("200"===e?a.search("filter-limit",null):a.search("filter-limit",e))}),n.on(e,function(){e.page.filterComparator=a.search()["filter-comparator"]||"contains",e.page.filterValue=a.search()["filter-value"]||"",e.page.filterLimit=a.search()["filter-limit"]||"200",e.sortAttribute=a.search()["sort-attribute"]||"bytes","class-name"===e.sortAttribute?e.sortAsc="desc"!==a.search()["sort-direction"]:e.sortAsc="asc"===a.search()["sort-direction"],void 0!==e.histogram&&(r(),l())}),e.sortQueryString=function(t){var a={};return"contains"!==e.page.filterComparator&&(a["filter-comparator"]=e.page.filterComparator),e.page.filterValue&&(a["filter-value"]=e.page.filterValue),"200"!==e.page.filterLimit&&(a["filter-limit"]=e.page.filterLimit),("bytes"!==t||"bytes"===e.sortAttribute&&!e.sortAsc)&&(a["sort-attribute"]=t),e.sortAttribute===t&&("class-name"===t&&e.sortAsc?a["sort-direction"]="desc":"class-name"===t||e.sortAsc||(a["sort-direction"]="asc")),i.encodeObject(a)},e.sortIconClass=function(t){return e.sortAttribute!==t?"":e.sortAsc?"caret gt-caret-sort-ascending":"caret"};var c,g;e.refresh=function(a){t.post("backend/jvm/heap-histogram?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0;var n=t.data;e.agentNotConnected=n.agentNotConnected,e.agentUnsupportedOperation=n.agentUnsupportedOperation,e.unavailableDueToRunningInJre=n.unavailableDueToRunningInJre,e.unavailableDueToRunningInIbmJvm=n.unavailableDueToRunningInIbmJvm,e.agentNotConnected||e.agentUnsupportedOperation||e.unavailableDueToRunningInJre||e.unavailableDueToRunningInIbmJvm||(e.histogram=n,c="bytes",g=!1,r(),l(),a&&a.resolve("Complete"))},function(t){o.handle(t,e,a)})},e.exportAsCsv=function(){var t="<strong>Class name,Bytes,Count</strong><br>";angular.forEach(e.histogram.items,function(e){s(e.className)&&(t+=e.className+","+e.bytes+","+e.count+"<br>")});var a=window.open();$(a.document.body).html('<pre style="white-space: pre-wrap;">'+t+"</pre>")},e.smallScreen=function(){return window.innerWidth<768},e.filterComparatorOptions=[{display:"Contains",value:"contains"},{display:"Begins with",value:"begins"},{display:"Ends with",value:"ends"}],e.refresh()}}]),glowroot.controller("JvmMBeanTreeCtrl",["$scope","$location","$http","httpErrors","queryStrings",function(e,t,a,n,i){function o(){var a={};e.layout.central&&(a["agent-id"]=e.agentId),a.expanded=s,t.search(a).replace()}function r(e,t){var a,n="";for(a=t;a<Math.min(t+500,e.length);a++)n+=JST["mbean-node"](e[a]);$("#mbeanTree").append(n),t+100<e.length&&setTimeout(function(){r(e,t+500)},10)}function l(e){e.v?e.v++:e.v=1}if(e.$parent.heading="MBean tree",!e.hideMainContent()){Handlebars.registerPartial("mbeanNodeExpanded",JST["mbean-node-expanded"]),Handlebars.registerPartial("mbeanNodeUnexpanded",JST["mbean-node-unexpanded"]),Handlebars.registerHelper("mbeanNodeIndentPx",function(e){return 30*e.depth}),Handlebars.registerHelper("ifSimpleValue",function(e,t){return angular.isObject(e)||angular.isArray(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("ifNull",function(e,t){return null===e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("indentedJson",function(e){return JSON.stringify(e,null,4)});var s=t.search().expanded||[];angular.isArray(s)||(s=[s]);var d={};e.refresh=function(t){var o={agentId:e.agentId,expanded:s};a.get("backend/jvm/mbean-tree"+i.encodeObject(o)).then(function(a){function n(e,t){angular.forEach(e,function(e){e.depth=t,e.objectName&&(d[e.objectName]=e),i.push(e),e.childNodes&&n(e.childNodes,t+1)})}if(e.loaded=!0,e.agentNotConnected=a.data.agentNotConnected,!e.agentNotConnected){var i=[];n(a.data,0),$("#mbeanTree").empty(),r(i,0),t&&t.resolve("Refreshed")}},function(a){n.handle(a,e,t)})};var c,g;$(document).off("mousedown.mbeanTree"),$(document).on("mousedown.mbeanTree",".gt-mbean-expanded-content, .gt-mbean-unexpanded-content",function(e){c=e.pageX,g=e.pageY}),$("#mbeanTree").on("click",".gt-mbean-expanded-content",function(e,t){if(t||!(Math.abs(e.pageX-c)>5||Math.abs(e.pageY-g)>5)){var a=$(this).parent(),n=a.data("object-name"),i=s.indexOf(n);s.splice(i,1),o();var r=d[n];l(r),delete r.attributeMap,a.html(JST["mbean-node-unexpanded"](r))}}),$("#mbeanTree").on("click",".gt-mbean-unexpanded-content",function(t,r){if(r||!(Math.abs(t.pageX-c)>5||Math.abs(t.pageY-g)>5)){var p=$(this).parent(),u=p.data("object-name");s.push(u),o();var m=d[u];l(m);var h=m.v;p.html(JST["mbean-node-loading"](m));var f=p.find(".gt-spinner"),v=Glowroot.showSpinner(f),b={agentId:e.agentId,objectName:m.objectName};a.get("backend/jvm/mbean-attribute-map"+i.encodeObject(b)).then(function(e){v.stop(),m.v===h&&(m.attributeMap=e.data,p.html(JST["mbean-node-expanded"](m)))},function(t){v.stop(),n.handle(t,e)})}}),e.refresh()}}]),glowroot.controller("JvmSystemPropertiesCtrl",["$scope","$http","httpErrors",function(e,t,a){e.$parent.heading="System properties",e.hideMainContent()||(e.isArray=function(e){return angular.isArray(e)},t.get("backend/jvm/system-properties?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0;var a=t.data;e.agentNotConnected=a.agentNotConnected,e.agentUnsupportedOperation=a.agentUnsupportedOperation,e.agentNotConnected||e.agentUnsupportedOperation||(e.properties=a.properties)},function(t){a.handle(t,e)}))}]),glowroot.controller("JvmEnvironmentCtrl",["$scope","$http","httpErrors",function(e,t,a){e.$parent.heading="Environment",e.hideMainContent()||(e.argFirstPart=function(e){return e.length>1&&"-"===e[0]?e.substring(0,2):""},e.argSecondPart=function(e){return e.length>1&&"-"===e[0]?e.substring(2):e},t.get("backend/jvm/environment?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.data=t.data,e.uptime=Date.now()-t.data.process.startTime},function(t){a.handle(t,e)}))}]),glowroot.controller("JvmCapabilitiesCtrl",["$scope","$http","httpErrors",function(e,t,a){e.$parent.heading="Capabilities",e.hideMainContent()||t.get("backend/jvm/capabilities?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=t.data.agentNotConnected,e.agentNotConnected||(e.capabilities=t.data)},function(t){a.handle(t,e)})}]),glowroot.controller("SyntheticMonitorsCtrl",["$scope","$location","$filter","$http","locationChanges","charts","queryStrings","httpErrors",function(e,t,a,n,i,o,r,l){function s(t){o.refreshData("backend/synthetic-monitor/results",u,e,t,p,c)}function d(a){var n=e.buildQueryObject({});t.search(n),e.syntheticMonitorIds.length?s(a):(s(a),e.chartNoData=!0)}function c(t){e.transactionCounts=t.transactionCounts,m={};var a,n;for(a=0;a<t.dataSeries.length;a++)g((n=t.dataSeries[a]).name,n.data)}function g(e,t){var a,n,i={};for(a=0;a<t.length;a++)(n=t[a])&&(i[n[0]]=n[1]);m[e]=i}function p(t){t.syntheticMonitorId=e.syntheticMonitorIds}document.title="Synthetic · Glowroot",e.$parent.activeNavbarItem="syntheticMonitor";var u=o.createState(),m={};e.chartNoData=!0,e.currentTabUrl=function(){return"synthetic-monitors"},e.range={},e.agentRollupUrl=function(a){var n=e.agentRollupQuery(a);return delete n["synthetic-monitor-id"],t.path().substring(1)+r.encodeObject(n)},e.buildQueryObject=function(a){var n=a||angular.copy(t.search());if(e.layout.central){var i=e.layout.agentRollups[e.agentRollupId];i&&(i.agent?n["agent-id"]=e.agentRollupId:n["agent-rollup-id"]=e.agentRollupId)}return n["synthetic-monitor-id"]=e.syntheticMonitorIds,e.range.last?144e5!==e.range.last&&(n.last=e.range.last,delete n.from,delete n.to):(n.from=e.range.chartFrom,n.to=e.range.chartTo,delete n.last),n},e.hideMainContent=function(){return!e.agentRollupId&&!e.agentId},e.$watch("[range.chartFrom, range.chartTo, range.chartRefresh, range.chartAutoRefresh]",function(e,t){e!==t&&d(e[3]!==t[3])}),e.$watchCollection("syntheticMonitorIds",function(e,t){(e!==t||e.length)&&d(!1)}),e.applyLast=function(){if(e.range.last){var t=moment().startOf("second").valueOf(),a=t-e.range.last,n=t+e.range.last/10,i=o.getDataPointIntervalMillis(a,n,!0),r=Math.floor(a/i)*i,l=Math.ceil(n/i)*i,s=o.getDataPointIntervalMillis(r,l,!0);s!==i&&(r=Math.floor(a/s)*s,l=Math.ceil(n/s)*s),e.range.chartFrom=r,e.range.chartTo=l}};var h;i.on(e,function(){var a=h;(h={}).last=Number(t.search().last),h.chartFrom=Number(t.search().from),h.chartTo=Number(t.search().to),h.chartFrom&&h.chartTo?h.last=0:h.last||(h.last=144e5),h.syntheticMonitorIds=t.search()["synthetic-monitor-id"]||[],angular.isArray(h.syntheticMonitorIds)||(h.syntheticMonitorIds=[h.syntheticMonitorIds]),angular.equals(h,a)||(e.syntheticMonitorIds=angular.copy(h.syntheticMonitorIds),e.range.last=h.last,e.range.chartFrom=h.chartFrom,e.range.chartTo=h.chartTo,e.applyLast())}),e.hideMainContent()||n.get("backend/synthetic-monitor/all-monitors?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(t){e.loaded=!0,e.allSyntheticMonitors=t.data},function(t){l.handle(t,e)}),e.clickSyntheticMonitor=function(t){var a=e.syntheticMonitorIds.indexOf(t);if(-1===a){e.syntheticMonitorIds.push(t);var n={};angular.forEach(e.allSyntheticMonitors,function(e,t){n[e.id]=t}),e.syntheticMonitorIds.sort(function(e,t){return n[e]-n[t]})}else e.syntheticMonitorIds.splice(a,1)};var f={tooltip:!0,yaxis:{label:"milliseconds"},series:{stack:!1,lines:{fill:!1}},tooltipOpts:{content:function(t,n,i,r){var l=e.layout.rollupConfigs[0];if(o.getDataPointIntervalMillis(e.range.chartFrom,e.range.chartTo)===l.intervalMillis){var s='<table class="gt-chart-tooltip">';return s+='<tr><td colspan="2" style="font-weight: 600;">'+t,s+='</td></tr><tr><td style="padding-right: 10px;">Time:</td><td style="font-weight: 400;">',s+=moment(n).format("h:mm:ss.SSS a (Z)")+"</td></tr>",s+='<tr><td style="padding-right: 10px;">Value:</td><td style="font-weight: 600;">',s+=a("gtMillis")(i)+" milliseconds</td></tr>",s+="</table>"}var d=n-u.dataPointIntervalMillis;d=Math.ceil(d/u.dataPointIntervalMillis)*u.dataPointIntervalMillis;var c=n;return o.renderTooltipHtml(d,c,void 0,r.dataIndex,r.seriesIndex,u.plot,function(e,t){var i=m[t][n];return void 0===i?"no data":a("gtMillis")(i)+" milliseconds"}," (average value over this interval)",!0)}}};o.init(u,$("#chart"),e),o.plot([[]],f,u,$("#chart"),e),o.initResize(u.plot,e),o.startAutoRefresh(e,6e4)}]),glowroot.controller("IncidentsCtrl",["$scope","$http","$timeout","httpErrors",function(e,t,a,n){function i(){t.get("backend/incidents").then(function(t){e.loaded=!0,e.incidents=t.data},function(t){n.handle(t,e)})}function o(){e.$apply(function(){i()}),document.removeEventListener("visibilitychange",o)}function r(){l=a(function(){document.hidden?document.addEventListener("visibilitychange",o):i(),r()},3e4)}document.title="Incidents · Glowroot",e.$parent.activeNavbarItem="incident",i();var l;r(),e.$on("$destroy",function(){a.cancel(l)})}]),glowroot.controller("ReportCtrl",["$scope","$location",function(e,t){document.title="Reports · Glowroot",e.$parent.activeNavbarItem="report",e.currentUrl=function(){return t.path().substring(1)},e.$on("$stateChangeSuccess",function(){if(document.activeElement){var e=document.activeElement.getAttribute("gt-url");e&&e!==t.path().substring(1)&&document.activeElement.blur()}})}]),glowroot.controller("ReportAdhocCtrl",["$scope","$location","$http","$filter","$timeout","locationChanges","charts","keyedColorPools","queryStrings","httpErrors",function(e,t,a,n,i,o,r,l,s,d){function c(e){return e&&(0===e.lastIndexOf("transaction:",0)||0===e.lastIndexOf("error:",0))}function g(e,t){var a,n,i={};for(a=0;a<t.length;a++)(n=t[a])&&(i[n[0]]=n[1]);x[e]=i}function p(e){for(var t=0;t<e.length;t++){var a=e[t];a&&(a[1]/=1048576)}}function u(t){var n=angular.copy(b);n.fromDate=moment(b.fromDate).format("YYYYMMDD"),n.toDate=moment(b.toDate).format("YYYYMMDD"),e.layout.central||(n.agentRollupIds=[""]),e.showChartSpinner++;var o=e.showChart;o&&t.resolve(),a.get("backend/report"+s.encodeObject(n)).then(function(a){function r(){if("transaction:x-percentile"===n.metric||"transaction:average"===n.metric)y.getAxes().yaxis.options.label="milliseconds";else if("error:rate"===n.metric)y.getAxes().yaxis.options.label="percent";else if(0===n.metric.indexOf("gauge:")){var e=n.metric.substring("gauge:".length),t=f[e];""!==t&&(t=t.substring(1)),y.getAxes().yaxis.options.label="bytes"===t?"MB":t}else y.getAxes().yaxis.options.label="";y.getAxes().xaxis.options.timezone=n.timeZoneId,y.getAxes().xaxis.options.min=moment.tz(n.fromDate,n.timeZoneId),y.getAxes().xaxis.options.max=moment.tz(n.toDate,n.timeZoneId).add(1,"days"),y.setData(u),y.setupGrid(),y.draw()}if(e.showChartSpinner--,o||t.resolve(),!e.showChartSpinner){for(var l=!0,s=a.data,d=0;d<s.dataSeries.length;d++){var c=s.dataSeries[d].data;l&&(l=0===c.length)}e.chartNoData=l;var u=[],m=[],h={};angular.forEach(s.dataSeries,function(e){m.push(e.name),angular.forEach(e.data,function(e){e&&(h[e[0]]=e[0])})}),e.allXvals=[],angular.forEach(h,function(t){e.allXvals.push(t)}),e.allXvals.sort(),w.reset(m),x={},e.tableRows=[],angular.forEach(n.agentRollupIds,function(t,a){var i=s.dataSeries[a],o=i.name;if(g(o,i.data),0===n.metric.indexOf("gauge:")){var r=n.metric.substring("gauge:".length);" bytes"===f[r]&&p(i.data)}var l={},d=x[o];angular.forEach(e.allXvals,function(e){var t=d[e];l[""+e]=void 0===t?Number.NEGATIVE_INFINITY:t}),l.label=o,void 0===i.overall?l.overall=Number.NEGATIVE_INFINITY:l.overall=i.overall,l.agentRollupId=t,e.tableRows.push(l);var c={data:i.data,label:o,shortLabel:i.shortLabel,color:w.get(o),points:{fillColor:w.get(o)}};u.push(c)}),o?r():(e.showChart=!0,i(function(){y=$.plot($("#chart"),[[]],T),r()})),e.seriesLabels=[];var v;for(v=0;v<u.length;v++)e.seriesLabels.push({color:u[v].color,text:u[v].label,agentRollupId:n.agentRollupIds[v]})}},function(a){e.showChartSpinner--,o||t.resolve(),d.handle(a,e)})}function m(e){var t,a;return"hourly"===b.rollup?((t=moment(e-18e5)).tz(b.timeZoneId),(a=moment(t)).add(1,"hour")):"daily"===b.rollup?((t=moment(e)).tz(b.timeZoneId),t.startOf("day"),(a=moment(t)).add(1,"days")):"weekly"===b.rollup?((t=moment(e)).tz(b.timeZoneId),t.subtract(3,"days").startOf("day"),(a=moment(t)).add(7,"days")):"monthly"===b.rollup&&((t=moment(e)).tz(b.timeZoneId),t.startOf("month"),(a=moment(t)).add(1,"month")),[t,a]}function h(t,a,n){var i;"transaction:average"===b.metric?i="transaction/average":"transaction:x-percentile"===b.metric?i="transaction/percentiles":"transaction:count"===b.metric?i="transaction/throughput":"error:rate"===b.metric?i="error/messages":"error:count"===b.metric?i="error/messages":0===b.metric.indexOf("gauge:")&&(i="jvm/gauges");var o=i;return e.layout.agentRollups[t].agent?o+="?agent-id=":o+="?agent-rollup-id=",o+=encodeURIComponent(t),c(b.metric)?(o+="&transaction-type="+encodeURIComponent(b.transactionType),b.transactionName&&(o+="&transaction-name="+encodeURIComponent(b.transactionName))):0===b.metric.indexOf("gauge:")&&(o+="&gauge-name="+encodeURIComponent(b.metric.substring("gauge:".length))),o+="&from="+a+"&to="+n,"transaction:x-percentile"===b.metric&&(o+="&percentile="+b.percentile),o}e.$parent.heading="Ad hoc report",e.report={},e.range={},e.showChartSpinner=0;var f={},v=[{id:"transaction",display:"Transactions",heading:!0,disabled:!0},{id:"transaction:average",display:"Response time (average)"},{id:"transaction:x-percentile",display:"Response time (Xᵗʰ percentile)"},{id:"transaction:count",display:"Count"},{id:"-empty1-",display:"",disabled:!0},{id:"error",display:"Errors",heading:!0,disabled:!0},{id:"error:rate",display:"Error rate (%)"},{id:"error:count",display:"Count"},{id:"-empty2-",display:"",disabled:!0},{id:"gauge",display:"JVM Gauges",heading:!0,disabled:!0}];e.metrics=angular.copy(v),e.metrics.push({id:"gauge:select",display:"(select one or more agents to see available gauges)",disabled:!0}),e.rollups=["Hourly","Daily","Weekly","Monthly"],e.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,e.currentTabUrl=function(){return"report/ad-hoc"},e.hasAgents=function(){return!angular.equals({},e.layout.agentRollups)},e.allTransactionTypes=[],e.agentRollups=[],angular.forEach(e.layout.agentRollupValues,function(t){t.permissions.transaction.overview&&t.permissions.error.overview&&t.permissions.jvm.gauges&&e.agentRollups.push(t)}),e.showTransactionTypeAndName=function(){return c(e.report.metric)},e.$watch("report.agentRollupIds",function(){var t={};if(angular.forEach(e.report.agentRollupIds,function(a){var n=e.layout.agentRollups[a];angular.forEach(n.transactionTypes,function(e){t[e]=!0})}),e.allTransactionTypes=Object.keys(t).sort(),-1===e.allTransactionTypes.indexOf(e.report.transactionType)&&(e.report.transactionType=""),e.report.agentRollupIds.length){var n={agentRollupIds:e.report.agentRollupIds};a.get("backend/report/all-gauges"+s.encodeObject(n)).then(function(t){e.metrics=angular.copy(v),f={},angular.forEach(t.data,function(t){e.metrics.push({id:"gauge:"+t.name,display:t.display}),t.unit?f[t.name]=" "+t.unit:f[t.name]=""})},function(t){d.handle(t,e)})}else e.metrics=angular.copy(v),e.metrics.push({id:"gauge:select",display:"(select one or more agents to see available gauges)",disabled:!0})});var b,y,w=l.create(),x={};e.tableRows=[];var k=moment.tz.guess();e.formatValue=function(t){var a=e.report.metric;return 0===a.lastIndexOf("gauge:",0)?n("gtGaugeValue")(t):"transaction:count"===a||"error:count"===a?n("number")(t):"error:rate"===a?n("gtMillis")(t)+" %":n("gtMillis")(t)};var T={grid:{borderColor:"#7d7358",borderWidth:1,hoverable:!0},xaxis:{mode:"time",timezone:"browser",twelveHourClock:!0,ticks:5,reserveSpace:!1},yaxis:{ticks:10,zoomRange:!1,min:0,labelPadding:7,tickFormatter:function(e){return e.toLocaleString(void 0)}},series:{lines:{show:!0},points:{radius:8}},legend:{show:!1},tooltip:!0,tooltipOpts:{content:function(t,a,n,i){var o,l,s=m(a),d=s[0],c=s[1];return"hourly"===b.rollup?o="LT":"daily"===b.rollup?(c=void 0,o="ddd L"):"weekly"===b.rollup?(c.subtract(1,"days"),o="ddd L",l=" through "):"monthly"===b.rollup&&(c.subtract(1,"days"),o="L",l=" through "),r.renderTooltipHtml(d,c,void 0,i.dataIndex,i.seriesIndex,y,function(t,n){var i=x[n][a];return void 0===i?"no data":e.formatValue(i)+" "+y.getAxes().yaxis.options.label},void 0,!0,o,l)}}};e.$watchGroup(["containerWidth","windowHeight"],function(){y&&(y.resize(),y.setupGrid(),y.draw())}),o.on(e,function(){var a=b;b={},e.layout.central?b.agentRollupIds=t.search()["agent-rollup-id"]:b.agentRollupIds="",void 0===b.agentRollupIds?b.agentRollupIds=[]:angular.isArray(b.agentRollupIds)||(b.agentRollupIds=[b.agentRollupIds]),b.metric=t.search().metric,b.transactionType=t.search()["transaction-type"],b.transactionName=t.search()["transaction-name"],b.percentile=Number(t.search().percentile),isNaN(b.percentile)&&delete b.percentile,b.fromDate=t.search()["from-date"],b.toDate=t.search()["to-date"],b.fromDate&&b.toDate?(b.fromDate=moment(b.fromDate).valueOf(),b.toDate=moment(b.toDate).valueOf()):(b.fromDate=moment().startOf("day").subtract(7,"days").valueOf(),b.toDate=moment().startOf("day").subtract(1,"days").valueOf()),b.rollup=t.search().rollup||"daily",b.timeZoneId=t.search()["time-zone-id"]||k,void 0===a||angular.equals(b,a)||(e.showChart=!1),e.report=angular.copy(b)}),e.$watch("report.metric",function(t){c(t)?void 0===e.report.transactionName&&(e.report.transactionName=""):(delete e.report.transactionType,delete e.report.transactionName),"transaction:x-percentile"!==t&&delete e.report.percentile}),e.$watch("report",function(){var e=$(".gt-form-buttons .gt-button-message");e.text(""),e.removeClass("gt-button-message-error"),e.addClass("gt-button-message-success")},!0),e.runReport=function(a){if(!e.layout.central||e.report.agentRollupIds.length)if("weekly"===e.report.rollup&&moment(e.report.toDate).diff(moment(e.report.fromDate),"days")<6)a.reject("Must select at least one full week when using weekly rollup");else{if("monthly"===e.report.rollup){if(1!==moment(e.report.fromDate).date())return void a.reject("From date must be the first day of a month when using monthly rollup");if(moment(e.report.toDate).valueOf()<moment(e.report.fromDate).endOf("month").startOf("day"))return void a.reject("Must select at least one full month when using month rollup")}e.layout.central&&t.search("agent-rollup-id",e.report.agentRollupIds),t.search("metric",e.report.metric),t.search("transaction-type",e.report.transactionType),t.search("transaction-name",e.report.transactionName),t.search("percentile",e.report.percentile);var n=moment(e.report.fromDate).format("YYYYMMDD"),i=moment(e.report.toDate).format("YYYYMMDD");t.search("from-date",n),t.search("to-date",i),"daily"===e.report.rollup?t.search("rollup",void 0):t.search("rollup",e.report.rollup),t.search("time-zone-id",e.report.timeZoneId),b=angular.copy(e.report),u(a)}else a.reject("Select one or more agents")},e.columnHeader=function(e){var t=m(e),a=t[0],n=t[1];return"hourly"===b.rollup?a.format("L")+" "+a.format("LT")+" to "+n.format("LT"):"daily"===b.rollup?a.format("ddd L"):"weekly"===b.rollup?(n.subtract(1,"days"),moment(a).format("ddd L")+" through "+moment(n).format("ddd L")):"monthly"===b.rollup?(n.subtract(1,"days"),moment(a).format("L")+" through "+moment(n).format("L")):""},e.sortIconClass=function(t){return e.sortAttribute!==t?"caret gt-visibility-hidden":e.sortAsc?"caret gt-caret-sort-ascending":"caret"},e.sort=function(t){e.sortAttribute===t?e.sortAsc=!e.sortAsc:e.sortAsc=!1,e.sortAttribute=t,e.sortAttr="-"+t},e.drillDownLink=function(e,t){var a=m(t);return h(e,a[0],a[1])},e.drillDownLinkOverall=function(e){return h(e,b.fromDate,m(b.toDate)[1])}}]),glowroot.controller("ConfigCtrl",["$scope","$location","queryStrings",function(e,t,a){function n(t,n){var i=e.agentRollupQuery(n);return t+a.encodeObject(i)}document.title="Configuration · Glowroot",e.$parent.activeNavbarItem="gears",e.hideAgentRollupDropdown=function(){return!e.layout||1===e.layout.agentRollups.length},e.hideMainContent=function(){return e.layout.central&&!e.agentRollupId&&!e.agentId},e.percentileSuffix=function(e){var t=String(e);if("11"===t||/\.11$/.test(t))return"th";if("12"===t||/\.12$/.test(t))return"th";if("13"===t||/\.13$/.test(t))return"th";var a=t.charAt(t.length-1);return"1"===a?"st":"2"===a?"nd":"3"===a?"rd":"th"},e.currentUrl=function(){return t.path().substring(1)},e.isAgentRollup=function(){return t.search()["agent-rollup-id"]},e.agentRollupUrl=function(e){var a=t.path().substring(1);return e.agent?n(a,e):"config/synthetic-monitor-list"===a||"config/synthetic-monitor"===a||"config/alert-list"===a||"config/alert"===a||"config/ui"===a||"config/advanced"===a?n(a,e):n("config/synthetic-monitor-list",e)},e.$on("$stateChangeSuccess",function(){if(document.activeElement){var e=document.activeElement.getAttribute("gt-url");e&&e!==t.path().substring(1)&&document.activeElement.blur()}})}]),glowroot.controller("ConfigTransactionCtrl",["$scope","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n){function i(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(e.config)}e.hideMainContent()||(e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",a(e)),e.save=function(a){var o=angular.copy(e.config);t.post("backend/config/transaction?agent-id="+encodeURIComponent(e.agentId),o).then(function(e){i(e.data),a.resolve("Saved")},function(t){n.handle(t,e,a)})},t.get("backend/config/transaction?agent-id="+encodeURIComponent(e.agentId)).then(function(e){i(e.data)},function(t){n.handle(t,e)}))}]),glowroot.controller("ConfigGaugeListCtrl",["$scope","$location","$http","queryStrings","httpErrors",function(e,t,a,n,i){e.hideMainContent()||(e.gaugeQueryString=function(t){var a={};return e.agentId&&(a.agentId=e.agentId),a.v=t.config.version,n.encodeObject(a)},e.newQueryString=function(){return e.agentId?"?agent-id="+encodeURIComponent(e.agentId)+"&new":"?new"},a.get("backend/config/gauges?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.gauges=t.data},function(t){i.handle(t,e)}))}]),glowroot.controller("ConfigGaugeCtrl",["$scope","$location","$http","confirmIfHasChanges","httpErrors","queryStrings",function(e,t,a,n,i,o){function r(t){if(t.config.mbeanAttributes&&t.config.mbeanAttributes.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e.config=t.config,e.originalConfig=angular.copy(t.config),t.config.mbeanObjectName){e.heading=t.config.display,e.selectedMBeanObjectName=t.config.mbeanObjectName,e.mbeanUnavailable=t.mbeanUnavailable,e.mbeanUnmatched=t.mbeanUnmatched;var a={};angular.forEach(t.mbeanAvailableAttributeNames,function(e){a[e]={checked:!1,counter:!1,available:!0}}),angular.forEach(t.config.mbeanAttributes,function(e){var t=a[e.name];t?(t.checked=!0,t.counter=e.counter):a[e.name]={checked:!0,counter:e.counter,available:!1}}),e.allMBeanAttributes=[],angular.forEach(a,function(t,a){e.allMBeanAttributes.push({name:a,checked:t.checked,counter:t.counter,available:t.available})})}else e.heading="<New>"}function l(t){var n={agentId:e.agentId,objectName:t,gaugeVersion:e.config.version||""};e.mbeanAttributesLoading=!0,a.get("backend/config/mbean-attributes"+o.encodeObject(n)).then(function(t){e.mbeanAttributesLoading=!1;var a=t.data;e.mbeanUnavailable=a.mbeanUnavailable,e.mbeanUnmatched=a.mbeanUnmatched,e.duplicateMBean=a.duplicateMBean,e.allMBeanAttributes=[],angular.forEach(a.mbeanAttributes,function(t){e.allMBeanAttributes.push({name:t,checked:!1,counter:!1,available:!0})})},function(t){e.mbeanAttributesLoading=!1,i.handle(t,e)})}var s=t.search().v;s?a.get("backend/config/gauges?agent-id="+encodeURIComponent(e.agentId)+"&version="+s).then(function(t){e.loaded=!0,e.agentNotConnected=t.data.agentNotConnected,r(t.data)},function(t){i.handle(t,e)}):a.get("backend/config/new-gauge-check-agent-connected?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=!t.data,r({config:{mbeanAttributes:[]},mbeanAvailable:!1,mbeanAvailableAttributeNames:[]})},function(t){i.handle(t,e)}),e.$watch("allMBeanAttributes",function(t,a){t!==a&&(e.config.mbeanAttributes=[],angular.forEach(e.allMBeanAttributes,function(t){t.checked&&e.config.mbeanAttributes.push({name:t.name,counter:t.counter})}),e.config.mbeanAttributes.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},!0),e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var d=e.$on("$locationChangeStart",n(e));e.showMBeanObjectNameSpinner=0,e.mbeanObjectNames=function(t){if(-1!==t.indexOf("*"))return[t];var n={agentId:e.agentId,partialObjectName:t,limit:10};return e.showMBeanObjectNameSpinner++,a.get("backend/config/matching-mbean-objects"+o.encodeObject(n)).then(function(t){return e.showMBeanObjectNameSpinner--,t.data},function(t){e.showMBeanObjectNameSpinner--,i.handle(t,e)})},e.onSelectMBeanObjectName=function(){var t=e.config.mbeanObjectName;t!==e.selectedMBeanObjectName&&(e.selectedMBeanObjectName=t,l(t))},e.onBlurMBeanObjectName=function(){e.config.mbeanObjectName||(e.mbeanUnavailable=!1,e.mbeanUnmatched=!1,e.duplicateMBean=!1,e.allMBeanAttributes=[])},e.hasMBeanObjectNameError=function(){return e.config&&(!e.config.mbeanObjectName||e.mbeanUnavailable||e.mbeanUnmatched||e.duplicateMBean)},e.saveDisabled=function(){return!e.config||!e.config.mbeanAttributes.length||e.formCtrl.$invalid||e.mbeanUnavailable||e.mbeanUnmatched||e.duplicateMBean},e.save=function(n){var o,l=angular.copy(e.config);o=s?"backend/config/gauges/update":"backend/config/gauges/add";var d=e.agentId;a.post(o+"?agent-id="+encodeURIComponent(d),l).then(function(e){r(e.data),n.resolve(s?"Saved":"Added"),s=e.data.config.version,d?t.search({"agent-id":d,v:s}).replace():t.search({v:s}).replace()},function(t){if(409===t.status&&"mbeanObjectName"===t.data.message)return e.duplicateMBean=!0,void n.reject("There is already a gauge for this MBean");i.handle(t,e,n)})},e.delete=function(n){var o={version:e.config.version},r=e.agentId;a.post("backend/config/gauges/remove?agent-id="+encodeURIComponent(r),o).then(function(){d(),r?t.url("config/gauge-list?agent-id="+encodeURIComponent(r)).replace():t.url("config/gauge-list").replace()},function(t){i.handle(t,e,n)})}}]),glowroot.controller("ConfigSyntheticMonitorListCtrl",["$scope","$location","$http","$filter","queryStrings","httpErrors",function(e,t,a,n,i,o){e.hideMainContent()||(e.configQueryString=function(t){var a={};return e.agentId?a.agentId=e.agentId:e.agentRollupId&&(a.agentRollupId=e.agentRollupId),a.id=t.id,i.encodeObject(a)},e.newQueryString=function(){return e.agentRollupId?e.layout.agentRollups[e.agentRollupId].agent?"?agent-id="+encodeURIComponent(e.agentRollupId)+"&new":"?agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&new":"?new"},a.get("backend/config/synthetic-monitors?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(t){e.loaded=!0,e.configs=t.data},function(t){o.handle(t,e)}))}]),glowroot.controller("ConfigSyntheticMonitorCtrl",["$scope","$location","$http","encryptionKeyMessage","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){function r(t){e.config=t,e.originalConfig=angular.copy(t),t.display?e.heading=t.display:e.heading="<New>"}e.page={};var l=t.search().id;if(l){var s="backend/config/synthetic-monitors?agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&id="+l;a.get(s).then(function(t){e.loaded=!0,r(t.data)},function(t){o.handle(t,e)})}else e.loaded=!0,r({kind:"ping"});e.$watch("config.kind",function(t,a){e.config&&void 0!==a&&(delete e.config.pingUrl,delete e.config.javaSource,"java"===t&&(e.config.javaSource='import org.openqa.selenium.*;\nimport org.openqa.selenium.support.ui.*;\n\nimport static org.openqa.selenium.support.ui.ExpectedConditions.*;\n\npublic class Example {\n\n    public void test(WebDriver driver) throws Exception {\n\n        // e.g.\n        driver.get("https://www.example.org");\n        new WebDriverWait(driver, 30).until(\n                  visibilityOfElementLocated(By.xpath("//h1[text()=\'Example Domain\']")));\n        WebElement element = driver.findElement(By.linkText("More information..."));\n        element.click();\n        // ...\n    }\n}'))}),e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var d=e.$on("$locationChangeStart",i(e));e.save=function(i){var s,d=angular.copy(e.config);s=l?"backend/config/synthetic-monitors/update":"backend/config/synthetic-monitors/add";var c=e.agentId,g=e.agentRollupId;a.post(s+"?agent-rollup-id="+encodeURIComponent(g),d).then(function(a){if(a.data.symmetricEncryptionKeyMissing)i.reject('cassandra.symmetricEncryptionKey must be configured in the glowroot-central.properties file before string constants beginning with the text "ENCRYPT:" can be encrypted'+n.extra());else{if(a.data.javaSourceCompilationErrors)return e.javaSourceCompilationErrors=a.data.javaSourceCompilationErrors,void i.reject("compile errors (see above)");e.javaSourceCompilationErrors=[],r(a.data),l?i.resolve("Saved"):(i.resolve("Added"),l=a.data.id,c?t.search({"agent-id":c,id:l}).replace():g?t.search({"agent-rollup-id":g,id:l}).replace():t.search({id:l}).replace())}},function(t){o.handle(t,e,i)})},e.delete=function(n){var i={id:e.config.id},r=e.agentId,l=e.agentRollupId,s="backend/config/synthetic-monitors/remove?agent-rollup-id="+encodeURIComponent(l);a.post(s,i).then(function(){d(),r?t.url("config/synthetic-monitor-list?agent-id="+encodeURIComponent(r)).replace():l?t.url("config/synthetic-monitor-list?agent-rollup-id="+encodeURIComponent(l)).replace():t.url("config/synthetic-monitor-list").replace()},function(t){o.handle(t,e,n)})}}]),glowroot.controller("ConfigAlertListCtrl",["$scope","$location","$http","$filter","queryStrings","httpErrors",function(e,t,a,n,i,o){e.hideMainContent()||(e.configQueryString=function(t){var a={};return e.agentId?a.agentId=e.agentId:e.agentRollupId&&(a.agentRollupId=e.agentRollupId),a.v=t.version,i.encodeObject(a)},e.newQueryString=function(){return e.agentRollupId?e.layout.agentRollups[e.agentRollupId].agent?"?agent-id="+encodeURIComponent(e.agentRollupId)+"&new":"?agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&new":"?new"},a.get("backend/config/alerts?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(t){e.loaded=!0,e.configs=t.data},function(t){o.handle(t,e)}))}]),glowroot.controller("ConfigAlertCtrl",["$scope","$location","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n,i){function o(e){return e&&(0===e.lastIndexOf("transaction:",0)||0===e.lastIndexOf("error:",0))}function r(t){if(t.config.emailNotification||(t.config.emailNotification={emailAddresses:[]}),t.config.pagerDutyNotification||(t.config.pagerDutyNotification={pagerDutyIntegrationKey:""}),e.config=t.config,e.originalConfig=angular.copy(t.config),t.heading?(void 0===t.config.condition.timePeriodSeconds?delete e.page.timePeriodMinutes:e.page.timePeriodMinutes=t.config.condition.timePeriodSeconds/60,e.heading=t.heading,e.page.emailAddresses=t.config.emailNotification.emailAddresses.join(", ")):e.heading="<New>",e.metrics=angular.copy(d),s={},angular.forEach(t.gauges,function(t){e.metrics.push({id:"gauge:"+t.name,display:t.display}),t.unit?s[t.name]=" "+t.unit:s[t.name]=""}),"metric"===e.config.condition.conditionType&&0===e.config.condition.metric.lastIndexOf("gauge:",0)){var a=e.config.condition.metric.substring("gauge:".length);void 0===s[a]&&(e.metrics.push({id:"-empty9-",display:"",disabled:!0}),e.metrics.push({id:"gauge:"+a,display:a+" (not available)",disabled:!0}))}e.syntheticMonitors=t.syntheticMonitors,e.pagerDutyIntegrationKeys=t.pagerDutyIntegrationKeys}e.page={};var l=t.search().v,s={},d=[{id:"transaction",display:"Transactions",heading:!0,disabled:!0},{id:"transaction:average",display:"Response time (average)"},{id:"transaction:x-percentile",display:"Response time (Xᵗʰ percentile)"},{id:"transaction:count",display:"Count"},{id:"-empty1-",display:"",disabled:!0},{id:"error",display:"Errors",heading:!0,disabled:!0},{id:"error:rate",display:"Error rate (%)"},{id:"error:count",display:"Count"},{id:"-empty2-",display:"",disabled:!0},{id:"gauge",display:"JVM Gauges",heading:!0,disabled:!0}];if(e.metrics=angular.copy(d),e.metrics.push({id:"gauge:select",display:"(select one or more agents to see available gauges)",disabled:!0}),e.showTransactionTypeAndName=function(){return o(e.config.condition.metric)},e.$watch("config.condition.metric",function(t){e.condition&&(o(t)?(void 0===e.config.condition.transactionType&&(e.config.condition.transactionType=e.defaultTransactionType()),void 0===e.config.condition.transactionName&&(e.config.condition.transactionName="")):(delete e.config.condition.transactionType,delete e.config.condition.transactionName),"transaction:x-percentile"!==t&&e.config&&delete e.config.condition.percentile)}),e.phraseForValue=function(){var t=e.config.condition.metric;return"transaction:average"===t?"average response time":"transaction:x-percentile"===t?"Xᵗʰ percentile response time":"transaction:count"===t?"transaction count":"error:rate"===t?"error rate":"error:count"===t?"error count":t&&0===t.lastIndexOf("gauge:",0)?"average gauge value":"value"},e.unit=function(){var t=e.config.condition.metric;if("transaction:average"===t||"transaction:x-percentile"===t)return"milliseconds";if("error:rate"===t)return"percent";if(t&&0===t.lastIndexOf("gauge:",0)){var a=t.substring("gauge:".length);return s[a]}return""},l)a.get("backend/config/alerts?agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&version="+l).then(function(t){r(t.data),e.loaded=!0},function(t){i.handle(t,e)});else{var c="backend/config/alert-dropdowns?agent-rollup-id="+encodeURIComponent(e.agentRollupId)+"&version="+l;a.get(c).then(function(t){r({config:{condition:{conditionType:"metric",metric:""}},gauges:t.data.gauges,syntheticMonitors:t.data.syntheticMonitors,pagerDutyIntegrationKeys:t.data.pagerDutyIntegrationKeys}),e.loaded=!0},function(t){i.handle(t,e)})}e.$watch("config.condition.conditionType",function(t,a){e.config&&void 0!==a&&(e.config.condition={conditionType:t},delete e.page.timePeriodMinutes,e.showTransactionTypeAndName()&&(e.config.condition.transactionType=e.defaultTransactionType()))}),e.$watch("page.timePeriodMinutes",function(t){e.config&&(void 0===t?delete e.config.condition.timePeriodSeconds:e.config.condition.timePeriodSeconds=60*t)}),e.$watch("page.emailAddresses",function(t){if(t){var a=[];angular.forEach(t.split(","),function(e){(e=e.trim()).length&&a.push(e)}),e.config.emailNotification.emailAddresses=a}else e.config&&(e.config.emailNotification.emailAddresses=[])}),e.displayUnavailablePagerDutyIntegrationKey=function(){if(!e.config.pagerDutyNotification.pagerDutyIntegrationKey)return!1;var t;for(t=0;t<e.pagerDutyIntegrationKeys.length;t++)if(e.pagerDutyIntegrationKeys[t].key===e.config.pagerDutyNotification.pagerDutyIntegrationKey)return!1;return!0},e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var g=e.$on("$locationChangeStart",n(e));e.save=function(n){var o=angular.copy(e.config);o.emailNotification.emailAddresses.length||delete o.emailNotification,o.pagerDutyNotification.pagerDutyIntegrationKey||delete o.pagerDutyNotification;var s;s=l?"backend/config/alerts/update":"backend/config/alerts/add";var d=e.agentId,c=e.agentRollupId;a.post(s+"?agent-rollup-id="+encodeURIComponent(c),o).then(function(e){r(e.data),n.resolve(l?"Saved":"Added"),l=e.data.config.version,d?t.search({"agent-id":d,v:l}).replace():c?t.search({"agent-rollup-id":c,v:l}).replace():t.search({v:l}).replace()},function(t){i.handle(t,e,n)})},e.delete=function(n){var o={version:e.config.version},r=e.agentId,l=e.agentRollupId;a.post("backend/config/alerts/remove?agent-rollup-id="+encodeURIComponent(l),o).then(function(){g(),r?t.url("config/alert-list?agent-id="+encodeURIComponent(r)).replace():l?t.url("config/alert-list?agent-rollup-id="+encodeURIComponent(l)).replace():t.url("config/alert-list").replace()},function(t){i.handle(t,e,n)})}}]),glowroot.controller("ConfigUiCtrl",["$scope","$http","$rootScope","$location","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){function r(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t),e.page={},e.config.defaultDisplayedPercentiles&&(e.page.defaultDisplayedPercentiles=e.config.defaultDisplayedPercentiles.join(", "))}e.page={},e.hideMainContent()||(e.$watch("page.defaultDisplayedPercentiles",function(t){if(e.config){var a=[];t&&angular.forEach(t.split(","),function(e){(e=e.trim()).length&&a.push(Number(e))}),e.config.defaultDisplayedPercentiles=a}}),e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",i(e)),e.save=function(a){var n=angular.copy(e.config);t.post("backend/config/ui?agent-rollup-id="+encodeURIComponent(e.agentRollupId),n).then(function(e){r(e.data),a.resolve("Saved")},function(t){o.handle(t,e,a)})},t.get("backend/config/ui?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(e){r(e.data)},function(t){o.handle(t,e)}))}]),glowroot.controller("ConfigPluginListCtrl",["$scope","$location","$http","queryStrings","httpErrors",function(e,t,a,n,i){e.hideMainContent()||(e.pluginQueryString=function(t){var a={};return e.agentId&&(a.agentId=e.agentId),a.pluginId=t.id,n.encodeObject(a)},a.get("backend/config/plugins?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.plugins=[];var a=[];angular.forEach(t.data,function(t){t.hasConfig?e.plugins.push(t):a.push(t.name)}),e.pluginsWithNoConfig=a.join(", ")},function(t){i.handle(t,e)}))}]),glowroot.controller("ConfigPluginCtrl",["$scope","$stateParams","$http","$location","confirmIfHasChanges","httpErrors","queryStrings",function(e,t,a,n,i,o,r){function l(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(e.config)}e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",i(e)),e.save=function(n){var i=[];angular.forEach(e.config.properties,function(e){i.push({name:e.name,type:e.type,value:e.value})});var r={pluginId:t["plugin-id"],properties:i,version:e.config.version};a.post("backend/config/plugins?agent-id="+encodeURIComponent(e.agentId),r).then(function(e){l(e.data),n.resolve("Saved")},function(t){o.handle(t,e,n)})};var s={agentId:e.agentId,pluginId:t["plugin-id"]};a.get("backend/config/plugins"+r.encodeObject(s)).then(function(e){l(e.data)},function(t){o.handle(t,e)})}]),glowroot.controller("ConfigInstrumentationListCtrl",["$scope","$location","$http","$timeout","$q","locationChanges","queryStrings","httpErrors","modals","instrumentationExport",function(e,t,a,n,i,o,r,l,s,d){function c(t){a.get("backend/config/instrumentation?agent-id="+encodeURIComponent(e.agentId)).then(function(n){e.loaded=!0,e.configs=n.data.configs,e.dirty=n.data.jvmOutOfSync,e.jvmRetransformClassesSupported=n.data.jvmRetransformClassesSupported;var i=angular.copy(e.configs);angular.forEach(i,function(e){d.clean(e)}),e.jsonExport=JSON.stringify(i,null,2),g(),t?t.resolve():a.get("backend/config/preload-classpath-cache?agent-id="+encodeURIComponent(e.agentId))},function(a){l.handle(a,e,t)})}function g(){t.search().import?(e.jsonToImport="",e.importErrorMessage="",$("#importModal").data("location-query","import"),s.display("#importModal",!0),n(function(){$("#importModal textarea").focus()})):$("#importModal").modal("hide"),t.search().export?(gtClipboard("#exportModal .fa-clipboard",function(){return document.getElementById("jsonExport")},function(){return e.jsonExport}),$("#exportModal").data("location-query","export"),s.display("#exportModal",!0)):$("#exportModal").modal("hide")}e.hideMainContent()||(e.display=function(e){return e.className+"::"+e.methodName},e.displayExtra=function(e){var t=e.captureKind;return"timer"===t?"Timer":"trace-entry"===t?"Trace entry":"transaction"===t?"Transaction":"Other"},e.instrumentationQueryString=function(t){var a={};return e.agentId&&(a.agentId=e.agentId),a.v=t.version,r.encodeObject(a)},e.newQueryString=function(){return e.agentId?"?agent-id="+encodeURIComponent(e.agentId)+"&new":"?new"},e.displayImportModal=function(){t.search("import",!0)},e.displayExportModal=function(){t.search("export",!0)},e.displayDeleteAllConfirmationModal=function(){s.display("#deleteAllConfirmationModal",!0)},e.deleteAll=function(){var t={versions:[]};angular.forEach(e.configs,function(e){t.versions.push(e.version)}),e.deletingAll=!0,a.post("backend/config/instrumentation/remove?agent-id="+encodeURIComponent(e.agentId),t).then(function(){var t=i.defer();t.promise.finally(function(){e.deletingAll=!1,$("#deleteAllConfirmationModal").modal("hide")}),c(t)},function(t){e.deletingAll=!1,l.handle(t,e)})},e.$watch("jsonToImport",function(){e.importErrorMessage=""}),e.importFromJson=function(){e.importErrorMessage="";var t;try{t=angular.fromJson(e.jsonToImport)}catch(t){return void(e.importErrorMessage="Invalid json")}angular.isArray(t)||(t=[t]);var n=[],o={configs:[]};angular.forEach(t,function(e){if(void 0===e.className&&n.push("Missing className"),void 0===e.methodName&&n.push("Missing methodName"),void 0===e.captureKind&&n.push("Missing captureKind"),!n.length){var t={classAnnotation:"",subTypeRestriction:"",superTypeRestriction:"",methodAnnotation:"",methodReturnType:"",nestingGroup:"",order:0,transactionType:"",transactionNameTemplate:"",transactionUserTemplate:"",transactionOuter:!1,traceEntryMessageTemplate:"",traceEntryCaptureSelfNested:!1,timerName:"",enabledProperty:"",traceEntryEnabledProperty:""};angular.extend(t,e),o.configs.push(t)}}),n.length?e.importErrorMessage=n.join(", "):(e.importing=!0,a.post("backend/config/instrumentation/import?agent-id="+encodeURIComponent(e.agentId),o).then(function(){var t=i.defer();t.promise.finally(function(){e.importing=!1,$("#importModal").modal("hide")}),c(t)},function(t){e.importing=!1,l.handle(t,e)}))},e.retransformClasses=function(t){a.post("backend/config/reweave?agent-id="+encodeURIComponent(e.agentId)).then(function(a){e.dirty=!1;var n=a.data;if(n.classes){var i="re-transformed "+n.classes+" class"+(n.classes>1?"es":"");t.resolve("Success ("+i+")")}else t.resolve("Success (no classes needed re-transforming)")},function(a){l.handle(a,e,t)})},o.on(e,function(){e.loaded?g():c()}))}]),glowroot.controller("ConfigInstrumentationCtrl",["$scope","$location","$http","$rootScope","$timeout","confirmIfHasChanges","httpErrors","queryStrings","modals","instrumentationExport",function(e,t,a,n,i,o,r,l,s,d){function c(t){if(e.config=t.config,e.originalConfig=angular.copy(t.config),t.config.className){e.heading=function(e){var t=e.lastIndexOf(".");return-1!==t?e.substring(t+1):e}(t.config.className)+"::"+t.config.methodName;var a=t.config.captureKind;e.selectedClassName=t.config.className,e.selectedMethodName=t.config.methodName,e.methodSignatures=t.methodSignatures||[],e.captureKindTransaction="transaction"===a,e.showTraceEntry="trace-entry"===a||"transaction"===a,e.showTraceEntryStackThreshold="trace-entry"===a,e.showTimer="timer"===a||"trace-entry"===a||"transaction"===a,e.methodSignatures.unshift({name:e.config.methodName,parameterTypes:[".."],returnType:"",modifiers:[]});for(var n=0;n<e.methodSignatures.length;n++)if(angular.equals(e.methodSignatures[n].parameterTypes,e.config.methodParameterTypes)){e.selectedMethodSignature=e.methodSignatures[n];break}e.selectedMethodSignature||(e.selectedMethodSignature={name:e.config.methodName,parameterTypes:e.config.methodParameterTypes,returnType:"",modifiers:[],notAvailable:!0},e.methodSignatures.push(e.selectedMethodSignature))}else e.heading="<New>"}function g(t){e.methodSignatures=[{name:t,parameterTypes:[".."],returnType:"",modifiers:[]}],e.selectedMethodSignature=e.methodSignatures[0]}function p(t){if(e.agentNotConnected)g(t);else{var n={agentId:e.agentId,className:e.config.className,methodName:t};a.get("backend/config/method-signatures"+l.encodeObject(n)).then(function(a){g(t),e.methodSignatures=a.data,e.methodSignatures.unshift({name:t,parameterTypes:[".."],returnType:"",modifiers:[]}),e.selectedMethodSignature=e.methodSignatures[0]},function(t){r.handle(t,e)})}}function u(e){return 0===e.modifiers.length&&""===e.returnType&&1===e.parameterTypes.length&&".."===e.parameterTypes[0]}var m,h=t.search().v,f={classAnnotation:"",subTypeRestriction:"",superTypeRestriction:"",methodAnnotation:"",nestingGroup:"",order:0,captureKind:"timer",transactionType:"",transactionNameTemplate:"",transactionUserTemplate:"",transactionOuter:!1,traceEntryMessageTemplate:"",traceEntryCaptureSelfNested:!1,timerName:"",enabledProperty:"",traceEntryEnabledProperty:""};h?a.get("backend/config/instrumentation?agent-id="+encodeURIComponent(e.agentId)+"&version="+h).then(function(t){e.loaded=!0,e.agentNotConnected=t.data.agentNotConnected,c(t.data)},function(t){r.handle(t,e)}):e.layout.central?a.get("backend/config/new-instrumentation-check-agent-connected?agent-id="+encodeURIComponent(e.agentId)).then(function(t){e.loaded=!0,e.agentNotConnected=!t.data,g(""),c({config:f})},function(t){r.handle(t,e)}):(e.loaded=!0,e.agentNotConnected=!1,g(""),c({config:f})),e.hasChanges=function(){return e.config&&(e.config.className||e.originalConfig.className)&&!angular.equals(e.config,e.originalConfig)};var v=e.$on("$locationChangeStart",o(e));e.showClassNameSpinner=0,e.showMethodNameSpinner=0,e.classNames=function(t){if(e.agentNotConnected)return[];var n={agentId:e.agentId,partialClassName:t,limit:10};return e.showClassNameSpinner++,a.get("backend/config/matching-class-names"+l.encodeObject(n)).then(function(t){return e.showClassNameSpinner--,t.data},function(t){e.showClassNameSpinner--,r.handle(t,e)})},e.onSelectClassName=function(){var t=e.config.className;t!==e.selectedClassName&&(e.selectedClassName=t,e.selectedMethodName="",g(""),e.config.methodName="")},e.methodNames=function(t){if(e.agentNotConnected)return[];if(!e.config.className)return[];if(-1!==t.indexOf("*")||-1!==t.indexOf("|"))return[t];var n={agentId:e.agentId,className:e.config.className,partialMethodName:t,limit:10};return e.showMethodNameSpinner++,a.get("backend/config/matching-method-names"+l.encodeObject(n)).then(function(t){return e.showMethodNameSpinner--,t.data},function(t){e.showMethodNameSpinner--,r.handle(t,e)})},e.onSelectMethodName=function(){i.cancel(m);var t=e.config.methodName;t!==e.selectedMethodName&&(e.selectedMethodName=t,-1!==t.indexOf("*")?(e.methodSignatures=[{name:t,parameterTypes:[".."],returnType:"",modifiers:[]}],e.selectedMethodSignature=e.methodSignatures[0]):p(t))},e.onBlurMethodName=function(){e.config.methodName?m=i(function(){e.onSelectMethodName()},100):(g(),delete e.selectedMethodSignature)},e.methodSignatureText=function(e){if(-1!==e.name.indexOf("*")||-1!==e.name.indexOf("|"))return"any signature";if(u(e))return"any signature";var t,a="";if(e.modifiers)for(t=0;t<e.modifiers.length;t++)a+=e.modifiers[t]+" ";if(a+=e.returnType+" "+e.name+"(",e.parameterTypes)for(t=0;t<e.parameterTypes.length;t++)t>0&&(a+=", "),a+=e.parameterTypes[t];return a+=")"},e.save=function(n){var i,o=angular.copy(e.config);i=h?"backend/config/instrumentation/update":"backend/config/instrumentation/add";var l=e.agentId;a.post(i+"?agent-id="+encodeURIComponent(l),o).then(function(e){c(e.data),n.resolve(h?"Saved":"Added"),h=e.data.config.version,l?t.search({"agent-id":l,v:h}).replace():t.search({v:h}).replace()},function(t){r.handle(t,e,n)})},e.delete=function(n){var i={versions:[e.config.version]},o=e.agentId;a.post("backend/config/instrumentation/remove?agent-id="+encodeURIComponent(o),i).then(function(){v(),o?t.url("config/instrumentation-list?agent-id="+encodeURIComponent(o)).replace():t.url("config/instrumentation-list").replace()},function(t){r.handle(t,e,n)})},e.exportToJson=function(){var t=angular.copy(e.config);d.clean(t),e.jsonExport=JSON.stringify(t,null,2),gtClipboard("#jsonExportModal .fa-clipboard",function(){return document.getElementById("jsonExport")},function(){return e.jsonExport}),i(function(){s.display("#jsonExportModal",!0)})},e.$watch("config.captureKind",function(t){e.config&&(e.captureKindTransaction="transaction"===t,e.showTimer="timer"===t||"trace-entry"===t||"transaction"===t,e.showTraceEntry="trace-entry"===t||"transaction"===t,e.showTraceEntryStackThreshold="trace-entry"===t,e.showTimer||(e.config.timerName=""),e.showTraceEntry||(e.config.traceEntryMessageTemplate="",e.config.traceEntryCaptureSelfNested=!1),e.showTraceEntryStackThreshold||(e.config.traceEntryStackThresholdMillis=""))}),e.$watch("selectedMethodSignature",function(t,a){t!==a&&(t?(e.config.methodParameterTypes=t.parameterTypes,e.config.methodReturnType="",e.config.methodModifiers=[]):(e.config.methodParameterTypes=[],e.config.methodReturnType="",e.config.methodModifiers=[]))})}]),glowroot.controller("ConfigAdvancedCtrl",["$scope","$location","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n,i){function o(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(e.config)}e.hideMainContent()||(e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",n(e)),e.isAgentRollup=function(){return t.search()["agent-rollup-id"]},e.save=function(t){var n=angular.copy(e.config);a.post("backend/config/advanced?agent-rollup-id="+encodeURIComponent(e.agentRollupId),n).then(function(e){o(e.data),t.resolve("Saved")},function(a){i.handle(a,e,t)})},a.get("backend/config/advanced?agent-rollup-id="+encodeURIComponent(e.agentRollupId)).then(function(e){o(e.data)},function(t){i.handle(t,e)}))}]),glowroot.controller("ConfigUserRecordingCtrl",["$scope","$http","$rootScope","$location","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){function r(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t),e.page.users=e.config.users.join(", ")}e.page={},e.$watch("page.users",function(t){if(e.config){var a=[];angular.forEach(t.split(","),function(e){(e=e.trim()).length&&a.push(e)}),e.config.users=a}}),e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",i(e)),e.save=function(a){var n=angular.copy(e.config);t.post("backend/config/user-recording?agent-id="+encodeURIComponent(e.agentId),n).then(function(e){r(e.data),a.resolve("Saved")},function(t){o.handle(t,e,a)})},t.get("backend/config/user-recording?agent-id="+encodeURIComponent(e.agentId)).then(function(e){r(e.data)},function(t){o.handle(t,e)})}]),glowroot.controller("AdminCtrl",["$scope","$location",function(e,t){document.title="Administration · Glowroot",e.$parent.activeNavbarItem="gears",e.isAnonymous=function(){return e.layout.username&&"anonymous"===e.layout.username.toLowerCase()},e.currentUrl=function(){return t.path().substring(1)},e.$on("$stateChangeSuccess",function(){if(document.activeElement){var e=document.activeElement.getAttribute("gt-url");e&&e!==t.path().substring(1)&&document.activeElement.blur()}})}]),glowroot.controller("AdminAgentListCtrl",["$scope","$http","httpErrors",function(e,t,a){t.get("backend/admin/agent-rollups").then(function(t){function a(t,n){angular.forEach(t,function(t){t.depth=n,e.agents.push(t),a(t.children,n+1)})}e.loaded=!0,e.agents=[],a(t.data,0)},function(t){a.handle(t,e)})}]),glowroot.controller("AdminAgentCtrl",["$scope","$location","$http","confirmIfHasChanges","httpErrors","modals",function(e,t,a,n,i,o){function r(t){e.config=t,e.originalConfig=angular.copy(t),e.heading=t.display||t.id}e.page={};var l=t.search()["agent-rollup-id"];a.get("backend/admin/agent-rollups?agent-rollup-id="+encodeURIComponent(l)).then(function(t){e.loaded=!0,r(t.data)},function(t){i.handle(t,e)}),e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var s=e.$on("$locationChangeStart",n(e));e.save=function(t){var n=angular.copy(e.config);a.post("backend/admin/agent-rollups/update",n).then(function(e){r(e.data),t.resolve("Saved")},function(a){i.handle(a,e,t)})},e.displayDeleteConfirmationModal=function(){o.display("#deleteConfirmationModal",!0)},e.delete=function(){var n={agentRollupId:l};e.deleting=!0,a.post("backend/admin/agent-rollups/remove",n).then(function(){e.deleting=!1,$("#deleteConfirmationModal").modal("hide"),s(),t.url("admin/agent-list").replace()},function(t){e.deleting=!1,i.handle(t,e)})}}]),glowroot.controller("AdminUserListCtrl",["$scope","$http","httpErrors",function(e,t,a){t.get("backend/admin/users").then(function(t){e.loaded=!0,e.users=[];var a;angular.forEach(t.data,function(t){"anonymous"===t.username.toLowerCase()?(a=t).display="<anonymous>":(e.users.push(t),t.display=t.username)}),a&&e.users.push(a)},function(t){a.handle(t,e)})}]),glowroot.controller("AdminUserCtrl",["$scope","$location","$http","$q","confirmIfHasChanges","httpErrors","modals",function(e,t,a,n,i,o,r){function l(t){t.config.roles&&t.config.roles.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e.config=t.config,e.originalConfig=angular.copy(t.config),t.config.username?"anonymous"===t.config.username.toLowerCase()?e.heading="<anonymous>":e.heading=t.config.username:e.heading="<New>";var a={};angular.forEach(t.allRoles,function(e){a[e]={checked:!1,available:!0}}),angular.forEach(t.config.roles,function(e){var t=a[e];t?t.checked=!0:a[e]={checked:!0,available:!1}}),e.allRoles=[],angular.forEach(a,function(t,a){e.allRoles.push({name:a,checked:t.checked,available:t.available})}),e.ldapAvailable=t.ldapAvailable}function s(n){var i=angular.copy(e.config);e.page.password&&(i.newPassword=e.page.password);var r;r=e.username?"backend/admin/users/update":"backend/admin/users/add",a.post(r,i).then(function(a){l(a.data),n.resolve(e.username?"Saved":"Added"),delete e.page.password,delete e.page.verifyPassword,e.username||(e.username=a.data.config.username,t.search({username:e.username}).replace())},function(t){409!==t.status||"username"!==t.data.message?o.handle(t,e,n):n.reject("There is already a user with this username")})}e.page={},e.username=t.search().username,e.username?a.get("backend/admin/users?username="+encodeURIComponent(e.username)).then(function(t){e.loaded=!0,l(t.data)},function(t){o.handle(t,e)}):a.get("backend/admin/all-role-names").then(function(t){e.loaded=!0,l({config:{ldap:!1,roles:[]},allRoles:t.data.allRoles,ldapAvailable:t.data.ldapAvailable})},function(t){o.handle(t,e)}),e.$watch("allRoles",function(t,a){t!==a&&(e.config.roles=[],angular.forEach(e.allRoles,function(t){t.checked&&e.config.roles.push(t.name)}),e.config.roles.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},!0),e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var d=e.$on("$locationChangeStart",i(e)),c=!1;e.save=function(t){e.page.password===e.page.verifyPassword?e.config.roles.length||c?(c=!1,s(t)):(r.display("#saveWithNoRolesConfirmationModal",!0),t.resolve()):t.reject("Passwords do not match")},e.saveWithNoRoles=function(){$("#saveWithNoRolesConfirmationModal").modal("hide"),setTimeout(function(){c=!0,$("#gtSaveChanges button").click()})},e.displayDeleteConfirmationModal=function(){e.errorCannotDeleteLastUser=!1,r.display("#deleteConfirmationModal",!0)},e.delete=function(){var n={username:e.username};e.deleting=!0,a.post("backend/admin/users/remove",n).then(function(a){e.deleting=!1,a.data.errorCannotDeleteLastUser?e.errorCannotDeleteLastUser=!0:($("#deleteConfirmationModal").modal("hide"),d(),t.url("admin/user-list").replace())},function(t){e.deleting=!1,o.handle(t,e)})}}]),glowroot.controller("AdminRoleListCtrl",["$scope","$http","httpErrors",function(e,t,a){t.get("backend/admin/roles").then(function(t){e.loaded=!0,e.roles=t.data},function(t){a.handle(t,e)})}]),glowroot.controller("AdminRoleCtrl",["$scope","$location","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n,i){function o(t){t.config.permissions.sort();var a,n;for(a=0;a<t.config.permissionBlocks.length;a++)(n=t.config.permissionBlocks[a]).agentRollupIds.sort(),n.permissions.sort(),1===n.agentRollupIds.length&&"*"===n.agentRollupIds[0]&&(t.config.permissionBlocks.splice(a,1),t.config.permissionBlocks.unshift(n));e.config=t.config,e.originalConfig=angular.copy(t.config),t.config.name?e.heading=t.config.name:e.heading="<New>",e.page.permissions={transaction:{_:!1,overview:!1,traces:!1,queries:!1,serviceCalls:!1,profile:!1},error:{_:!1,overview:!1,traces:!1},jvm:{_:!1,gauges:!1,threadDump:!1,heapDump:!1,heapHistogram:!1,mbeanTree:!1,systemProperties:!1,environment:!1},syntheticMonitor:!1,incident:!1,config:{_:!1,view:!1,edit:{_:!1,transaction:!1,gauge:!1,alert:!1,ui:!1,plugin:!1,instrumentation:!1,advanced:!1}}},e.page.permissions.admin={_:!1,view:!1,edit:!1},e.page.permissionBlocks=[],angular.forEach(t.config.permissions,function(t){"report"!==t?"admin"!==t?"admin:view"!==t?"admin:edit"!==t?r(e.page.permissions,t):e.page.permissions.admin.edit=!0:e.page.permissions.admin.view=!0:e.page.permissions.admin._=!0:e.page.permissions.report=!0}),angular.forEach(t.config.permissionBlocks,function(t){var a={transaction:{_:!1,overview:!1,traces:!1,queries:!1,serviceCalls:!1,profile:!1},error:{_:!1,overview:!1,traces:!1},jvm:{_:!1,gauges:!1,threadDump:!1,heapDump:!1,heapHistogram:!1,mbeanTree:!1,systemProperties:!1,environment:!1},syntheticMonitor:!1,incident:!1,config:{_:!1,view:!1,edit:{_:!1,transaction:!1,gauge:!1,alert:!1,ui:!1,plugin:!1,instrumentation:!1,advanced:!1}}};a.agentRollupIds=t.agentRollupIds,e.page.permissionBlocks.push(a),angular.forEach(t.permissions,function(e){r(a,e)})}),angular.forEach(t.allAgentRollups,function(e){for(var t="",a=0;a<e.depth;a++)t+="    ";e.indentedDisplay=t+e.display}),e.allAgentRollups=t.allAgentRollups}function r(t,a){"agent:transaction"===a?t.transaction._=!0:"agent:transaction:overview"===a?t.transaction.overview=!0:"agent:transaction:traces"===a?t.transaction.traces=!0:"agent:transaction:queries"===a?t.transaction.queries=!0:"agent:transaction:serviceCalls"===a?t.transaction.serviceCalls=!0:"agent:transaction:profile"===a?t.transaction.profile=!0:"agent:error"===a?t.error._=!0:"agent:error:overview"===a?t.error.overview=!0:"agent:error:traces"===a?t.error.traces=!0:"agent:jvm"===a?t.jvm._=!0:"agent:jvm:gauges"===a?t.jvm.gauges=!0:"agent:jvm:threadDump"===a?t.jvm.threadDump=!0:"agent:jvm:heapDump"===a?t.jvm.heapDump=!0:"agent:jvm:heapHistogram"===a?t.jvm.heapHistogram=!0:"agent:jvm:mbeanTree"===a?t.jvm.mbeanTree=!0:"agent:jvm:systemProperties"===a?t.jvm.systemProperties=!0:"agent:jvm:environment"===a?t.jvm.environment=!0:"agent:syntheticMonitor"===a?t.syntheticMonitor=!0:"agent:incident"===a?t.incident=!0:"agent:config"===a?t.config._=!0:"agent:config:view"===a?t.config.view=!0:"agent:config:edit"===a?t.config.edit._=!0:"agent:config:edit:transaction"===a?t.config.edit.transaction=!0:"agent:config:edit:gauge"===a?t.config.edit.gauge=!0:e.layout.central&&"agent:config:edit:syntheticMonitor"===a?t.config.edit.syntheticMonitor=!0:"agent:config:edit:alert"===a?t.config.edit.alert=!0:"agent:config:edit:ui"===a?t.config.edit.ui=!0:"agent:config:edit:plugin"===a?t.config.edit.plugin=!0:"agent:config:edit:instrumentation"===a?t.config.edit.instrumentation=!0:"agent:config:edit:advanced"===a&&(t.config.edit.advanced=!0)}function l(t){t.transaction._&&(t.transaction.overview=!1,t.transaction.traces=!1,t.transaction.queries=!1,t.transaction.serviceCalls=!1,t.transaction.profile=!1),t.error._&&(t.error.overview=!1,t.error.traces=!1),t.jvm._&&(t.jvm.gauges=!1,t.jvm.threadDump=!1,t.jvm.heapDump=!1,t.jvm.heapHistogram=!1,t.jvm.mbeanTree=!1,t.jvm.systemProperties=!1,t.jvm.environment=!1),t.config._&&(t.config.view=!1,t.config.edit._=!1,t.config.edit.transaction=!1,t.config.edit.gauge=!1,e.layout.central&&(t.config.edit.syntheticMonitor=!1),t.config.edit.alert=!1,t.config.edit.ui=!1,t.config.edit.plugin=!1,t.config.edit.instrumentation=!1,t.config.edit.reweave=!1,t.config.edit.advanced=!1),t.config.edit._&&(t.config.edit.transaction=!1,t.config.edit.gauge=!1,e.layout.central&&(t.config.edit.syntheticMonitor=!1),t.config.edit.alert=!1,t.config.edit.ui=!1,t.config.edit.plugin=!1,t.config.edit.instrumentation=!1,t.config.edit.reweave=!1,t.config.edit.advanced=!1),t.admin&&t.admin._&&(t.admin.view=!1,t.admin.edit=!1)}function s(t){var a=[];return t.transaction._&&a.push("agent:transaction"),t.transaction.overview&&a.push("agent:transaction:overview"),t.transaction.traces&&a.push("agent:transaction:traces"),t.transaction.queries&&a.push("agent:transaction:queries"),t.transaction.serviceCalls&&a.push("agent:transaction:serviceCalls"),t.transaction.profile&&a.push("agent:transaction:profile"),t.error._&&a.push("agent:error"),t.error.overview&&a.push("agent:error:overview"),t.error.traces&&a.push("agent:error:traces"),t.jvm._&&a.push("agent:jvm"),t.jvm.gauges&&a.push("agent:jvm:gauges"),t.jvm.threadDump&&a.push("agent:jvm:threadDump"),t.jvm.heapDump&&a.push("agent:jvm:heapDump"),t.jvm.heapHistogram&&a.push("agent:jvm:heapHistogram"),t.jvm.mbeanTree&&a.push("agent:jvm:mbeanTree"),t.jvm.systemProperties&&a.push("agent:jvm:systemProperties"),t.jvm.environment&&a.push("agent:jvm:environment"),t.syntheticMonitor&&a.push("agent:syntheticMonitor"),t.incident&&a.push("agent:incident"),t.config._&&a.push("agent:config"),t.config.view&&a.push("agent:config:view"),t.config.edit._&&a.push("agent:config:edit"),t.config.edit.transaction&&a.push("agent:config:edit:transaction"),t.config.edit.gauge&&a.push("agent:config:edit:gauge"),e.layout.central&&t.config.edit.syntheticMonitor&&a.push("agent:config:edit:syntheticMonitor"),t.config.edit.alert&&a.push("agent:config:edit:alert"),t.config.edit.ui&&a.push("agent:config:edit:ui"),t.config.edit.plugin&&a.push("agent:config:edit:plugin"),t.config.edit.instrumentation&&a.push("agent:config:edit:instrumentation"),t.config.edit.advanced&&a.push("agent:config:edit:advanced"),t.report&&a.push("report"),t.admin&&t.admin._&&a.push("admin"),t.admin&&t.admin.view&&a.push("admin:view"),t.admin&&t.admin.edit&&a.push("admin:edit"),a}function d(e,t){if(e.length!==t.length)return!1;var a,n,i=angular.copy(t);for(a=0;a<e.length;a++){if(-1===(n=i.indexOf(e[a])))return!1;i.splice(n,1)}return!0}e.page={},e.name=t.search().name,e.transactionOverviewRequired=function(e){return!!e&&(e.transaction.traces||e.transaction.queries||e.transaction.serviceCalls||e.transaction.profile)},e.viewConfigRequired=function(t){return!!t&&(t.config.edit._||t.config.edit.transaction||t.config.edit.gauge||e.layout.central&&t.config.edit.syntheticMonitor||t.config.edit.alert||t.config.edit.ui||t.config.edit.plugin||t.config.edit.instrumentation||t.config.edit.reweave||t.config.edit.advanced)},e.$watch("page",function(){if(e.page.permissions){l(e.page.permissions);var t=s(e.page.permissions);t.sort(),e.config.permissions=t,e.config.permissionBlocks=[],angular.forEach(e.page.permissionBlocks,function(t){var a={agentRollupIds:t.agentRollupIds,permissions:[]};l(t),a.permissions=s(t),a.agentRollupIds.sort(),a.permissions.sort(),e.config.permissionBlocks.push(a)})}},!0),e.addPermissionBlock=function(){var t={transaction:{_:!1,overview:!1,traces:!1,queries:!1,serviceCalls:!1,profile:!1},error:{_:!1,overview:!1,traces:!1},jvm:{_:!1,gauges:!1,threadDump:!1,heapDump:!1,heapHistogram:!1,mbeanTree:!1,systemProperties:!1,environment:!1},syntheticMonitor:!1,incident:!1,config:{_:!1,view:!1,edit:{_:!1,transaction:!1,gauge:!1,alert:!1,ui:!1,plugin:!1,instrumentation:!1,advanced:!1}}};t.agentRollupIds=[],e.page.permissionBlocks.push(t)},e.removePermissionBlock=function(t){var a=e.page.permissionBlocks.indexOf(t);e.page.permissionBlocks.splice(a,1)},e.name?a.get("backend/admin/roles?name="+encodeURIComponent(e.name)).then(function(t){e.loaded=!0,o(t.data)},function(t){i.handle(t,e)}):e.layout.central?a.get("backend/admin/all-agent-rollups").then(function(t){e.loaded=!0,o({config:{permissions:[],permissionBlocks:[]},allAgentRollups:t.data})},function(t){i.handle(t,e)}):(e.loaded=!0,o({config:{permissions:[],permissionBlocks:[]}})),e.hasChanges=function(){return!angular.equals(e.config,e.originalConfig)};var c=e.$on("$locationChangeStart",n(e));e.save=function(n){var r,l=angular.copy(e.config);r=e.name?"backend/admin/roles/update":"backend/admin/roles/add",a.post(r,l).then(function(a){var i=a.data;d(i.config.permissions,l.permissions)&&(i.config.permissions=l.permissions),o(i),n.resolve(e.name?"Saved":"Added"),e.name||(e.name=i.config.name,t.search({name:e.name}).replace())},function(t){if(409===t.status&&"name"===t.data.message)return e.duplicateName=!0,void n.reject("There is already a role with this name");i.handle(t,e,n)})},e.delete=function(n){var o={name:e.name};a.post("backend/admin/roles/remove",o).then(function(e){e.data.errorCannotDeleteLastRole?n.reject("Cannot delete last role"):(c(),t.url("admin/role-list").replace())},function(t){i.handle(t,e,n)})}}]),glowroot.controller("AdminWebCtrl",["$scope","$http","$rootScope","$location","$timeout","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o,r){function l(t){e.loaded=!0,e.config=t.config,e.originalConfig=angular.copy(t.config),e.layout.central||(e.activePort=t.activePort,e.activeBindAddress=t.activeBindAddress,e.activeHttps=t.activeHttps,e.certificateDir=t.certificateDir)}e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",o(e)),e.save=function(a){var o=angular.copy(e.config);if(e.layout.central)t.post("backend/admin/web",o).then(function(e){l(e.data),a.resolve("Saved")},function(t){r.handle(t,e,a)});else{var s=e.config.port!==e.activePort,d=e.activePort,c=e.config.https!==e.activeHttps;t.post("backend/admin/web",o).then(function(e){var t=e.data;if(t.httpsRequiredFilesDoNotExist)a.reject("The SSL certificate and private key to be used must be placed in the glowroot directory with filenames certificate.pem and private.pem before enabling HTTPS");else if(t.httpsValidationError)a.reject(t.httpsValidationError);else if(t.portChangeFailed)a.reject("Save succeeded, but switching over to the new port failed");else if(l(t),s||c){var o;o=s&&!c?"port":!s&&c?"protocol":"port and protocol",n.port()===d?(a.resolve("Saved, redirecting to new "+o+" ..."),i(function(){var e=(t.activeHttps?"https":"http")+"://"+n.host();80!==t.activePort&&(e+=":"+t.activePort),e+=n.path(),document.location.href=e},500)):a.reject("The save succeeded, and switching the http listener over to the new port succeeded, but you are not being redirected to the new "+o+" since it seems you are using an intermediary proxy?")}else a.resolve("Saved")},function(t){r.handle(t,e,a)})}},t.get("backend/admin/web").then(function(e){l(e.data)},function(t){r.handle(t,e)})}]),glowroot.controller("AdminStorageCtrl",["$scope","$http","$location","confirmIfHasChanges","httpErrors",function(e,t,a,n,i){function o(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t),e.page.rollupExpirationDays=[],angular.forEach(t.rollupExpirationHours,function(t){e.page.rollupExpirationDays.push(t/24)}),e.page.traceExpirationDays=t.traceExpirationHours/24,e.page.fullQueryTextExpirationDays=t.fullQueryTextExpirationHours/24}e.page={},e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",n(e)),e.$watchCollection("page.rollupExpirationDays",function(t){e.config&&(e.config.rollupExpirationHours=[],angular.forEach(t,function(t){e.config.rollupExpirationHours.push(24*t)}))}),e.$watchCollection("page.traceExpirationDays",function(t){e.config&&(e.config.traceExpirationHours=24*t)}),e.$watchCollection("page.fullQueryTextExpirationDays",function(t){e.config&&(e.config.fullQueryTextExpirationHours=24*t)}),e.save=function(a){t.post("backend/admin/storage",e.config).then(function(e){o(e.data),a.resolve("Saved")},function(t){i.handle(t,e,a)})},e.deleteAllStoredData=function(a){t.post("backend/admin/delete-all-stored-data",{agentRollupId:e.agentRollupId}).then(function(){a.resolve("Deleted")},function(t){i.handle(t,e,a)})},t.get("backend/admin/storage").then(function(e){o(e.data)},function(t){i.handle(t,e)});var r="input:not(.gt-autofocus-ignore)";"rollup-capped-database-size"===a.hash()?r=".gt-rollup-capped-database-size input":"trace-capped-database-size"===a.hash()&&(r=".gt-trace-capped-database-size input");var l=$(".form-horizontal"),s=e.$watch(function(){return l.find(r).length&&l.find("input").first().is(":visible")},function(e){e&&(l.find(r).first().focus(),s())})}]),glowroot.controller("AdminSmtpCtrl",["$scope","$http","modals","encryptionKeyMessage","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){function r(t){e.loaded=!0,e.config=t.config,e.page.connectionSecurity=e.config.connectionSecurity||"none",e.originalConfig=angular.copy(t.config),t.config.passwordExists&&(e.password="********"),e.localServerName=t.localServerName}e.page={},e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",i(e)),e.$watch("page.connectionSecurity",function(t){e.config&&("none"===t?delete e.config.connectionSecurity:e.config.connectionSecurity=t)}),e.onPasswordChange=function(){e.config.newPassword=e.password,e.config.passwordExists=""!==e.password},e.onPasswordClick=function(){$("#password").select()},e.save=function(a){t.post("backend/admin/smtp",e.config).then(function(e){e.data.symmetricEncryptionKeyMissing?a.reject("cassandra.symmetricEncryptionKey must be configured in the glowroot-central.properties file before SMTP password can be saved to cassandra"+n.extra()):(r(e.data),a.resolve("Saved"))},function(t){o.handle(t,e,a)})},e.sendTestEmail=function(a){var n=angular.copy(e.config);n.testEmailRecipient=e.page.testEmailRecipient,t.post("backend/admin/send-test-email",n).then(function(e){e.data.error?a.reject(e.data.message):a.resolve("Sent")},function(t){o.handle(t,e,a)})},t.get("backend/admin/smtp").then(function(e){r(e.data)},function(t){o.handle(t,e)})}]),glowroot.controller("AdminHttpProxyCtrl",["$scope","$http","modals","encryptionKeyMessage","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){function r(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t),t.passwordExists&&(e.password="********")}e.page={},e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",i(e)),e.onPasswordChange=function(){e.config.newPassword=e.password,e.config.passwordExists=""!==e.password},e.onPasswordClick=function(){$("#password").select()},e.save=function(a){delete e.testHttpProxyResponse,t.post("backend/admin/http-proxy",e.config).then(function(e){e.data.symmetricEncryptionKeyMissing?a.reject("cassandra.symmetricEncryptionKey must be configured in the glowroot-central.properties file before HTTP proxy password can be saved to cassandra"+n.extra()):(r(e.data),a.resolve("Saved"))},function(t){o.handle(t,e,a)})},e.testHttpProxy=function(a){delete e.testHttpProxyResponse;var n=angular.copy(e.config);n.testUrl=e.page.testUrl,t.post("backend/admin/test-http-proxy",n).then(function(t){t.data.error?a.reject(t.data.message):(a.resolve("Success"),e.testHttpProxyResponse=t.data.content)},function(t){o.handle(t,e,a)})},t.get("backend/admin/http-proxy").then(function(e){r(e.data)},function(t){o.handle(t,e)})}]),glowroot.controller("AdminLdapCtrl",["$scope","$http","encryptionKeyMessage","confirmIfHasChanges","httpErrors",function(e,t,a,n,i){function o(t){e.loaded=!0,e.config=t.config,e.originalConfig=angular.copy(t.config),t.config.passwordExists&&(e.password="********"),e.allGlowrootRoles=t.allGlowrootRoles,e.page.roleMappingBlocks=[],angular.forEach(e.config.roleMappings,function(t,a){e.page.roleMappingBlocks.push({ldapGroupDn:a,glowrootRoles:angular.copy(t)})})}e.page={},e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",n(e)),e.onPasswordChange=function(){e.config.newPassword=e.password,e.config.passwordExists=""!==e.password},e.onPasswordClick=function(){$("#password").select()},e.addRoleMappingBlock=function(){e.page.roleMappingBlocks.push({ldapGroupDn:"",glowrootRoles:[]})},e.$watch("page.roleMappingBlocks",function(t){e.config&&(e.config.roleMappings={},angular.forEach(t,function(t){e.config.roleMappings[t.ldapGroupDn]=t.glowrootRoles}))},!0),e.removeRoleMappingBlock=function(t){var a=e.page.roleMappingBlocks.indexOf(t);e.page.roleMappingBlocks.splice(a,1)},e.save=function(n){t.post("backend/admin/ldap",e.config).then(function(e){e.data.symmetricEncryptionKeyMissing?n.reject("cassandra.symmetricEncryptionKey must be configured in the glowroot-central.properties file before LDAP password can be saved to cassandra"+a.extra()):(n.resolve("Saved"),o(e.data))},function(t){i.handle(t,e,n)})},e.testLdap=function(a){var n=angular.copy(e.config);n.authTestUsername=e.page.authTestUsername,n.authTestPassword=e.page.authTestPassword,t.post("backend/admin/test-ldap",n).then(function(e){var t=e.data;t.error?a.reject(t.message):t.glowrootRoles.length?a.resolve("Success, assigned to Glowroot roles: "+t.glowrootRoles.join(", ")):t.ldapGroupDns.length?a.reject("Authentication succeeded, but the LDAP group query did not find any groups for this user that have been mapped to Glowroot roles above. The LDAP groups query found the following groups:\n\n"+t.ldapGroupDns.join("\n\n")):a.reject("Authentication succeeded, but the LDAP group query did not find any groups for this user")},function(t){i.handle(t,e,a)})},t.get("backend/admin/ldap").then(function(e){o(e.data)},function(t){i.handle(t,e)})}]),glowroot.controller("AdminPagerDutyCtrl",["$scope","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n){function i(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t)}e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",a(e)),e.addIntegrationKey=function(){e.config.integrationKeys.push({key:"",display:"",new:!0})},e.removeIntegrationKey=function(t){var a=e.config.integrationKeys.indexOf(t);e.config.integrationKeys.splice(a,1)},e.save=function(a){var o=angular.copy(e.config);angular.forEach(o.integrationKeys,function(e){delete e.new}),t.post("backend/admin/pager-duty",o).then(function(e){e.data.duplicateIntegrationKey?a.reject("Duplicate integration key found"):e.data.duplicateIntegrationKeyDisplay?a.reject("Duplicate integration key display found"):(a.resolve("Saved"),i(e.data))},function(t){n.handle(t,e,a)})},t.get("backend/admin/pager-duty").then(function(e){i(e.data)},function(t){n.handle(t,e)})}]),glowroot.controller("AdminHealthchecksIoCtrl",["$scope","$http","confirmIfHasChanges","httpErrors",function(e,t,a,n){function i(t){e.loaded=!0,e.config=t,e.originalConfig=angular.copy(t)}e.hasChanges=function(){return e.originalConfig&&!angular.equals(e.config,e.originalConfig)},e.$on("$locationChangeStart",a(e)),e.save=function(a){t.post("backend/admin/healthchecks-io",e.config).then(function(e){a.resolve("Saved"),i(e.data)},function(t){n.handle(t,e,a)})},e.layout.central?e.loaded=!0:t.get("backend/admin/healthchecks-io").then(function(e){i(e.data)},function(t){n.handle(t,e)})}]),glowroot.controller("ProfileCtrl",["$scope","$location",function(e,t){document.title="Profile · Glowroot",e.$parent.activeNavbarItem="gears",e.$on("$stateChangeSuccess",function(){if(document.activeElement){var e=document.activeElement.getAttribute("gt-url");e&&e!==t.path().substring(1)&&document.activeElement.blur()}})}]),glowroot.controller("ProfileChangePasswordCtrl",["$scope","$http","$rootScope","$location","confirmIfHasChanges","httpErrors",function(e,t,a,n,i,o){e.page={},e.loaded=!0,e.changePassword=function(a){if(e.page.newPassword===e.page.verifyNewPassword){var n={currentPassword:e.page.currentPassword,newPassword:e.page.newPassword};t.post("backend/change-password",n).then(function(t){t.data.currentPasswordIncorrect?a.reject("Current password is incorrect"):(e.page={},a.resolve("Password has been changed"))},function(t){o.handle(t,e,a)})}else a.reject("Passwords do not match")}}]),glowroot.controller("LoginCtrl",["$scope","$http","$rootScope","$location","$timeout","login","httpErrors",function(e,t,a,n,i,o,r){document.title="Login · Glowroot",e.$parent.activeNavbarItem="login",e.page={},e.message=o.getMessage(),e.login=function(n){delete e.message;var i={username:e.page.username,password:e.page.password};t.post("backend/login",i).then(function(e){e.data.incorrectLogin?($("#loginPassword").select(),n.reject("Password incorrect")):(a.layout=e.data,a.initLayout(),n.resolve("Success"),o.returnToOriginalPath())},function(t){r.handle(t,e,n)})}}]),this.JST=this.JST||{},this.JST["mbean-node-expanded"]=Handlebars.template({1:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing;return'<tr>\n<td valign="top">'+e.escapeExpression("function"==typeof(r=null!=(r=a.key||i&&i.key)?r:s)?r.call(l,{name:"key",hash:{},data:i}):r)+'</td>\n<td style="padding-left: 10px;">\n'+(null!=(o=(a.ifNull||t&&t.ifNull||s).call(l,t,{name:"ifNull",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?o:"")+"</td>\n</tr>\n"},2:function(e,t,a,n,i){return"<div>null</div>\n"},4:function(e,t,a,n,i){var o;return null!=(o=(a.ifSimpleValue||t&&t.ifSimpleValue||a.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"ifSimpleValue",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))?o:""},5:function(e,t,a,n,i){return'<div class="gt-break-word">\n'+e.escapeExpression(e.lambda(t,t))+"\n</div>\n"},7:function(e,t,a,n,i){return'<div>\n<pre class="gt-mbean-value-pre gt-break-word">'+e.escapeExpression((a.indentedJson||t&&t.indentedJson||a.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"indentedJson",hash:{},data:i}))+"</pre>\n</div>\n"},9:function(e,t,a,n,i){var o;return'<tr>\n<td valign="top"><em>ObjectName</em></td>\n<td style="padding-left: 10px;">\n<div class="gt-break-word">\n'+e.escapeExpression("function"==typeof(o=null!=(o=a.objectName||(null!=t?t.objectName:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"objectName",hash:{},data:i}):o)+"\n</div>\n</td>\n</tr>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{};return'<div class="gt-inline-block gt-mbean-expanded-content"\nstyle="margin-left: -10px;">\n<label>'+e.escapeExpression("function"==typeof(r=null!=(r=a.nodeName||(null!=t?t.nodeName:t))?r:a.helperMissing)?r.call(l,{name:"nodeName",hash:{},data:i}):r)+"</label>\n<table>\n"+(null!=(o=a.each.call(l,null!=t?t.attributeMap:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+"\x3c!-- all the platform mbeans already expose ObjectName attribute --\x3e\n"+(null!=(o=a.unless.call(l,null!=(o=null!=t?t.attributes:t)?o.ObjectName:o,{name:"unless",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))?o:"")+"</table>\n</div>\n"},useData:!0}),this.JST["mbean-node-loading"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o;return'<div class="gt-inline-block gt-mbean-expanded-content"\nstyle="margin-left: -10px;">\n<label>'+e.escapeExpression("function"==typeof(o=null!=(o=a.nodeName||(null!=t?t.nodeName:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"nodeName",hash:{},data:i}):o)+'</label>\n\x3c!-- gt-spinner is used for jquery find(), not for css --\x3e\n<div class="hide gt-spinner"\nstyle="position: relative; height: 50px; margin-bottom: 10px;">\n</div>\n</div>\n'},useData:!0}),this.JST["mbean-node-unexpanded"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o;return'<span class="gt-inline-block gt-mbean-unexpanded-content gt-link-color"\nstyle="margin-left: -10px;">\n'+e.escapeExpression("function"==typeof(o=null!=(o=a.nodeName||(null!=t?t.nodeName:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"nodeName",hash:{},data:i}):o)+"\n</span>\n"},useData:!0}),this.JST["mbean-node"]=Handlebars.template({1:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<div data-object-name="'+d("function"==typeof(r=null!=(r=a.objectName||(null!=t?t.objectName:t))?r:s)?r.call(l,{name:"objectName",hash:{},data:i}):r)+'"\nstyle="margin-left: '+d((a.mbeanNodeIndentPx||t&&t.mbeanNodeIndentPx||s).call(l,t,{name:"mbeanNodeIndentPx",hash:{},data:i}))+'px;">\n'+(null!=(o=a.if.call(l,null!=t?t.expanded:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))?o:"")+"</div>\n"},2:function(e,t,a,n,i){var o;return null!=(o=e.invokePartial(n.mbeanNodeExpanded,t,{name:"mbeanNodeExpanded",data:i,helpers:a,partials:n,decorators:e.decorators}))?o:""},4:function(e,t,a,n,i){var o;return null!=(o=e.invokePartial(n.mbeanNodeUnexpanded,t,{name:"mbeanNodeUnexpanded",data:i,helpers:a,partials:n,decorators:e.decorators}))?o:""},6:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing,s=e.escapeExpression;return'<div style="margin-left: '+s((a.mbeanNodeIndentPx||t&&t.mbeanNodeIndentPx||l).call(r,t,{name:"mbeanNodeIndentPx",hash:{},data:i}))+'px;">\n'+s("function"==typeof(o=null!=(o=a.nodeName||(null!=t?t.nodeName:t))?o:l)?o.call(r,{name:"nodeName",hash:{},data:i}):o)+"\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o;return null!=(o=a.if.call(null!=t?t:e.nullContext||{},null!=t?t.objectName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(6,i,0),data:i}))?o:""},usePartial:!0,useData:!0}),this.JST["thread-dump"]=Handlebars.template({1:function(e,t,a,n,i){var o;return"<strong><u>Found deadlock:</u></strong>\n"+(null!=(o=a.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?o:"")+"<br>"},2:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing,s=e.escapeExpression;return'"'+s("function"==typeof(o=null!=(o=a.name||(null!=t?t.name:t))?o:l)?o.call(r,{name:"name",hash:{},data:i}):o)+'"\n&nbsp;&nbsp;'+s("function"==typeof(o=null!=(o=a.desc1||(null!=t?t.desc1:t))?o:l)?o.call(r,{name:"desc1",hash:{},data:i}):o)+"\n&nbsp;&nbsp;"+s("function"==typeof(o=null!=(o=a.desc2||(null!=t?t.desc2:t))?o:l)?o.call(r,{name:"desc2",hash:{},data:i}):o)+"\n"},4:function(e,t,a,n,i){var o;return"<strong><u>Matched threads</u></strong> (matched to currently executing transactions):<br>\n"+(null!=(o=a.each.call(null!=t?t:e.nullContext||{},null!=t?t.transactions:t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?o:"")},5:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return(null!=(o=a.if.call(r,null!=t?t.transactionType:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.each.call(r,null!=t?t.threads:t,{name:"each",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?o:"")+"<br>"},6:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return"<strong>"+d("function"==typeof(r=null!=(r=a.headline||(null!=t?t.headline:t))?r:s)?r.call(l,{name:"headline",hash:{},data:i}):r)+"</strong>"+(null!=(o=a.if.call(l,null!=t?t.traceId:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))?o:"")+"\n<strong>Transaction type: </strong>"+d("function"==typeof(r=null!=(r=a.transactionType||(null!=t?t.transactionType:t))?r:s)?r.call(l,{name:"transactionType",hash:{},data:i}):r)+"\n<strong>Transaction name:</strong> "+d("function"==typeof(r=null!=(r=a.transactionName||(null!=t?t.transactionName:t))?r:s)?r.call(l,{name:"transactionName",hash:{},data:i}):r)+"\n<strong>Duration:</strong> "+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalDurationNanos:t,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds"+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||s).call(l,null!=t?t.totalCpuNanos:t,{name:"ifNotNA",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?o:"")+"\n"},7:function(e,t,a,n,i){var o,r,l,s=null!=t?t:e.nullContext||{},d=a.helperMissing,c=' <a href="jvm/thread-dump?';return r=null!=(r=a.agentIdQueryString||(null!=t?t.agentIdQueryString:t))?r:d,l={name:"agentIdQueryString",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i},o="function"==typeof r?r.call(s,l):r,a.agentIdQueryString||(o=a.blockHelperMissing.call(t,o,l)),null!=o&&(c+=o),c+"modal-trace-id="+e.escapeExpression("function"==typeof(r=null!=(r=a.traceId||(null!=t?t.traceId:t))?r:d)?r.call(s,{name:"traceId",hash:{},data:i}):r)+'&modal-check-live-traces=true" style="padding-left: 5px;">view trace</a>'},8:function(e,t,a,n,i){return""},10:function(e,t,a,n,i){return"\n<strong>CPU time:</strong> "+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.totalCpuNanos:t,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds"},12:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'"'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+'" #'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+"\n&nbsp;&nbsp;&nbsp;java.lang.Thread.State: "+d("function"==typeof(r=null!=(r=a.state||(null!=t?t.state:t))?r:s)?r.call(l,{name:"state",hash:{},data:i}):r)+"\n"+(null!=(o=a.each.call(l,null!=t?t.stackTraceElements:t,{name:"each",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?o:"")},13:function(e,t,a,n,i){return"        "+e.escapeExpression(e.lambda(t,t))+"\n"},15:function(e,t,a,n,i){var o;return"<strong><u>Unmatched threads</u></strong> (this may possibly include currently executing transactions that just started or just ended):<br>\n"+(null!=(o=a.each.call(null!=t?t:e.nullContext||{},null!=t?t.unmatchedThreads:t,{name:"each",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))?o:"")},16:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'"'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+'" #'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+"\n&nbsp;&nbsp;&nbsp;java.lang.Thread.State: "+d("function"==typeof(r=null!=(r=a.state||(null!=t?t.state:t))?r:s)?r.call(l,{name:"state",hash:{},data:i}):r)+"\n"+(null!=(o=a.each.call(l,null!=t?t.stackTraceElements:t,{name:"each",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?o:"")+"<br>"},18:function(e,t,a,n,i){var o,r=e.lambda,l=e.escapeExpression;return'<strong><u>Thread dumping thread</u></strong> (producing this thread dump):<br>\n"'+l(r(null!=(o=null!=t?t.threadDumpingThread:t)?o.name:o,t))+'" #'+l(r(null!=(o=null!=t?t.threadDumpingThread:t)?o.id:o,t))+"\n&nbsp;&nbsp;&nbsp;java.lang.Thread.State: "+l(r(null!=(o=null!=t?t.threadDumpingThread:t)?o.state:o,t))+"\n"+(null!=(o=a.each.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.threadDumpingThread:t)?o.stackTraceElements:o,{name:"each",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?o:"")},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return(null!=(o=a.each.call(r,null!=t?t.deadlockedCycles:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(r,null!=t?t.transactions:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(r,null!=t?t.unmatchedThreads:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(r,null!=t?t.threadDumpingThread:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))?o:"")+"\n"},useData:!0}),this.JST["trace-entry"]=Handlebars.template({1:function(e,t,a,n,i){return".."},3:function(e,t,a,n,i){var o;return'<div class="gt-width2 gt-trace-entry-toggle" data-gt-index="'+e.escapeExpression("function"==typeof(o=null!=(o=a.index||(null!=t?t.index:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:i}):o)+'" style="float: left;">\n<i title="Collapse" class="fa fa-minus-square-o" style="padding: 5px; margin-left: -5px;"></i>\n</div>\n'},5:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing;return(null!=(o=(a.ifLongMessage||t&&t.ifLongMessage||l).call(r,t,{name:"ifLongMessage",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))?o:"")+(null!=(o=(a.ifNonEmptyObject||t&&t.ifNonEmptyObject||l).call(r,null!=t?t.detail:t,{name:"ifNonEmptyObject",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?o:"")},6:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing,s=e.escapeExpression;return'<div class="gt-indent2">\n<div class="gt-inline-block gt-unexpanded-content gt-monospace">\n'+s((a.firstPart||t&&t.firstPart||l).call(r,t,{name:"firstPart",hash:{},data:i}))+'&nbsp;<span class="gt-link-color"><strong\nclass="gt-opensans">...</strong></span>&nbsp;'+s((a.lastPart||t&&t.lastPart||l).call(r,t,{name:"lastPart",hash:{},data:i}))+'\n</div>\n\x3c!-- only convert newlines to <br>s for long messages --\x3e\n<div class="gt-expanded-content gt-with-clip hide"\nstyle="position: relative; display: inline-block;">\n<i class="fa fa-clipboard gt-clip"></i>\n<div class="gt-break-word gt-pre-wrap gt-monospace gt-clip-text gt-expanded-trace-entry"\ndata-gt-trace-entry-index="'+s("function"==typeof(o=null!=(o=a.index||(null!=t?t.index:t))?o:l)?o.call(r,{name:"index",hash:{},data:i}):o)+'">\x3c!--\nlack of space here is significant because of gt-pre-wrap\n--\x3e'+s("function"==typeof(o=null!=(o=a.message||(null!=t?t.message:t))?o:l)?o.call(r,{name:"message",hash:{},data:i}):o)+'\x3c!--\n--\x3e</div>\n<div>\n<div class="hide gt-trace-detail-spinner"></div>\n</div>\n</div>\n</div>\n'},8:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<div class="gt-inline-block gt-content-padding gt-monospace">\n'+e.escapeExpression("function"==typeof(o=null!=(o=a.message||(null!=t?t.message:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"message",hash:{},data:i}):o)+"\n</div>\n</div>\n"},10:function(e,t,a,n,i){var o;return'<div class="gt-content-detail">\n<span class="gt-inline-block gt-unexpanded-content gt-link-color gt-opensans">detail</span>\n<span class="gt-inline-block gt-expanded-content hide">\n<span class="gt-inline-block gt-link-color gt-opensans">detail</span>\n'+(null!=(o=(a.entryDetailHtml||t&&t.entryDetailHtml||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.detail:t,{name:"entryDetailHtml",hash:{},data:i}))?o:"")+"\n</span>\n</div>\n"},12:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return'<div class="'+(null!=(o=(a.errorIndentClass||t&&t.errorIndentClass||a.helperMissing).call(r,null!=t?t.message:t,{name:"errorIndentClass",hash:{},data:i}))?o:"")+'">\n<div>\n<strong>\n<span class="gt-inline-block gt-content-padding gt-break-word gt-pre-wrap">\x3c!--\nlack of space here is significant because of gt-pre-wrap\n--\x3e'+e.escapeExpression(e.lambda(null!=(o=null!=t?t.error:t)?o.message:o,t))+"\x3c!--\n--\x3e</span>\n</strong>\n</div>\n"+(null!=(o=a.if.call(r,null!=(o=null!=t?t.error:t)?o.exception:o,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?o:"")+"</div>\n"},13:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing;return'<div class="'+(null!=(o=(a.exceptionIndentClass||t&&t.exceptionIndentClass||l).call(r,null!=t?t.message:t,{name:"exceptionIndentClass",hash:{},data:i}))?o:"")+'">\n<div class="gt-inline-block gt-unexpanded-content gt-link-color gt-opensans">exception</div>\n<div class="gt-inline-block gt-expanded-content gt-nowrap gt-with-clip hide"\nstyle="overflow-x: auto;">\n<div class="gt-inline-block gt-link-color gt-opensans">exception</div>\n<div class="gt-clip-text">\n'+(null!=(o=(a.exceptionHtml||t&&t.exceptionHtml||l).call(r,null!=(o=null!=t?t.error:t)?o.exception:o,{name:"exceptionHtml",hash:{},data:i}))?o:"")+'\n</div>\n<i class="fa fa-clipboard gt-clip"></i>\n</div>\n</div>\n'},15:function(e,t,a,n,i){var o;return'<div class="gt-indent6">\n<div class="gt-inline-block gt-unexpanded-content gt-link-color gt-opensans">location stack trace</div>\n<div class="gt-inline-block gt-expanded-content gt-nowrap gt-with-clip hide"\nstyle="overflow-x: auto;">\n<div class="gt-inline-block gt-link-color gt-opensans">location stack trace</div>\n<div class="gt-clip-text">\n'+(null!=(o=(a.locationStackTraceHtml||t&&t.locationStackTraceHtml||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.locationStackTraceElements:t,{name:"locationStackTraceHtml",hash:{},data:i}))?o:"")+'\n</div>\n<i class="fa fa-clipboard gt-clip"></i>\n</div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<div id="gtTraceEntry'+d("function"==typeof(r=null!=(r=a.index||(null!=t?t.index:t))?r:s)?r.call(l,{name:"index",hash:{},data:i}):r)+'">\n<div style="width: 102px; vertical-align: top; float: left;"\ntitle="duration '+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.durationNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+" milliseconds, offset "+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.startOffsetNanos:t,{name:"nanosToMillis",hash:{},data:i}))+' milliseconds">\n<div class="gt-trace-entry-bar-outer">\n<div class="gt-trace-entry-bar"\nstyle="margin-left: '+d((a.traceEntryBarLeft||t&&t.traceEntryBarLeft||s).call(l,null!=t?t.startOffsetNanos:t,{name:"traceEntryBarLeft",hash:{},data:i}))+"px; width: "+d((a.traceEntryBarWidth||t&&t.traceEntryBarWidth||s).call(l,t,{name:"traceEntryBarWidth",hash:{},data:i}))+'px;">\n</div>\n</div>\n</div>\n<div style="overflow: hidden; padding-left: '+d((a.traceEntryIndentPx||t&&t.traceEntryIndentPx||s).call(l,t,{name:"traceEntryIndentPx",hash:{},data:i}))+'px;">\n'+(null!=(o=a.if.call(l,null!=t?t.childEntries:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifDisplayMessage||t&&t.ifDisplayMessage||s).call(l,t,{name:"ifDisplayMessage",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.error:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.locationStackTraceElements:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?o:"")+"</div>\n</div>\n"},useData:!0}),this.JST.trace=Handlebars.template({1:function(e,t,a,n,i){return'<button class="gt-flat-btn gt-flat-btn-big gt-link-color download-trace"\nstyle="font-size: 16px; margin: -6px 0;">\nexport\n</button>\n'},3:function(e,t,a,n,i){return"<div>\n<strong>ACTIVE</strong>\n</div>\n"},5:function(e,t,a,n,i){var o;return null!=(o=a.if.call(null!=t?t:e.nullContext||{},null!=t?t.partial:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?o:""},6:function(e,t,a,n,i){return"<div>\n<strong>PARTIAL</strong>\n</div>\n"},8:function(e,t,a,n,i){return"<div>\n<strong>ERROR</strong>\n</div>\n"},10:function(e,t,a,n,i){return"<div>\n<strong>ASYNC</strong>\n</div>\n"},12:function(e,t,a,n,i){var o;return"<div>\n<strong>"+e.escapeExpression("function"==typeof(o=null!=(o=a.agent||(null!=t?t.agent:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"agent",hash:{},data:i}):o)+"</strong>\n</div>\n"},14:function(e,t,a,n,i){var o;return'<div class="gt-trace-attr-name">Error:&nbsp;</div>\n<div class="gt-trace-attr-value">'+e.escapeExpression(e.lambda(null!=(o=null!=t?t.error:t)?o.message:o,t))+"</div>\n"+(null!=(o=a.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.error:t)?o.exception:o,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))?o:"")},15:function(e,t,a,n,i){var o;return'<div class="gt-trace-exception-indent">\n<span class="gt-inline-block gt-unexpanded-content gt-link-color">exception</span>\n<div class="gt-inline-block gt-expanded-content gt-nowrap gt-with-clip hide">\n<div class="gt-link-color">exception</div>\n<div class="gt-monospace gt-clip-text">\n'+(null!=(o=(a.exceptionHtml||t&&t.exceptionHtml||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.error:t)?o.exception:o,{name:"exceptionHtml",hash:{},data:i}))?o:"")+'\n</div>\n<i class="fa fa-clipboard gt-clip"></i>\n</div>\n</div>\n'},17:function(e,t,a,n,i){return".."},19:function(e,t,a,n,i){var o;return null!=(o=a.if.call(null!=t?t:e.nullContext||{},null!=t?t.partial:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:""},21:function(e,t,a,n,i){var o;return'<div class="gt-trace-attr-name">User:&nbsp;</div>\n<div class="gt-trace-attr-value">'+e.escapeExpression("function"==typeof(o=null!=(o=a.user||(null!=t?t.user:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"user",hash:{},data:i}):o)+"</div>\n"},23:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing,s=e.escapeExpression;return'<div class="gt-trace-attr-name">'+s("function"==typeof(o=null!=(o=a.key||(null!=t?t.key:t))?o:l)?o.call(r,{name:"key",hash:{},data:i}):o)+':&nbsp;</div>\n<div class="gt-trace-attr-value">'+s("function"==typeof(o=null!=(o=a.value||(null!=t?t.value:t))?o:l)?o.call(r,{name:"value",hash:{},data:i}):o)+"</div>\n"},25:function(e,t,a,n,i){var o;return(null!=(o=(a.headerDetailHtml||t&&t.headerDetailHtml||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.detail:t,{name:"headerDetailHtml",hash:{},data:i}))?o:"")+"\n"},27:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return'<div class="gt-timers">\n<div class="gt-timers-table">\n<table class="gt-inline-block gt-trace-timer-table" style="border-spacing: 0;">\n<thead>\n<tr>\n<td class="gt-bold gt-breakdown-header" style="text-align: left;">\nBreakdown'+(null!=(o=a.if.call(r,null!=t?t.auxThreadRootTimers:t,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))?o:"")+':\n</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">total&nbsp;(ms)</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">count</td>\n</tr>\n</thead>\n<tbody>\n'+(null!=(o=a.each.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.flattenedTimers:o,{name:"each",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))?o:"")+'<tr class="align-top">\n<td colspan="3" style="text-align: left;">\n<div class="gt-indent2">\n<div style="margin-left: -6px;">\n<span tabindex="-1" id="mftForFocus"></span>\n<button class="gt-flat-btn gt-link-color"\nid="mftShowMore"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.ftShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\nshow more\n</button>\n<span id="mftShowMoreAndLess" style="display: none;">/</span>\n<button class="gt-flat-btn gt-link-color"\nid="mftShowLess"\nstyle="display: none;">\nshow less\n</button>\n<span id="mftShowAll"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.ftShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n/\n<button class="gt-flat-btn gt-link-color">\nshow all\n</button>\n</span>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<div style="display: inline-block; vertical-align: top; margin-top: -1px;">\n<button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle">\nswitch to tree view\n</button>\n</div>\n</div>\n<div class="hide gt-timers-table">\n<table class="gt-inline-block gt-trace-timer-table" style="border-spacing: 0;">\n<thead>\n<tr>\n<td class="gt-bold gt-breakdown-header" style="text-align: left;">\nBreakdown'+(null!=(o=a.if.call(r,null!=t?t.auxThreadRootTimers:t,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))?o:"")+':\n</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">total&nbsp;(ms)</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">count</td>\n</tr>\n</thead>\n<tbody>\n'+(null!=(o=a.each.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.timers:o,{name:"each",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))?o:"")+'<tr class="align-top">\n<td colspan="3" style="text-align: left;">\n<div class="gt-indent2">\n<div style="margin-left: -6px;">\n<span tabindex="-1" id="mttForFocus"></span>\n<button class="gt-flat-btn gt-link-color"\nid="mttShowMore"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.ttShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\nshow more\n</button>\n<span id="mttShowMoreAndLess" style="display: none;">/</span>\n<button class="gt-flat-btn gt-link-color"\nid="mttShowLess"\nstyle="display: none;">\nshow less\n</button>\n<span id="mttShowAll"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.mainBreakdown:t)?o.ttShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n/\n<button class="gt-flat-btn gt-link-color">\nshow all\n</button>\n</span>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle"\nstyle="vertical-align: top; margin-top: -1px;">\nswitch to flattened view\n</button>\n</div>\n</div>\n'},28:function(e,t,a,n,i){return" (Main Thread)"},30:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<tr class="align-top" id="mft'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+'"'+(null!=(o=a.unless.call(l,null!=t?t.show:t,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n<td style="text-align: left;">\n<div class="gt-indent2 gt-break-word gt-break-word-plus gt-second-line-indent">\n'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+"\n</div>\n</td>\n<td>"+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:"")+"</td>\n<td>"+d((a.formatInteger||t&&t.formatInteger||s).call(l,null!=t?t.count:t,{name:"formatInteger",hash:{},data:i}))+"</td>\n</tr>\n"},31:function(e,t,a,n,i){return' style="display: none;"'},33:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<tr class="align-top" id="mtt'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+'"'+(null!=(o=a.unless.call(l,null!=t?t.show:t,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n<td style="text-align: left;">\n<div class="gt-indent2">\n<div class="gt-break-word gt-break-word-plus gt-second-line-indent" style="margin-left: '+d((a.timerIndent||t&&t.timerIndent||s).call(l,t,{name:"timerIndent",hash:{},data:i}))+'px;">\n'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+(null!=(o=a.if.call(l,null!=t?t.extended:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))?o:"")+"\n</div>\n</div>\n</td>\n<td>"+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:"")+"</td>\n<td>"+d((a.formatInteger||t&&t.formatInteger||s).call(l,null!=t?t.count:t,{name:"formatInteger",hash:{},data:i}))+"</td>\n</tr>\n"},34:function(e,t,a,n,i){return" (extended)"},36:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return'<div class="gt-timers">\n<div class="gt-timers-table">\n<table class="gt-inline-block gt-trace-timer-table" style="border-spacing: 0;">\n<thead>\n<tr>\n<td class="gt-bold gt-breakdown-header" style="text-align: left;">\nBreakdown'+(null!=(o=a.if.call(r,null!=t?t.mainThreadRootTimer:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))?o:"")+':\n</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">total&nbsp;(ms)</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">count</td>\n</tr>\n</thead>\n<tbody>\n'+(null!=(o=a.each.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.flattenedTimers:o,{name:"each",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))?o:"")+'<tr class="align-top">\n<td colspan="3" style="text-align: left;">\n<div class="gt-indent2">\n<div style="margin-left: -6px;">\n<span tabindex="-1" id="aftForFocus"></span>\n<button class="gt-flat-btn gt-link-color"\nid="aftShowMore"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.ftShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\nshow more\n</button>\n<span id="aftShowMoreAndLess" style="display: none;">/</span>\n<button class="gt-flat-btn gt-link-color"\nid="aftShowLess"\nstyle="display: none;">\nshow less\n</button>\n<span id="aftShowAll"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.ftShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n/\n<button class="gt-flat-btn gt-link-color">\nshow all\n</button>\n</span>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle"\nstyle="vertical-align: top; margin-top: -1px;">\nswitch to tree view\n</button>\n</div>\n<div class="hide gt-timers-table">\n<table class="gt-inline-block gt-trace-timer-table" style="border-spacing: 0;">\n<thead>\n<tr>\n<td class="gt-bold gt-breakdown-header" style="text-align: left;">\nBreakdown'+(null!=(o=a.if.call(r,null!=t?t.mainThreadRootTimer:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))?o:"")+':\n</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">total&nbsp;(ms)</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">count</td>\n</tr>\n</thead>\n<tbody>\n'+(null!=(o=a.each.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.timers:o,{name:"each",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))?o:"")+'<tr class="align-top">\n<td colspan="3" style="text-align: left;">\n<div class="gt-indent2">\n<div style="margin-left: -6px;">\n<span tabindex="-1" id="attForFocus"></span>\n<button class="gt-flat-btn gt-link-color"\nid="attShowMore"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.ttShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\nshow more\n</button>\n<span id="attShowMoreAndLess" style="display: none;">/</span>\n<button class="gt-flat-btn gt-link-color"\nid="attShowLess"\nstyle="display: none;">\nshow less\n</button>\n<span id="attShowAll"'+(null!=(o=a.unless.call(r,null!=(o=null!=t?t.auxBreakdown:t)?o.ttShowMore:o,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n/\n<button class="gt-flat-btn gt-link-color">\nshow all\n</button>\n</span>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color gt-timers-view-toggle"\nstyle="vertical-align: top; margin-top: -1px;">\nswitch to flattened view\n</button>\n</div>\n</div>\n'},37:function(e,t,a,n,i){return" (Auxiliary Threads)"},39:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<tr class="align-top" id="aft'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+'"'+(null!=(o=a.unless.call(l,null!=t?t.show:t,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n<td style="text-align: left;">\n<div class="gt-indent2 gt-break-word gt-break-word-plus gt-second-line-indent">\n'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+"\n</div>\n</td>\n<td>"+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:"")+"</td>\n<td>"+d((a.formatInteger||t&&t.formatInteger||s).call(l,null!=t?t.count:t,{name:"formatInteger",hash:{},data:i}))+"</td>\n</tr>\n"},41:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<tr class="align-top" id="att'+d("function"==typeof(r=null!=(r=a.id||(null!=t?t.id:t))?r:s)?r.call(l,{name:"id",hash:{},data:i}):r)+'"'+(null!=(o=a.unless.call(l,null!=t?t.show:t,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))?o:"")+'>\n<td style="text-align: left;">\n<div class="gt-indent2">\n<div class="gt-break-word gt-break-word-plus gt-second-line-indent" style="margin-left: '+d((a.timerIndent||t&&t.timerIndent||s).call(l,t,{name:"timerIndent",hash:{},data:i}))+'px;">\n'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+(null!=(o=a.if.call(l,null!=t?t.extended:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))?o:"")+"\n</div>\n</div>\n</td>\n<td>"+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:"")+"</td>\n<td>"+d((a.formatInteger||t&&t.formatInteger||s).call(l,null!=t?t.count:t,{name:"formatInteger",hash:{},data:i}))+"</td>\n</tr>\n"},43:function(e,t,a,n,i){var o;return'<div class="gt-timers">\n<div class="gt-timers-table">\n<table class="gt-inline-block" style="border-spacing: 0;">\n<thead>\n<tr>\n<td class="gt-bold gt-breakdown-header" style="text-align: left;">\nBreakdown (Async Timers):\n</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">total&nbsp;(ms)</td>\n<td class="gt-breakdown-header" style="font-weight: 600;">count</td>\n</tr>\n</thead>\n<tbody>\n'+(null!=(o=a.each.call(null!=t?t:e.nullContext||{},null!=t?t.asyncTimers:t,{name:"each",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))?o:"")+"</tbody>\n</table>\n</div>\n</div>\n"},44:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<tr class="align-top">\n<td style="text-align: left;">\n<div class="gt-indent2 gt-break-word gt-break-word-plus gt-second-line-indent">\n'+d("function"==typeof(r=null!=(r=a.name||(null!=t?t.name:t))?r:s)?r.call(l,{name:"name",hash:{},data:i}):r)+"\n</div>\n</td>\n<td>"+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.totalNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))?o:"")+"</td>\n<td>"+d((a.formatInteger||t&&t.formatInteger||s).call(l,null!=t?t.count:t,{name:"formatInteger",hash:{},data:i}))+"</td>\n</tr>\n"},46:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing;return'<div class="gt-bold gt-breakdown-header">\nJVM Thread Stats'+(null!=(o=a.if.call(r,null!=t?t.auxThreadStats:t,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))?o:"")+"\n</div>\n"+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.mainThreadStats:t)?o.totalCpuNanos:o,{name:"ifNotNA",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.mainThreadStats:t)?o.totalBlockedNanos:o,{name:"ifNotNA",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.mainThreadStats:t)?o.totalWaitedNanos:o,{name:"ifNotNA",hash:{},fn:e.program(51,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.mainThreadStats:t)?o.totalAllocatedBytes:o,{name:"ifNotNA",hash:{},fn:e.program(53,i,0),inverse:e.noop,data:i}))?o:"")},47:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>CPU time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.mainThreadStats:t)?o.totalCpuNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},49:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Blocked time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.mainThreadStats:t)?o.totalBlockedNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},51:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Waited time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.mainThreadStats:t)?o.totalWaitedNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},53:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Allocated memory:</span>\n'+e.escapeExpression((a.formatAllocatedBytes||t&&t.formatAllocatedBytes||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.mainThreadStats:t)?o.totalAllocatedBytes:o,{name:"formatAllocatedBytes",hash:{},data:i}))+"\n</div>\n"},55:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{},l=a.helperMissing;return'<div class="gt-bold gt-breakdown-header">\nJVM Thread Stats'+(null!=(o=a.if.call(r,null!=t?t.mainThreadStats:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))?o:"")+"\n</div>\n"+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.auxThreadStats:t)?o.totalCpuNanos:o,{name:"ifNotNA",hash:{},fn:e.program(56,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.auxThreadStats:t)?o.totalBlockedNanos:o,{name:"ifNotNA",hash:{},fn:e.program(58,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.auxThreadStats:t)?o.totalWaitedNanos:o,{name:"ifNotNA",hash:{},fn:e.program(60,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifNotNA||t&&t.ifNotNA||l).call(r,null!=(o=null!=t?t.auxThreadStats:t)?o.totalAllocatedBytes:o,{name:"ifNotNA",hash:{},fn:e.program(62,i,0),inverse:e.noop,data:i}))?o:"")},56:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>CPU time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.auxThreadStats:t)?o.totalCpuNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},58:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Blocked time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.auxThreadStats:t)?o.totalBlockedNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},60:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Waited time:</span>\n'+e.escapeExpression((a.nanosToMillis||t&&t.nanosToMillis||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.auxThreadStats:t)?o.totalWaitedNanos:o,{name:"nanosToMillis",hash:{},data:i}))+" milliseconds\n</div>\n"},62:function(e,t,a,n,i){var o;return'<div class="gt-indent2">\n<span>Allocated memory:</span>\n'+e.escapeExpression((a.formatAllocatedBytes||t&&t.formatAllocatedBytes||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.auxThreadStats:t)?o.totalAllocatedBytes:o,{name:"formatAllocatedBytes",hash:{},data:i}))+"\n</div>\n"},64:function(e,t,a,n,i){var o;return'<div>\n<button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-entries-toggle">\n<span class="gt-link-color">Trace entries ('+e.escapeExpression("function"==typeof(o=null!=(o=a.entryCount||(null!=t?t.entryCount:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"entryCount",hash:{},data:i}):o)+')</span>\n</button>\n<div>\n<div class="hide gt-trace-detail-spinner"></div>\n</div>\n</div>\n<div style="margin: 10px 0 0 1em;">\n<div id="entries" style="font-family: Cousine, monospace;"></div>\n</div>\n'},66:function(e,t,a,n,i){var o,r=null!=t?t:e.nullContext||{};return(null!=(o=a.if.call(r,null!=t?t.mainThreadProfileSampleCount:t,{name:"if",hash:{},fn:e.program(67,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(r,null!=t?t.auxThreadProfileSampleCount:t,{name:"if",hash:{},fn:e.program(69,i,0),inverse:e.noop,data:i}))?o:"")},67:function(e,t,a,n,i){var o;return'<div style="margin-top: 10px;">\n<button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-main-thread-profile-toggle">\n<span class="gt-link-color">Profile ('+e.escapeExpression("function"==typeof(o=null!=(o=a.mainThreadProfileSampleCount||(null!=t?t.mainThreadProfileSampleCount:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"mainThreadProfileSampleCount",hash:{},data:i}):o)+')</span>\n</button>\n<div>\n<div class="hide gt-trace-detail-spinner"></div>\n</div>\n</div>\n<div style="margin: 10px 0;">\n<div class="gt-indent2 gt-nowrap hide" id="mainThreadProfileOuter">\n<div style="padding-bottom: 10px;">\n<input class="form-control gt-profile-text-filter"\nstyle="display: inline-block; width: 25em;"\nplaceholder="filter the profile tree">\n</div>\n<div class="gt-profile"></div>\n</div>\n</div>\n'},69:function(e,t,a,n,i){var o;return'<div style="margin-top: 10px;">\n<button class="gt-flat-btn gt-flat-btn-big-pad1aligned gt-aux-thread-profile-toggle">\n<span class="gt-link-color">Auxiliary Thread Profile ('+e.escapeExpression("function"==typeof(o=null!=(o=a.auxThreadProfileSampleCount||(null!=t?t.auxThreadProfileSampleCount:t))?o:a.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"auxThreadProfileSampleCount",hash:{},data:i}):o)+')</span>\n</button>\n<div>\n<div class="hide gt-trace-detail-spinner"></div>\n</div>\n</div>\n<div style="margin: 10px 0;">\n<div class="gt-indent2 gt-nowrap hide" id="auxThreadProfileOuter">\n<div style="padding-bottom: 10px;">\n<input class="form-control gt-profile-text-filter"\nstyle="display: inline-block; width: 25em;"\nplaceholder="filter the profile tree">\n</div>\n<div class="gt-profile"></div>\n</div>\n</div>\n'},71:function(e,t,a,n,i){var o;return null!=(o=(a.ifExistenceExpired||t&&t.ifExistenceExpired||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.profileExistence:t,{name:"ifExistenceExpired",hash:{},fn:e.program(72,i,0),inverse:e.program(74,i,0),data:i}))?o:""},72:function(e,t,a,n,i){return'<div style="margin: 10px 0;">\n<strong>\nEntries and profile for this trace have expired\n</strong>\n<em>\n(see <a href="admin/storage#trace-capped-database-size">Configuration &gt; Storage &gt; Trace detail data</a>)\n</em>\n</div>\n'},74:function(e,t,a,n,i){return'<div style="margin: 10px 0;">\n<strong>\nEntries for this trace have expired\n</strong>\n<em>\n(see <a href="admin/storage#trace-capped-database-size">Configuration &gt; Storage &gt; Trace detail data</a>)\n</em>\n</div>\n'},76:function(e,t,a,n,i){var o;return null!=(o=(a.ifExistenceExpired||t&&t.ifExistenceExpired||a.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.profileExistence:t,{name:"ifExistenceExpired",hash:{},fn:e.program(77,i,0),inverse:e.noop,data:i}))?o:""},77:function(e,t,a,n,i){return'<div style="margin: 10px 0;">\n<strong>\nProfile for this trace has expired\n</strong>\n<em>\n(see <a href="admin/storage#trace-capped-database-size">Configuration &gt; Storage &gt; Trace detail data</a>)\n</em>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,i){var o,r,l=null!=t?t:e.nullContext||{},s=a.helperMissing,d=e.escapeExpression;return'<div class="gt-break-word gt-second-line-indent"\nstyle="margin-bottom: 10px;">\n<strong style="font-size: 18px;">'+d("function"==typeof(r=null!=(r=a.headline||(null!=t?t.headline:t))?r:s)?r.call(l,{name:"headline",hash:{},data:i}):r)+"</strong>\n"+(null!=(o=a.if.call(l,null!=t?t.showExport:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+"</div>\n"+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.error:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.async:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.agent:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))?o:"")+'<div class="gt-trace-attr-name">Transaction type:&nbsp;</div>\n<div class="gt-trace-attr-value">'+d("function"==typeof(r=null!=(r=a.transactionType||(null!=t?t.transactionType:t))?r:s)?r.call(l,{name:"transactionType",hash:{},data:i}):r)+'</div>\n<div class="gt-trace-attr-name">Transaction name:&nbsp;</div>\n<div class="gt-trace-attr-value">'+d("function"==typeof(r=null!=(r=a.transactionName||(null!=t?t.transactionName:t))?r:s)?r.call(l,{name:"transactionName",hash:{},data:i}):r)+"</div>\n"+(null!=(o=a.if.call(l,null!=t?t.error:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))?o:"")+'<div>\n<div class="gt-trace-attr-name">Start:&nbsp;</div>\n<div class="gt-trace-attr-value">'+d((a.date||t&&t.date||s).call(l,null!=t?t.startTime:t,{name:"date",hash:{},data:i}))+'</div>\n</div>\n<div>\n<div class="gt-trace-attr-name">Duration:&nbsp;</div>\n<div class="gt-trace-attr-value">\x3c!--\nlack of space here is significant because of gt-pre-wrap (which is mixin to gt-trace-attr-value)\n--\x3e'+d((a.nanosToMillis||t&&t.nanosToMillis||s).call(l,null!=t?t.durationNanos:t,{name:"nanosToMillis",hash:{},data:i}))+(null!=(o=a.if.call(l,null!=t?t.active:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.program(19,i,0),data:i}))?o:"")+"&nbsp;milliseconds\x3c!--\n--\x3e</div>\n</div>\n"+(null!=(o=a.if.call(l,null!=t?t.user:t,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.eachKeyValuePair||t&&t.eachKeyValuePair||s).call(l,null!=t?t.attributes:t,{name:"eachKeyValuePair",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.detail:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.mainThreadRootTimer:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.auxThreadRootTimers:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.asyncTimers:t,{name:"if",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.mainThreadStats:t,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=a.if.call(l,null!=t?t.auxThreadStats:t,{name:"if",hash:{},fn:e.program(55,i,0),inverse:e.noop,data:i}))?o:"")+"<br>\n"+(null!=(o=(a.ifExistenceYes||t&&t.ifExistenceYes||s).call(l,null!=t?t.entriesExistence:t,{name:"ifExistenceYes",hash:{},fn:e.program(64,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifExistenceYes||t&&t.ifExistenceYes||s).call(l,null!=t?t.profileExistence:t,{name:"ifExistenceYes",hash:{},fn:e.program(66,i,0),inverse:e.noop,data:i}))?o:"")+(null!=(o=(a.ifExistenceExpired||t&&t.ifExistenceExpired||s).call(l,null!=t?t.entriesExistence:t,{name:"ifExistenceExpired",hash:{},fn:e.program(71,i,0),inverse:e.program(76,i,0),data:i}))?o:"")},useData:!0}),angular.module("glowroot").run(["$templateCache",function(e){"use strict";e.put("views/admin.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> <span class="gt-inline-block"> Administration </span> </div> </div> <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <div gt-sidebar-item gt-display="Agents" gt-url="admin/agent-list" gt-active="currentUrl() === \'admin/agent-list\'" gt-sub-active="currentUrl() === \'admin/agent\'" ng-if="layout.central"> </div> <div gt-sidebar-item gt-display="Users" gt-url="admin/user-list" gt-active="currentUrl() === \'admin/user-list\'" gt-sub-active="currentUrl() === \'admin/user\'"> </div> <div gt-sidebar-item gt-display="Roles" gt-url="admin/role-list" gt-active="currentUrl() === \'admin/role-list\'" gt-sub-active="currentUrl() === \'admin/role\'"> </div> <div gt-sidebar-item gt-display="Web" gt-url="admin/web"> </div> <div gt-sidebar-item gt-display="Storage" gt-url="admin/storage"> </div> <div gt-sidebar-item gt-display="SMTP" gt-url="admin/smtp"> </div> <div gt-sidebar-item gt-display="HTTP proxy" gt-url="admin/http-proxy"> </div> <div gt-sidebar-item gt-display="Integrations" gt-url="admin/integration-list" gt-active="currentUrl() === \'admin/integration-list\'" gt-sub-active="currentUrl().lastIndexOf(\'admin/integration/\', 0) === 0"> </div> </ul> </div> </div> <div ui-view class="gt-main-column"> </div> <div class="modal" id="confirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3></h3> </div> <div class="modal-body"> <p></p> </div> <div class="modal-footer"> <button class="btn btn-default" id="confirmationModalButton">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/admin/agent-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Agents</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!agents.length" style="font-style: italic"> There are no agents </div> <div ng-repeat="agent in agents" style="padding-bottom: 8px"> <div> <a ng-href="admin/agent?agent-rollup-id={{agent.id}}" ng-style="{\'margin-left\': (20 * agent.depth) + \'px\'}"> {{agent.display}} </a> <span ng-if="agent.lastCaptureTime" style="margin-left: 10px"> (last capture time {{agent.lastCaptureTime | date:\'medium\'}}) </span> </div> </div> </div> </div> </div> '),e.put("views/admin/agent.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/agent-list"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Agents <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Agent ID" gt-model="config.id" gt-disabled="true" gt-width="40em" class="gt-form-group-without-help-block"> </div> <div gt-form-group gt-label="Display" gt-model="config.display" gt-disabled="!layout.adminEdit" gt-width="40em" gt-placeholder="{{config.id}}"> <div class="help-block"> Display defaults to the Agent ID if not set. </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button-group> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> <button ng-click="displayDeleteConfirmationModal()" class="btn btn-default gt-button-spacing"> Delete </button> </div> </div> </div> </div> </div> </div> <div class="modal" id="deleteConfirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3>Remove agent from the UI</h3> </div> <div class="modal-body"> <p>Are you sure you want to remove this agent from the UI?</p> <p style="margin-top: 25px"> Note: this will not delete the data in Cassandra that was captured from this agent. </p> <p style="margin-top: 25px"> Note: the agent will re-appear in the UI if any new data is received from this agent. </p> <div style="min-height: 60px"> <div class="gt-inline-block"> <div gt-spinner gt-show="deleting" class="gt-left-aligned-spinner" style="width: 50px; margin-bottom: -30px"> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="delete()">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/admin/http-proxy.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> HTTP Proxy configuration </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal gt-sometimes-legend-padding-smtp" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Host" gt-model="config.host" gt-disabled="!layout.adminEdit" gt-width="20em"> <div class="help-block"> HTTP Proxy server hostname or IP address. Currently this is only used by the PagerDuty integration. </div> </div> <div gt-form-group gt-label="Port" gt-model="config.port" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!layout.adminEdit" gt-width="7em"> <div class="help-block"> Defaults to port 80. </div> </div> <div gt-form-group gt-label="Username" gt-model="config.username" gt-disabled="!layout.adminEdit" gt-width="20em" class="gt-form-group-without-help-block"> </div> <div class="form-group gt-form-group-without-help-block" ng-class="{\'has-error\': formCtrl.password.$invalid}"> <label class="col-lg-3 control-label" for="password"> Password </label> <div class="col-lg-9"> <input type="password" class="form-control" ng-model="password" ng-disabled="!layout.adminEdit" name="password" id="password" ng-change="onPasswordChange()" ng-click="onPasswordClick()" style="max-width: 20em; display: inline-block"> </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> <div ng-form ng-if="layout.adminEdit" class="form-horizontal" style="padding-top: 30px"> <fieldset class="gt-send-email-fieldset"> <legend>Test HTTP proxy</legend> <div class="form-group"> <label class="col-lg-3 control-label" for="testUrl"> Test url </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="page.testUrl" id="testUrl" style="max-width: 25em; float: left; vertical-align: top; margin-right: 10px; margin-bottom: 10px"> <div gt-button gt-btn-class="btn-default" gt-label="Test" gt-click="testHttpProxy(deferred)" gt-disabled="!page.testUrl || !config.host" style="vertical-align: top; margin-bottom: 10px"> </div> </div> </div> <div ng-if="testHttpProxyResponse" style="padding: 0 30px 30px"> <textarea ng-model="testHttpProxyResponse" style="width: 100%; height: 400px">\n          </textarea> </div> </fieldset> </div> </div> </div> '),e.put("views/admin/integration-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Integrations</h2> </div> <div class="panel-body"> <div style="margin: 15px"> <div style="padding-bottom: 8px"> <a ng-href="admin/integration/ldap">LDAP</a> </div> <div style="padding-bottom: 8px"> <a ng-href="admin/integration/pager-duty">PagerDuty</a> </div> <div style="padding-bottom: 8px"> <a ng-href="admin/integration/healthchecks-io">Healthchecks.io</a> </div> </div> </div> </div> '),e.put("views/admin/integration/healthchecks-io.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/integration-list"> Return to integration list </a> Healthchecks.io </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="layout.central" class="alert alert-danger"> Use glowroot agent (with embedded database and UI, not pointing to central) to monitor glowroot central itself. </div> <div ng-form gt-form-autofocus-on-first-input ng-if="!layout.central" class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Ping URL" gt-model="config.pingUrl" gt-disabled="!layout.adminEdit" gt-width="40em" class="gt-form-group-without-help-block"> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> '),e.put("views/admin/integration/ldap.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/integration-list"> Return to integration list </a> LDAP </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <fieldset> <legend style="margin-bottom: 20px">Connection</legend> <div gt-form-group gt-label="Host" gt-model="config.host" gt-disabled="!layout.adminEdit" gt-width="20em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> LDAP server hostname or IP address. </div> </div> <div gt-form-group gt-label="Port" gt-model="config.port" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!layout.adminEdit" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Defaults to port 389 for non-SSL, and 636 for SSL. </div> </div> <div gt-form-group gt-type="checkbox" gt-label="Use SSL" gt-model="config.ssl" gt-disabled="!layout.adminEdit" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" class="gt-form-group-without-help-block"> </div> <div gt-form-group gt-label="Username" gt-model="config.username" gt-required="config.host" gt-disabled="!layout.adminEdit" gt-width="20em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Username that Glowroot uses to bind and run LDAP queries. </div> </div> <div class="form-group" ng-class="{\'has-error\': formCtrl.password.$invalid}"> <label class="col-lg-4 control-label" for="password"> Password </label> <div class="col-lg-8"> <input type="password" class="form-control" ng-model="password" ng-required="config.host" ng-disabled="!layout.adminEdit" name="password" id="password" ng-change="onPasswordChange()" ng-click="onPasswordClick()" style="max-width: 20em; display: inline-block"> <div class="help-block"> Password that Glowroot uses to bind and run LDAP queries. </div> </div> </div> </fieldset> <fieldset> <legend style="margin-bottom: 20px">Structure</legend> <div gt-form-group gt-label="User base DN" gt-model="config.userBaseDn" gt-required="config.host" gt-disabled="!layout.adminEdit" gt-width="25em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Base DN for locating users, e.g. <em>ou=Users,dc=example,dc=com</em> </div> </div> <div gt-form-group gt-label="User search filter" gt-model="config.userSearchFilter" gt-required="config.host" gt-disabled="!layout.adminEdit" gt-width="25em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This search filter is used to find the user based on the username they enter during login. The placeholder {0} in the filter will be populated with the username. For active directory this filter is likely <em>sAMAccountName={0}</em> </div> </div> <div gt-form-group gt-label="Group base DN" gt-model="config.groupBaseDn" gt-required="config.host" gt-disabled="!layout.adminEdit" gt-width="25em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Base DN for locating groups, e.g. <em>ou=Groups,dc=example,dc=com</em> </div> </div> <div gt-form-group gt-label="Group search filter" gt-model="config.groupSearchFilter" gt-required="config.host" gt-disabled="!layout.adminEdit" gt-width="25em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This search filter is used to find the groups that a user is a member of. The placeholder {0} in the filter will be populated with the user DN. For active directory this filter is likely <em>member={0}</em> </div> </div> </fieldset> <fieldset ng-repeat="roleMappingBlock in page.roleMappingBlocks"> <legend style="margin-bottom: 20px">Role mapping</legend> <div gt-form-group gt-label="LDAP group DN" gt-model="roleMappingBlock.ldapGroupDn" gt-disabled="!layout.adminEdit" gt-width="40em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Full distinguished name (DN). </div> </div> <div class="form-group gt-form-group-without-help-block" ng-class="{\'has-error\': formCtrl[\'role\' + $index].$invalid}"> <label class="col-lg-4 control-label" for="role{{$index}}"> Glowroot roles </label> <div class="col-lg-8"> <div class="gt-role-permission-block-last-checkbox"> <select multiple="multiple" class="form-control" ng-model="roleMappingBlock.glowrootRoles" ng-options="glowrootRole as glowrootRole for glowrootRole in allGlowrootRoles" name="role{{$index}}" id="role{{$index}}" style="width: auto; min-width: 200px; display: inline; border-top-right-radius: 0; border-bottom-right-radius: 0"> </select> </div> <button class="gt-ldap-role-mapping-block-remove btn btn-default" ng-click="removeRoleMappingBlock(roleMappingBlock)" ng-if="layout.adminEdit"> Remove this role mapping </button> </div> </div> </fieldset> <fieldset ng-if="layout.adminEdit"> <legend>Add {{page.roleMappingBlocks.length ? \'another\' : \'a\'}} role mapping</legend> <button class="btn btn-default" ng-click="addRoleMappingBlock()" style="margin-bottom: 23px; margin-left: 14px"> Add </button> </fieldset> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-4 col-lg-8 gt-sometimes-legend-padding-storage"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> <div ng-form ng-if="layout.adminEdit" class="form-horizontal" style="padding-top: 30px"> <fieldset style="padding-bottom: 30px"> <legend>Test LDAP authentication</legend> <div class="gt-test-ldap-alignment"> <div class="form-group" style="margin-bottom: 0"> <label class="col-lg-4 control-label" for="authTestUsername"> Username </label> <div class="col-lg-8"> <input type="text" class="form-control" ng-model="page.authTestUsername" id="authTestUsername" style="max-width: 15em; vertical-align: top; margin-right: 10px; margin-bottom: 10px"> </div> </div> <div class="form-group" style="margin-bottom: 0"> <label class="col-lg-4 control-label" for="authTestPassword"> Password </label> <div class="col-lg-8" style="padding-top: 10px"> <input type="password" class="form-control" ng-model="page.authTestPassword" id="authTestPassword" style="max-width: 15em; vertical-align: top; margin-right: 10px; margin-bottom: 10px"> </div> </div> <div class="col-lg-offset-4 col-lg-8" style="padding-top: 10px"> <div gt-button gt-btn-class="btn-default" gt-label="Test" gt-click="testLdap(deferred)" gt-disabled="!page.authTestUsername || !page.authTestPassword || !config.host || formCtrl.$invalid" style="vertical-align: top; margin-bottom: 10px"> </div> </div> </div> </fieldset> </div> </div> </div> '),e.put("views/admin/integration/pager-duty.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/integration-list"> Return to integration list </a> PagerDuty </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <fieldset ng-repeat="integrationKey in config.integrationKeys"> <legend style="margin-bottom: 20px">Integration key</legend> <div gt-form-group gt-label="Integration key" gt-model="integrationKey.key" gt-required="true" gt-disabled="!layout.adminEdit || !integrationKey.new" gt-width="40em"> <div class="help-block"> This is the <em>Integration Key</em> displayed in PagerDuty after creating an integration of type <em>Use our API directly (Events API&nbsp;v2)</em>. </div> </div> <div gt-form-group gt-label="Display" gt-model="integrationKey.display" gt-required="true" gt-disabled="!layout.adminEdit" gt-width="40em"> <div class="help-block"> Can be any text. Only used when displaying the integration key on the alert configuration page. </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <button class="btn btn-default" ng-click="removeIntegrationKey(integrationKey)" ng-if="layout.adminEdit"> Remove this role mapping </button> </div> </div> </fieldset> <fieldset ng-if="layout.adminEdit"> <legend>Add {{config.integrationKeys.length ? \'another\' : \'an\'}} integration key</legend> <button class="btn btn-default" ng-click="addIntegrationKey()" style="margin-bottom: 23px; margin-left: 14px"> Add </button> </fieldset> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9 gt-sometimes-legend-padding"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> '),e.put("views/admin/role-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Roles</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-repeat="role in roles" style="padding-bottom: 8px"> <div> <a ng-href="admin/role?name={{role.name}}">{{role.name}}</a> </div> </div> <div ng-if="loaded && layout.adminEdit" style="margin-top: 30px"> <a class="btn btn-primary" href="admin/role?new"> Add new </a> </div> </div> </div> </div> '),e.put("views/admin/role.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/role-list"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Roles <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Name" gt-model="config.name" gt-width="40em" gt-required="loaded" gt-disabled="name" ng-if="!layout.central" class="gt-form-group-without-help-block"> </div> <div class="form-group gt-form-group-without-help-block" ng-if="!layout.central"> <label class="col-lg-3 control-label"> Permissions </label> <div class="col-lg-9"> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.transaction._" ng-disabled="!layout.adminEdit">Transactions </label> </div> <div class="checkbox" ng-class="{\'has-error\': transactionOverviewRequired(page.permissions) && !page.permissions.transaction.overview}"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.overview" ng-disabled="page.permissions.transaction._ || !layout.adminEdit" ng-required="transactionOverviewRequired(page.permissions)">Overview <span ng-if="transactionOverviewRequired(page.permissions) && !page.permissions.transaction.overview" style="font-style: italic"> -- required for other transaction permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.traces" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.queries" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Queries </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.serviceCalls" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Service calls </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.profile" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Profile </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.error._" ng-disabled="!layout.adminEdit">Errors </label> </div> <div class="checkbox" ng-class="{\'has-error\': page.permissions.error.traces && !page.permissions.error.overview}"> <label ng-class="{\'gt-label-disabled\': page.permissions.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.error.overview" ng-disabled="page.permissions.error._ || !layout.adminEdit" ng-required="page.permissions.error.traces">Overview <span ng-if="page.permissions.error.traces && !page.permissions.error.overview" style="font-style: italic"> -- required for other error permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.error.traces" ng-disabled="page.permissions.error._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.jvm._" ng-disabled="!layout.adminEdit">JVM </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.gauges" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.threadDump" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Thread dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.heapDump" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Heap dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.heapHistogram" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Heap histogram </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.mbeanTree" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">MBean tree </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.systemProperties" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">System properties </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.environment" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Environment </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.incident" ng-disabled="!layout.adminEdit">Incidents </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.config._" ng-disabled="!layout.adminEdit">Configuration </label> </div> <div class="checkbox" ng-class="{\'has-error\': !page.permissions.config.view && viewConfigRequired(page.permissions)}"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.config.view" ng-disabled="page.permissions.config._ || !layout.adminEdit" ng-required="viewConfigRequired(page.permissions)"> View (Transactions, Gauges, UI, Plugins, Instrumentation, Advanced) <span ng-if="!page.permissions.config.view && viewConfigRequired(page.permissions)" style="font-style: italic"> -- required for edit permission </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.config.edit._" ng-disabled="page.permissions.config._ || !layout.adminEdit">Edit </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.transaction" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Transactions </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.gauge" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.alert" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Alerts </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.ui" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">UI </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.plugin" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Plugins </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.instrumentation" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Instrumentation </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.advanced" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Advanced </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.admin._" ng-disabled="!layout.adminEdit">Administration (Users, Roles, Web, Storage, SMTP, HTTP proxy, Integrations) </label> </div> <div class="checkbox" ng-class="{\'has-error\': !page.permissions.admin.view && page.permissions.admin.edit}"> <label ng-class="{\'gt-label-disabled\': page.permissions.admin._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.admin.view" ng-disabled="page.permissions.admin._ || !layout.adminEdit" ng-required="page.permissions.admin.edit">View <span ng-if="!page.permissions.admin.view && page.permissions.admin.edit" style="font-style: italic"> -- required for edit permission </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.admin._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.admin.edit" ng-disabled="page.permissions.admin._ || !layout.adminEdit">Edit </label> </div> </div> </div> <fieldset ng-if="layout.central" style="padding-bottom: 20px"> <legend style="margin-bottom: 5px">Role name</legend> <div gt-form-group gt-label="Name" gt-model="config.name" gt-width="40em" gt-required="loaded" gt-disabled="name" class="gt-form-group-without-help-block"> </div> </fieldset> <fieldset ng-if="layout.central" style="padding-bottom: 25px"> <legend style="margin-bottom: 5px">All agents</legend> <div class="col-lg-9 col-lg-offset-3"> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.transaction._" ng-disabled="!layout.adminEdit">Transactions </label> </div> <div class="checkbox" ng-class="{\'has-error\': transactionOverviewRequired(page.permissions) && !page.permissions.transaction.overview}"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.overview" ng-disabled="page.permissions.transaction._ || !layout.adminEdit" ng-required="transactionOverviewRequired(page.permissions)">Overview <span ng-if="transactionOverviewRequired(page.permissions) && !page.permissions.transaction.overview" style="font-style: italic"> -- required for other transaction permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.traces" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.queries" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Queries </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.serviceCalls" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Service calls </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.transaction.profile" ng-disabled="page.permissions.transaction._ || !layout.adminEdit">Profile </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.error._" ng-disabled="!layout.adminEdit">Errors </label> </div> <div class="checkbox" ng-class="{\'has-error\': page.permissions.error.traces && !page.permissions.error.overview}"> <label ng-class="{\'gt-label-disabled\': page.permissions.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.error.overview" ng-disabled="page.permissions.error._ || !layout.adminEdit" ng-required="page.permissions.error.traces">Overview <span ng-if="page.permissions.error.traces && !page.permissions.error.overview" style="font-style: italic"> -- required for other error permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.error.traces" ng-disabled="page.permissions.error._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.jvm._" ng-disabled="!layout.adminEdit">JVM </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.gauges" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.threadDump" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Thread dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.heapDump" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Heap dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.heapHistogram" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Heap histogram </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.mbeanTree" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">MBean tree </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.systemProperties" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">System properties </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.jvm.environment" ng-disabled="page.permissions.jvm._ || !layout.adminEdit">Environment </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.syntheticMonitor" ng-disabled="!layout.adminEdit">Synthetic monitors </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.incident" ng-disabled="!layout.adminEdit">Incidents </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.config._" ng-disabled="!layout.adminEdit">Configuration </label> </div> <div class="checkbox" ng-class="{\'has-error\': !page.permissions.config.view && viewConfigRequired(page.permissions)}"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.config.view" ng-disabled="page.permissions.config._ || !layout.adminEdit" ng-required="viewConfigRequired(page.permissions)"> View (Transactions, Gauges, Synthetic monitors, Alerts, UI, Plugins, Instrumentation, Advanced) <span ng-if="!page.permissions.config.view && viewConfigRequired(page.permissions)" style="font-style: italic"> -- required for edit permission </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.config.edit._" ng-disabled="page.permissions.config._ || !layout.adminEdit">Edit </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.transaction" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Transactions </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.gauge" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.syntheticMonitor" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Synthetic monitors </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.alert" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Alerts </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.ui" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">UI </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.plugin" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Plugins </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.instrumentation" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Instrumentation </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': page.permissions.config._ || page.permissions.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="page.permissions.config.edit.advanced" ng-disabled="page.permissions.config._ || page.permissions.config.edit._ || !layout.adminEdit">Advanced </label> </div> </div> </fieldset> <fieldset ng-if="layout.central" style="padding-bottom: 25px"> <legend style="margin-bottom: 5px">Server administration</legend> <div class="col-lg-9 col-lg-offset-3"> <div class="checkbox"> <label> <input type="checkbox" ng-model="page.permissions.admin._" ng-disabled="!layout.adminEdit">Administration (Users, Roles, Web, Storage, SMTP, HTTP proxy, Integrations) </label> </div> <div class="checkbox" ng-class="{\'has-error\': !page.permissions.admin.view && page.permissions.admin.edit}"> <label ng-class="{\'gt-label-disabled\': page.permissions.admin._}" style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.admin.view" ng-disabled="page.permissions.admin._ || !layout.adminEdit" ng-required="page.permissions.admin.edit">View <span ng-if="!page.permissions.admin.view && page.permissions.admin.edit" style="font-style: italic"> -- required for edit permission </span> </label> </div> <div ng-class="{\'gt-label-disabled\': page.permissions.admin._}" class="checkbox"> <label style="margin-left: 30px"> <input type="checkbox" ng-model="page.permissions.admin.edit" ng-disabled="page.permissions.admin._ || !layout.adminEdit">Edit </label> </div> </div> </fieldset> <fieldset ng-repeat="permissionBlock in page.permissionBlocks" style="padding-bottom: 25px"> <legend style="margin-bottom: 5px">Agent specific permission block</legend> <div class="col-lg-9 col-lg-offset-3"> <div style="padding: 15px 0 10px"> <div ng-class="{\'has-error\': !permissionBlock.agentRollupIds.length}"> <ui-select multiple="multiple" ng-model="permissionBlock.agentRollupIds" theme="bootstrap" close-on-select="false" title="Choose agents" remove-selected="false" ng-required="true" ng-disabled="!layout.adminEdit" style="min-width: 200px; max-width: 650px"> <ui-select-match placeholder="Select agents...">{{$item.display}}</ui-select-match> <ui-select-choices repeat="agentRollup.id as agentRollup in allAgentRollups | filter: {display: $select.search}"> <div ng-bind-html="agentRollup.indentedDisplay | highlight: $select.search"></div> </ui-select-choices> </ui-select> </div> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.transaction._" ng-disabled="!layout.adminEdit">Transactions </label> </div> <div class="checkbox" ng-class="{\'has-error\': transactionOverviewRequired(permissionBlock) && !permissionBlock.transaction.overview}"> <label ng-class="{\'gt-label-disabled\': permissionBlock.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.transaction.overview" ng-disabled="permissionBlock.transaction._ || !layout.adminEdit" ng-required="transactionOverviewRequired(permissionBlock)">Overview <span ng-if="transactionOverviewRequired(permissionBlock) && !permissionBlock.transaction.overview" style="font-style: italic"> -- required for other transaction permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.transaction.traces" ng-disabled="permissionBlock.transaction._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.transaction.queries" ng-disabled="permissionBlock.transaction._ || !layout.adminEdit">Queries </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.transaction.serviceCalls" ng-disabled="permissionBlock.transaction._ || !layout.adminEdit">Service calls </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.transaction._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.transaction.profile" ng-disabled="permissionBlock.transaction._ || !layout.adminEdit">Profile </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.error._" ng-disabled="!layout.adminEdit">Errors </label> </div> <div class="checkbox" ng-class="{\'has-error\': permissionBlock.error.traces && !permissionBlock.error.overview}"> <label ng-class="{\'gt-label-disabled\': permissionBlock.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.error.overview" ng-disabled="permissionBlock.error._ || !layout.adminEdit" ng-required="permissionBlock.error.traces">Overview <span ng-if="permissionBlock.error.traces && !permissionBlock.error.overview" style="font-style: italic"> -- required for other error permissions </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.error._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.error.traces" ng-disabled="permissionBlock.error._ || !layout.adminEdit">Traces </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.jvm._" ng-disabled="!layout.adminEdit">JVM </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.gauges" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.threadDump" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">Thread dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.heapDump" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">Heap dump </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.heapHistogram" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">Heap histogram </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.mbeanTree" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">MBean tree </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.systemProperties" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">System properties </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.jvm._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.jvm.environment" ng-disabled="permissionBlock.jvm._ || !layout.adminEdit">Environment </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.syntheticMonitor" ng-disabled="!layout.adminEdit">Synthetic monitors </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.incident" ng-disabled="!layout.adminEdit">Incidents </label> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="permissionBlock.config._" ng-disabled="!layout.adminEdit">Configuration </label> </div> <div class="checkbox" ng-class="{\'has-error\': !permissionBlock.config.view && viewConfigRequired(permissionBlock)}"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.config.view" ng-disabled="permissionBlock.config._ || !layout.adminEdit" ng-required="viewConfigRequired(permissionBlock)"> View (Transactions, Gauges, Synthetic monitors, Alerts, UI, Plugins, Instrumentation, Advanced) <span ng-if="!permissionBlock.config.view && viewConfigRequired(permissionBlock)" style="font-style: italic"> -- required for edit permission </span> </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._}" style="margin-left: 30px"> <input type="checkbox" ng-model="permissionBlock.config.edit._" ng-disabled="permissionBlock.config._ || !layout.adminEdit">Edit </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.transaction" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Transactions </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.gauge" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Gauges </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.syntheticMonitor" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Synthetic monitors </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.alert" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Alerts </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.ui" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">UI </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.plugin" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Plugins </label> </div> <div class="checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.instrumentation" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Instrumentation </label> </div> <div class="checkbox gt-role-permission-block-last-checkbox"> <label ng-class="{\'gt-label-disabled\': permissionBlock.config._ || permissionBlock.config.edit._}" style="margin-left: 60px"> <input type="checkbox" ng-model="permissionBlock.config.edit.advanced" ng-disabled="permissionBlock.config._ || permissionBlock.config.edit._ || !layout.adminEdit">Advanced </label> </div> <button class="gt-role-permission-block-remove btn btn-default" ng-click="removePermissionBlock(permissionBlock)" ng-if="layout.adminEdit"> Remove this agent specific permission block </button> </div> </fieldset> <fieldset ng-if="layout.central && layout.adminEdit"> <legend>Add {{page.permissionBlocks.length ? \'another\' : \'an\'}} agent specific permission block</legend> <div style="margin-bottom: 23px; margin-left: 14px"> <div ng-if="!allAgentRollups.length" style="font-style: italic"> There are no agents </div> <button class="btn btn-default" ng-click="addPermissionBlock()" ng-if="allAgentRollups.length"> Add </button> </div> </fieldset> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9" ng-class="{\'gt-sometimes-legend-padding\': layout.central}"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> <div gt-button ng-show="config.version" gt-label="Delete" gt-click="delete(deferred)" gt-btn-class="btn-default" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/admin/smtp.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> SMTP configuration </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal gt-sometimes-legend-padding-smtp" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Host" gt-model="config.host" gt-disabled="!layout.adminEdit" gt-width="20em"> <div class="help-block"> SMTP server hostname or IP address. </div> </div> <div gt-form-group gt-label="Port" gt-model="config.port" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!layout.adminEdit" gt-width="7em"> <div class="help-block"> Defaults to port 25 </div> </div> <div class="form-group gt-form-group-without-help-block"> <label class="col-lg-3 control-label"> Connection security </label> <div class="col-lg-9"> <select ng-model="page.connectionSecurity" ng-disabled="!layout.adminEdit" class="form-control" style="width: auto"> <option value="none">None</option> <option value="ssl-tls">SSL/TLS</option> <option value="starttls">STARTTLS</option> </select> </div> </div> <div gt-form-group gt-label="Username" gt-model="config.username" gt-disabled="!layout.adminEdit" gt-width="20em" class="gt-form-group-without-help-block"> </div> <div class="form-group gt-form-group-without-help-block" ng-class="{\'has-error\': formCtrl.password.$invalid}"> <label class="col-lg-3 control-label" for="password"> Password </label> <div class="col-lg-9"> <input type="password" class="form-control" ng-model="password" ng-disabled="!layout.adminEdit" name="password" id="password" ng-change="onPasswordChange()" ng-click="onPasswordClick()" style="max-width: 20em; display: inline-block"> </div> </div> <div gt-form-group gt-label="From email address" gt-model="config.fromEmailAddress" gt-disabled="!layout.adminEdit" gt-width="20em"> <div class="help-block"> Defaults to <em>glowroot@&lt;server name&gt;</em> (currently glowroot@{{localServerName}}). </div> </div> <div gt-form-group gt-label="From display name" gt-model="config.fromDisplayName" gt-disabled="!layout.adminEdit" gt-width="20em"> <div class="help-block"> Defaults to <em>Glowroot</em>. </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> <div ng-form ng-if="layout.adminEdit" class="form-horizontal" style="padding-top: 30px"> <fieldset class="gt-send-email-fieldset"> <legend>Send test email</legend> <div class="form-group"> <label class="col-lg-3 control-label" for="testEmailRecipient"> Test email recipient </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="page.testEmailRecipient" id="testEmailRecipient" style="max-width: 25em; float: left; vertical-align: top; margin-right: 10px; margin-bottom: 10px"> <div gt-button gt-btn-class="btn-default" gt-label="Send test email" gt-click="sendTestEmail(deferred)" gt-disabled="!page.testEmailRecipient || !config.host" style="vertical-align: top; margin-bottom: 10px"> </div> </div> </div> </fieldset> </div> </div> </div> '),e.put("views/admin/storage.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Storage</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form class="form-horizontal" name="formCtrl"> <fieldset ng-if="!layout.central"> <legend>data.h2.db</legend> <div gt-form-group gt-label="Response time and JVM gauge tabs (1&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="page.rollupExpirationDays[0]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Response time tab data is collected continuously and stored at 1 minute intervals. This setting defines how long to retain this 1 minute interval data. </div> </div> <div gt-form-group gt-label="Response time and JVM gauge tab (5&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="page.rollupExpirationDays[1]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Response time tab data is rolled up at 5 minute intervals. This setting defines how long to retain this 5 minute rollup data. </div> </div> <div gt-form-group gt-label="Response time and JVM gauge tabs (30&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="page.rollupExpirationDays[2]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Response time tab data is rolled up again at 30 minute intervals. This setting defines how long to retain this 30 minute rollup data. </div> </div> <div gt-form-group gt-label="Response time and JVM gauge tabs (4&nbsp;hour&nbsp;interval&nbsp;data)" gt-model="page.rollupExpirationDays[3]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Response time tab data is rolled up again at 4 hour intervals. This setting defines how long to retain this 4 hour rollup data. </div> </div> <div gt-form-group gt-label="Traces tab data" gt-model="page.traceExpirationDays" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain the trace tab data. </div> </div> <div gt-form-group gt-label="Full query text" gt-model="page.fullQueryTextExpirationDays" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain the full query text on the queries tab data. The truncated query text and query stats are retained according to *.capped.db settings below. </div> </div> </fieldset> <fieldset ng-if="!layout.central"> <legend>*.capped.db</legend> <div gt-form-group gt-label="Queries, service calls and continuous profiling tab data (1&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="config.rollupCappedDatabaseSizesMb[0]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="MB" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" class="gt-rollup-capped-database-size"> <div class="help-block"> Queries, service calls and continuous profiling tab data is collected and stored at 1 minute intervals. This setting defines the size of the capped data file used to store this 1 minute interval data. </div> </div> <div gt-form-group gt-label="Queries, service calls and continuous profiling tab data (5&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="config.rollupCappedDatabaseSizesMb[1]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="MB" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Queries, service calls and continuous profiling tab data is rolled up at 5 minute intervals. This setting defines the size of the capped data file used to store this 5 minute interval data. </div> </div> <div gt-form-group gt-label="Queries, service calls and continuous profiling tab data (30&nbsp;minute&nbsp;interval&nbsp;data)" gt-model="config.rollupCappedDatabaseSizesMb[2]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="MB" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Queries, service calls and continuous profiling tab data is rolled up at 30 minute intervals. This setting defines the size of the capped data file used to store this 30 minute interval data. </div> </div> <div gt-form-group gt-label="Queries, service calls and continuous profiling tab data (4&nbsp;hour&nbsp;interval&nbsp;data)" gt-model="config.rollupCappedDatabaseSizesMb[3]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="MB" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Queries, service calls and continuous profiling tab data is rolled up at 4 hour intervals. This setting defines the size of the capped data file used to store this 4 hour interval data. </div> </div> <div gt-form-group gt-label="Trace detail data" gt-model="config.traceCappedDatabaseSizeMb" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="MB" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" class="gt-trace-capped-database-size"> <div class="help-block"> This setting defines the size of the capped data file used to store the trace detail data (trace entries and trace profiles). </div> </div> </fieldset> <div ng-if="layout.central"> <div gt-form-group gt-label="1&nbsp;minute&nbsp;interval&nbsp;data" gt-model="page.rollupExpirationDays[0]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain all 1 minute interval data. This includes response time data, query data, service call data, profile data, gauge data and error summary data. (this setting also applies to 5 second gauge data) </div> </div> <div gt-form-group gt-label="5&nbsp;minute&nbsp;interval&nbsp;data" gt-model="page.rollupExpirationDays[1]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain all 5 minute interval data. This includes response time data, query data, service call data, profile data, gauge data and error summary data. </div> </div> <div gt-form-group gt-label="30&nbsp;minute&nbsp;interval&nbsp;data" gt-model="page.rollupExpirationDays[2]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain all 30 minute interval data. This includes response time data, query data, service call data, profile data, gauge data and error summary data. </div> </div> <div gt-form-group gt-label="4&nbsp;hour&nbsp;interval&nbsp;data" gt-model="page.rollupExpirationDays[3]" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain all 4 hour interval data. This includes response time data, query data, service call data, profile data, gauge data and error summary data. </div> </div> <div gt-form-group gt-label="Trace data" gt-model="page.traceExpirationDays" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain all trace data. This includes individual traces and error message data. </div> </div> <div gt-form-group gt-label="Full query text" gt-model="page.fullQueryTextExpirationDays" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-addon="days" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> This setting defines how long to retain the full query text on the queries tab data. The truncated query text and query stats are retained according to 1 min, 5 min, 30 min, 4 hour interval data settings above. </div> </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-4 col-lg-8 gt-sometimes-legend-padding-storage"> <div gt-button-group> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> <div gt-button gt-label="Delete all data" gt-click="deleteAllStoredData(deferred)" gt-btn-class="btn-danger" gt-dont-validate-form="true" gt-confirm-header="Delete all data?" gt-confirm-body="This will delete all captured data, including aggregated transaction data, traces and gauge data." ng-show="!layout.central" class="gt-inline-block"> </div> </div> <div class="help-block" ng-if="layout.central"> Updated expiration settings only apply to data collected from this point forward. Existing data is still tagged with the expiration settings in effect at the time the data was captured since using <a href="https://docs.datastax.com/en/cql/3.1/cql/cql_using/use_expire_c.html">Cassandra TTL</a> to implement expiration. </div> </div> </div> </div> </div> </div> '),e.put("views/admin/user-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Users</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!users.length" style="font-style: italic"> There are no users </div> <div ng-repeat="user in users" style="padding-bottom: 8px"> <div> <a ng-href="admin/user?username={{user.username}}">{{user.display}}</a> <span ng-if="user.roles.length" style="margin-left: 10px">({{user.roles.join(\', \')}})</span> </div> </div> <div ng-if="loaded && layout.adminEdit" style="margin-top: 30px"> <a class="btn btn-primary" href="admin/user?new"> Add new </a> </div> </div> </div> </div> '),e.put("views/admin/user.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="admin/user-list"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Users <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Username" gt-model="config.username" gt-disabled="!layout.adminEdit || username" gt-width="40em" gt-required="loaded" class="gt-form-group-without-help-block"> </div> <div gt-form-group gt-type="checkbox" gt-label="Use LDAP for password" gt-model="config.ldap" gt-disabled="!layout.adminEdit" class="gt-form-group-without-help-block" style="padding-top: 7px" ng-if="ldapAvailable && config.username.toLowerCase() !== \'anonymous\'"> </div> <div gt-form-group gt-label="Password" gt-type="password" gt-model="page.password" gt-disabled="!layout.adminEdit" gt-width="20em" gt-required="loaded && (!username || originalConfig.ldap && !config.ldap)" class="gt-form-group-without-help-block" ng-if="!config.ldap && config.username.toLowerCase() !== \'anonymous\'"> </div> <div gt-form-group gt-label="Verify password" gt-type="password" gt-model="page.verifyPassword" gt-disabled="!layout.adminEdit" gt-width="20em" gt-required="loaded && (!username || originalConfig.ldap && !config.ldap)" class="gt-form-group-without-help-block" ng-if="!config.ldap && config.username.toLowerCase() !== \'anonymous\'"> </div> <div class="form-group gt-form-group-without-help-block"> <label class="col-lg-3 control-label"> Roles </label> <div class="col-lg-9"> <div gt-spinner gt-show="rolesLoading && !httpError" class="gt-inline-spinner hide" style="height: 50px"> </div> <div ng-repeat="role in allRoles | orderBy:\'name\'" class="checkbox"> <label> <input type="checkbox" ng-model="role.checked" ng-disabled="!layout.adminEdit"> <span ng-if="role.available"> <a href="admin/role?name={{role.name}}">{{role.name}}</a> </span> <span ng-if="!role.available"> {{role.name}} <span class="gt-red" style="font-weight: 600; padding-left: 10px">Role not found</span> </span> </label> </div> </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block" id="gtSaveChanges"> </div> <button ng-click="displayDeleteConfirmationModal()" ng-show="config.version" class="btn btn-default gt-button-spacing"> Delete </button> </div> </div> </div> </div> </div> </div> <div class="modal" id="deleteConfirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3>Delete user</h3> </div> <div class="modal-body"> <p>Are you sure you want to delete this user?</p> <div style="min-height: 60px"> <div class="gt-inline-block"> <div gt-spinner gt-show="deleting" class="gt-left-aligned-spinner" style="width: 50px; margin-bottom: -30px"> </div> </div> <div class="gt-button-message gt-button-message-error" style="display: block" ng-show="errorCannotDeleteLastUser"> Cannot delete last user </div> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="delete()">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> <div class="modal" id="saveWithNoRolesConfirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3>User has no role assignments</h3> </div> <div class="modal-body"> <p>Are you sure you want to save this user with no roles?</p> <p>Without any role assignments, this user will have no permissions.</p> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="saveWithNoRoles()">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/admin/web.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Web</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Port" gt-model="config.port" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!layout.central"> <div class="help-block"> <div class="gt-yellow" ng-show="originalConfig.port !== activePort" style="padding-bottom: 5px"> Active value is <code>{{activePort}}</code>. </div> Port that the user interface listens on. </div> </div> <div gt-form-group gt-label="Bind address" gt-model="config.bindAddress" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!layout.central"> <div class="help-block"> <div class="gt-yellow" ng-show="originalConfig.bindAddress !== activeBindAddress" style="padding-bottom: 5px"> This change requires JVM restart. Active value is <code>{{activeBindAddress}}</code>. </div> Address that the user interface listens on. <span ng-if="originalConfig.bindAddress === \'127.0.0.1\'"> To access the UI from remote machines, change the bind address to 0.0.0.0 </span> </div> </div> <div gt-form-group gt-type="checkbox" gt-label="Use HTTPS" gt-model="config.https" gt-disabled="!layout.adminEdit" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!layout.central"> <div class="help-block"> <div class="gt-yellow" ng-show="originalConfig.https !== activeHttps" style="padding-bottom: 5px"> Active value is <code>{{activeHttps}}</code>. </div> Serve the user interface over HTTPS. The SSL certificate and private key to be used must be placed in the {{certificateDir}} directory with filenames <em>certificate.pem</em> and <em>private.pem</em> before enabling HTTPS. The private key should not have a passphrase. E.g. a self signed certificate can be generated at the command line using <em>openssl req -new -x509 -nodes -days 365 -out certificate.pem -keyout private.pem</em> </div> </div> <div gt-form-group gt-label="Context path" gt-model="config.contextPath" gt-pattern="/^\\/$|^\\/.*[^/]$/" gt-required="loaded" gt-disabled="!layout.adminEdit" gt-width="15em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!layout.central"> <div class="help-block"> This only needs to be changed if reverse proxying the user interface behind a non-root context path. </div> </div> <div gt-form-group gt-label="Session timeout" gt-model="config.sessionTimeoutMinutes" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!layout.loginEnabled || !layout.adminEdit" gt-width="7em" gt-addon="minutes" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Session timeout only applies if login is enabled. Session timeout <code>0</code> means sessions do not time out, except on jvm restart at which time all sessions time out. </div> </div> <div gt-form-group gt-label="Session cookie name" gt-model="config.sessionCookieName" gt-pattern="/^[a-zA-Z0-9_]*$/" gt-required="loaded" gt-disabled="!layout.loginEnabled || !layout.adminEdit" gt-width="20em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> Session cookie only applies if login is enabled. </div> </div> <div class="form-group gt-form-buttons" ng-if="layout.adminEdit"> <div class="col-lg-offset-4 col-lg-8"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> '),e.put("views/config.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> <div ng-hide="layout.central"> Configuration </div> <div style="margin-top: -16px" ng-show="layout.central"> <span class="gt-inline-block gt-header-menu"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle"> {{layout.agentRollups[agentRollupId].display || \'&lt;agent&gt;\'}} <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu" style="margin-bottom: 100px"> <li ng-repeat="agentRollup in layout.agentRollupValues" ng-hide="!agentRollup.permissions.config.view"> <a role="menuitem" tabindex="-1" ng-href="{{agentRollupUrl(agentRollup)}}"> {{agentRollup.indentedDisplay}} </a> </li> </ul> </span> </span> <span class="gt-inline-block gt-separator"> | </span> <span class="gt-inline-block"> Configuration </span> </div> </div> </div> <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <div gt-sidebar-item gt-display="Transactions" gt-url="config/transaction{{agentQueryString()}}" gt-active="currentUrl() === \'config/transaction\'" ng-if="!isAgentRollup()"> </div> <div gt-sidebar-item gt-display="Gauges" gt-url="config/gauge-list{{agentQueryString()}}" gt-active="currentUrl() === \'config/gauge-list\'" gt-sub-active="currentUrl() === \'config/gauge\'" ng-if="!isAgentRollup()"> </div> <div gt-sidebar-item gt-display="Synthetic monitors" gt-url="config/synthetic-monitor-list{{agentQueryString()}}" gt-active="currentUrl() === \'config/synthetic-monitor-list\'" gt-sub-active="currentUrl() === \'config/synthetic-monitor\'" ng-if="layout.central"> </div> <div gt-sidebar-item gt-display="Alerts" gt-url="config/alert-list{{agentQueryString()}}" gt-active="currentUrl() === \'config/alert-list\'" gt-sub-active="currentUrl() === \'config/alert\'"> </div> <div gt-sidebar-item gt-display="UI" gt-url="config/ui{{agentQueryString()}}" gt-active="currentUrl() === \'config/ui\'"> </div> <div gt-sidebar-item gt-display="Plugins" gt-url="config/plugin-list{{agentQueryString()}}" gt-active="currentUrl() === \'config/plugin-list\'" gt-sub-active="currentUrl() === \'config/plugin\'" ng-if="!isAgentRollup()"> </div> <div gt-sidebar-item gt-display="Instrumentation" gt-url="config/instrumentation-list{{agentQueryString()}}" gt-active="currentUrl() === \'config/instrumentation-list\'" gt-sub-active="currentUrl() === \'config/instrumentation\'" ng-if="!isAgentRollup()"> </div> <div gt-sidebar-item gt-display="Advanced" gt-url="config/advanced{{agentQueryString()}}" gt-active="currentUrl() === \'config/advanced\'"> </div> </ul> </div> </div> <div ui-view class="gt-main-column"> </div> <div class="modal" id="confirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3></h3> </div> <div class="modal-body"> <p></p> </div> <div class="modal-footer"> <button class="btn btn-default" id="confirmationModalButton">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/config/advanced.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Advanced</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Immediate partial trace store threshold" gt-model="config.immediatePartialStoreThresholdSeconds" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-addon="seconds" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!isAgentRollup()"> <div class="help-block"> Any transaction that exceeds this amount of time will have its partial trace stored to disk immediately (prior to its completion). This is to guard against transactions which never complete (or at least run long enough and do enough harm to hang the jvm). </div> </div> <div gt-form-group gt-label="Max aggregate transactions per transaction&nbsp;type" gt-model="config.maxAggregateTransactionsPerType" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!isAgentRollup()"> <div class="help-block"> The maximum number of different transaction names in a given minute that each have their own aggregates. If this is exceeded in any given minute, then transactions with other transactions names will still be aggregated into the overall bucket, but will not have their own buckets for that minute time period. </div> </div> <div gt-form-group gt-label="Max aggregate queries per query type" gt-model="config.maxAggregateQueriesPerType" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> The maximum number of different aggregated queries that are stored per query type across transactions of a given transaction name (for display on the Queries tab). This is used to limit storage and memory when there are lots of dynamically created queries. More than this number of aggregated queries are stored in memory and then this number of the top queries by time are stored. Specifically, 10 times this number are stored in memory for overall aggregates and 2 times this number are stored in memory for aggregates by transaction name. </div> </div> <div gt-form-group gt-label="Max aggregate service calls per service call type" gt-model="config.maxAggregateServiceCallsPerType" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> The maximum number of different aggregated service calls that are stored per service call type across transactions of a given transaction name (for display on the Service calls tab). This is used to limit storage and memory when there are lots of dynamically created service calls. More than this number of aggregated service calls are stored in memory and then this number of the top service calls by time are stored. Specifically, 10 times this number are stored in memory for overall aggregates and 2 times this number are stored in memory for aggregates by transaction name. </div> </div> <div gt-form-group gt-label="Max trace entries per transaction" gt-model="config.maxTraceEntriesPerTransaction" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!isAgentRollup()"> <div class="help-block"> Maximum number of trace entries collected for a given transaction. This is used to limit the memory of very long transactions that would capture potentially hundreds of thousands of trace entries (e.g. large batch or background operations). Also, the UI is not really optimized for viewing super large numbers of trace entries. </div> </div> <div gt-form-group gt-label="Max stack trace samples per transaction" gt-model="config.maxStackTraceSamplesPerTransaction" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.advanced" gt-width="7em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8" ng-if="!isAgentRollup()"> <div class="help-block"> Maximum number of stack trace samples collected for a given transaction. This is used to limit the memory of very long transactions that would capture potentially hundreds of thousands of stack traces (e.g. large batch or background operations). </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.advanced"> <div class="col-lg-offset-4 col-lg-8"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/alert-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Alerts</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!configs.length" style="font-style: italic"> There are no configured alerts </div> <div ng-repeat="config in configs" class="gt-second-line-indent" style="padding-bottom: 8px"> <a ng-href="config/alert{{configQueryString(config)}}"> {{config.display}} </a> </div> <div ng-if="loaded && agentPermissions.config.edit.alert" style="margin-top: 30px"> <a class="btn btn-primary" href="config/alert{{newQueryString()}}"> Add new </a> </div> </div> </div> </div> </div> '),e.put("views/config/alert.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="config/alert-list{{agentQueryString()}}"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Alerts <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <fieldset> <legend>Condition</legend> <div class="form-group gt-form-group-without-help-block" ng-if="layout.central"> <label class="col-lg-3 control-label"> Based on </label> <div class="col-lg-9"> <div class="radio"> <label> <input type="radio" ng-model="config.condition.conditionType" ng-disabled="!agentPermissions.config.edit.alert" value="metric"> Metric </label> </div> <div class="radio" ng-if="layout.central"> <label> <input type="radio" ng-model="config.condition.conditionType" ng-disabled="!agentPermissions.config.edit.alert" value="synthetic-monitor"> Synthetic monitor </label> </div> <div class="radio" ng-if="layout.central"> <label> <input type="radio" ng-model="config.condition.conditionType" ng-disabled="!agentPermissions.config.edit.alert" value="heartbeat"> Heartbeat </label> </div> </div> </div> <div ng-if="config.condition.conditionType === \'metric\'"> <div class="form-group" ng-class="{\'has-error\': formCtrl.conditionMetric.$invalid}"> <label class="col-lg-3 control-label" for="conditionMetric"> Metric </label> <div class="col-lg-9"> <select ng-model="config.condition.metric" ng-disabled="!agentPermissions.config.edit.alert" ng-required="config.condition.conditionType === \'metric\'" class="form-control" name="conditionMetric" id="conditionMetric" style="width: auto"> <option value="" ng-disabled="config.condition.metricName"></option> <option ng-repeat="metric in metrics track by metric.id" ng-value="metric.id" ng-disabled="metric.disabled" ng-style="{\'font-weight\': metric.heading ? \'bold\' : \'normal\'}"> {{metric.display}} </option> </select> <div class="help-block"> The metric that this alert monitors. </div> </div> </div> <div class="form-group" ng-class="{\'has-error\': formCtrl.transactionType.$invalid}" ng-if="showTransactionTypeAndName()"> <label class="col-lg-3 control-label" for="transactionType"> Transaction type </label> <div class="col-lg-9"> <select ng-model="config.condition.transactionType" class="form-control" ng-required="loaded" ng-disabled="!agentPermissions.config.edit.alert" name="transactionType" id="transactionType" style="width: auto"> <option ng-repeat="transactionType in transactionTypes()" ng-value="transactionType"> {{transactionType}} </option> <option ng-value="config.condition.transactionType" disabled="disabled" ng-if="config.condition.transactionType && transactionTypes().indexOf(config.condition.transactionType) === -1"> {{config.condition.transactionType}} (not available) </option> </select> <div class="help-block"> The transaction type that this alert monitors. </div> </div> </div> <div gt-form-group gt-label="Transaction name" gt-model="config.condition.transactionName" gt-disabled="!agentPermissions.config.edit.alert" gt-width="30em" ng-if="showTransactionTypeAndName()"> <div class="help-block"> (Optional) The transaction name that this alert monitors. </div> </div> <div gt-form-group gt-label="Percentile" gt-model="config.condition.percentile" gt-number="true" gt-pattern="pattern.percentage" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.alert" gt-width="7em" gt-addon="percentile" ng-if="config.condition.metric === \'transaction:x-percentile\'"> <div class="help-block"> The transaction response time percentile to use for alerting. </div> </div> <div gt-form-group gt-label="Threshold" gt-model="config.condition.threshold" gt-number="true" gt-pattern="pattern.double" gt-disabled="!agentPermissions.config.edit.alert" gt-required="true" gt-width="7em" gt-addon="{{unit()}}"> <div class="help-block"> If the {{phraseForValue()}} over the given time period exceeds this threshold, then alert will be triggered. </div> </div> <div gt-form-group gt-type="checkbox" gt-label="Lower bound threshold?" gt-checkbox-label="Lower bound threshold" gt-model="config.condition.lowerBoundThreshold" gt-disabled="!agentPermissions.config.edit.alert"> <div class="help-block"> Alert if the {{phraseForValue()}} drops below the threshold, instead of alerting if the {{phraseForValue()}} exceeds the threshold. </div> </div> <div gt-form-group gt-label="Time period" gt-model="page.timePeriodMinutes" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.alert" gt-width="7em" gt-addon="minutes"> <div class="help-block"> The time period over which the {{phraseForValue()}} is calculated. </div> </div> <div gt-form-group gt-label="Minimum transaction count" gt-model="config.condition.minTransactionCount" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.alert" gt-width="7em" ng-if="showTransactionTypeAndName() && config.condition.metric !== \'transaction:count\' && config.condition.metric !== \'error:count\'"> <div class="help-block"> Time periods with very few transactions have much less meaningful metrics, so this can be used to suppress alerts from being generated unless the time period has a minimum transaction count. </div> </div> </div> <div ng-if="config.condition.conditionType === \'heartbeat\'"> <div gt-form-group gt-label="Time period" gt-model="config.condition.timePeriodSeconds" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.alert" gt-width="7em" gt-addon="seconds"> <div class="help-block"> The time period after which the alert is triggered if no heartbeat has been received from the agent. Heartbeats are normally received every 5 seconds. </div> </div> </div> <div ng-if="config.condition.conditionType === \'synthetic-monitor\'"> <div class="form-group" ng-class="{\'has-error\': formCtrl.syntheticMonitorId.$invalid}"> <label class="col-lg-3 control-label" for="syntheticMonitorId"> Synthetic monitor </label> <div class="col-lg-9"> <select ng-model="config.condition.syntheticMonitorId" class="form-control" ng-required="loaded" ng-disabled="!agentPermissions.config.edit.alert" name="syntheticMonitorId" id="syntheticMonitorId" style="width: auto"> <option value="__________" disabled="disabled" ng-if="!syntheticMonitors.length"> (there are no synthetic monitors available) </option> <option ng-repeat="syntheticMonitor in syntheticMonitors" ng-value="syntheticMonitor.id"> {{syntheticMonitor.display}} </option> </select> <div class="help-block"> The synthetic monitor that this alert is based on. </div> </div> </div> <div gt-form-group gt-label="Threshold" gt-model="config.condition.thresholdMillis" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.alert" gt-width="7em" gt-addon="milliseconds"> <div class="help-block"> If the synthetic monitor takes more than this threshold, then an alert will be triggered. </div> </div> </div> </fieldset> <fieldset> <legend>Email notification</legend> <div gt-form-group gt-type="textarea" gt-label="Email addresses" gt-model="page.emailAddresses" gt-disabled="!agentPermissions.config.edit.alert" gt-width="30em"> <div class="help-block"> Comma separated list of email addresses. </div> </div> </fieldset> <fieldset ng-if="pagerDutyIntegrationKeys.length"> <legend>PagerDuty notification</legend> <div class="form-group" ng-class="{\'has-error\': formCtrl.pagerDutyIntegrationKey.$invalid}"> <label class="col-lg-3 control-label" for="pagerDutyIntegrationKey"> Integration key </label> <div class="col-lg-9 gt-form-group-without-help-block"> <select ng-model="config.pagerDutyNotification.pagerDutyIntegrationKey" ng-disabled="!agentPermissions.config.edit.alert" class="form-control" name="pagerDutyIntegrationKey" id="pagerDutyIntegrationKey" style="width: auto"> <option value=""></option> <option ng-repeat="pagerDutyIntegrationKey in pagerDutyIntegrationKeys track by pagerDutyIntegrationKey.key" ng-value="pagerDutyIntegrationKey.key"> {{pagerDutyIntegrationKey.display}} ({{pagerDutyIntegrationKey.key}}) </option> <option ng-value="config.pagerDutyNotification.pagerDutyIntegrationKey" disabled="disabled" ng-if="displayUnavailablePagerDutyIntegrationKey()"> {{config.pagerDutyNotification.pagerDutyIntegrationKey}} (not available) </option> </select> </div> </div> </fieldset> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.alert"> <div class="col-lg-offset-3 col-lg-9 gt-sometimes-legend-padding"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> <div gt-button ng-show="config.version" gt-label="Delete" gt-click="delete(deferred)" gt-btn-class="btn-default" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/gauge-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Gauges</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!gauges.length" style="font-style: italic"> There are no configured gauges </div> <div ng-repeat="gauge in gauges" style="padding-bottom: 8px"> <div> <a ng-href="config/gauge{{gaugeQueryString(gauge)}}">{{gauge.config.display}}</a> </div> <div ng-repeat="mbeanAttribute in gauge.config.mbeanAttributes | orderBy:\'name\'" style="margin-left: 40px"> {{mbeanAttribute.name.replace(\'/\', \' / \')}} </div> </div> <div ng-if="loaded && agentPermissions.config.edit.gauge" style="margin-top: 30px"> <a class="btn btn-primary" href="config/gauge{{newQueryString()}}"> Add new </a> </div> </div> </div> </div> </div> '),e.put("views/config/gauge.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="config/gauge-list{{agentQueryString()}}"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Gauges <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-warning"> Limited functionality since agent is not currently connected </div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div class="form-group gt-form-group-without-help-block" ng-class="{\'has-error\': hasMBeanObjectNameError()}"> <label class="col-lg-3 control-label" for="mbeanObjectName{{$id}}"> MBean object name </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="config.mbeanObjectName" ng-required="true" ng-disabled="!agentPermissions.config.edit.gauge" uib-typeahead="suggestion for suggestion in mbeanObjectNames($viewValue)" typeahead-on-select="onSelectMBeanObjectName()" ng-blur="onBlurMBeanObjectName()" name="mbeanObjectName" id="mbeanObjectName{{$id}}" style="max-width: 40em; display: inline-block"> <div gt-spinner gt-spinner-inline="true" gt-show="showMBeanObjectNameSpinner" class="gt-inline-spinner"> </div> <div ng-show="mbeanUnavailable" class="gt-red" style="padding-top: 10px"> MBean not found </div> <div ng-show="mbeanUnmatched" class="gt-red" style="padding-top: 10px"> No matching MBean found </div> <div ng-show="duplicateMBean" class="gt-red" style="padding-top: 10px"> There is already a gauge for this MBean </div> </div> </div> <div class="form-group gt-form-group-without-help-block"> <label class="col-lg-3 control-label"> MBean attributes </label> <div class="col-lg-9"> <div gt-spinner gt-show="mbeanAttributesLoading && !httpError" class="gt-inline-spinner hide" style="height: 50px"> </div> <table> <tr ng-repeat="mbeanAttribute in allMBeanAttributes | orderBy:\'name\'"> <td class="checkbox"> <label> <input type="checkbox" ng-model="mbeanAttribute.checked" ng-disabled="!agentPermissions.config.edit.gauge"> {{mbeanAttribute.name.replace(\'/\', \' / \')}} <span ng-show="!mbeanAttribute.available && !mbeanUnavailable && !mbeanUnmatched" class="gt-red" style="padding-left: 10px"> Attribute not found </span> </label> </td> <td style="padding-left: 40px"> <div class="checkbox" ng-show="mbeanAttribute.checked"> <label> <input type="checkbox" ng-model="mbeanAttribute.counter" ng-disabled="!agentPermissions.config.edit.gauge"> Counter? </label> </div> </td> </tr> </table> <div ng-show="!allMBeanAttributes.length && !mbeanUnavailable && !mbeanUnmatched && config.selectedMBeanObjectName" class="gt-red"> There are no number-valued attributes for this MBean </div> </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.gauge"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="saveDisabled()" class="gt-inline-block"> </div> <div gt-button ng-show="config.version" gt-label="Delete" gt-click="delete(deferred)" gt-btn-class="btn-default" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/general.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>General</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Agent{{ isAgentRollup() ? \' rollup\' : \'\' }} ID" gt-model="agentRollupId" gt-disabled="true" gt-width="40em" class="gt-form-group-without-help-block"> <div class="help-block"> Cannot be changed, used for storing and querying the agent{{ isAgentRollup() ? \' rollup\' : \'\' }}\'s data. </div> </div> <div gt-form-group gt-label="Display name" gt-model="config.display" gt-disabled="!layout.adminEdit" gt-width="40em" gt-placeholder="{{agentRollupId}}"> <div class="help-block"> Display name for this agent{{ isAgentRollup() ? \' rollup\' : \'\' }}. </div> </div> <div class="form-group" ng-if="isAgentRollup()"> <div class="col-lg-offset-3 col-lg-9 help-block"> <em>NOTE: the agent rollup configuration (synthetic monitors, alerts, UI and advanced) applies directly to the agent rollup data. This configuration has no affect on individual agents under the rollup.</em> </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.general"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/instrumentation-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Instrumentation</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!configs.length" style="font-style: italic"> There is no configured instrumentation </div> <div ng-repeat="config in configs" class="gt-second-line-indent" style="padding-bottom: 8px"> <span style="padding-right: 20px"> {{displayExtra(config)}} </span> <a ng-href="config/instrumentation{{instrumentationQueryString(config)}}"> {{display(config)}} </a> </div> <div style="margin: 20px 60px 0 0" ng-if="dirty"> <strong>Restart the JVM to apply changes.</strong> <span style="font-style: italic" ng-if="jvmRetransformClassesSupported"> Feeling lucky? Try the red button. </span> </div> <div ng-if="loaded && agentPermissions.config.edit.instrumentation" style="font-size: 16px; margin-top: 30px"> <div gt-button-group> <a class="btn btn-primary pull-left" href="config/instrumentation{{newQueryString()}}" style="margin-right: 8px; margin-bottom: 8px"> Add new </a> <button ng-click="displayImportModal()" class="btn btn-default gt-button-spacing"> Import </button> <button ng-click="displayExportModal()" ng-if="configs.length" class="btn btn-default gt-button-spacing"> Export all </button> <button ng-click="displayDeleteAllConfirmationModal()" ng-if="configs.length" class="btn btn-warning gt-button-spacing"> Delete all </button> <div gt-button gt-btn-class="btn-danger" gt-label="Apply changes to running JVM" gt-click="retransformClasses(deferred)" gt-confirm-header="Apply changes to running JVM?" gt-confirm-body="Important: Do not use this in production as it has chance of crashing the JVM." ng-if="dirty && jvmRetransformClassesSupported" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> <div class="modal" id="importModal" tabindex="-1"> <div class="modal-dialog gt-modal-dialog-lg"> <div class="modal-content"> <div class="modal-header"> <h3>Import instrumentation</h3> </div> <div class="modal-body" style="padding-top: 20px; padding-bottom: 20px"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div class="form-group" style="margin-bottom: 0"> <label for="jsonToImport" class="control-label">JSON definition</label> <textarea class="form-control" ng-model="jsonToImport" id="jsonToImport" rows="15">\n          </textarea> </div> <div style="min-height: 60px"> <div class="gt-inline-block"> <div gt-spinner gt-show="importing" class="gt-left-aligned-spinner" style="width: 50px; margin-bottom: -30px"> </div> </div> <div class="gt-button-message gt-button-message-error" style="margin-left: 0; padding-top: 20px" ng-show="importErrorMessage"> {{importErrorMessage}} </div> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="importFromJson()">Import</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> <div class="modal" id="exportModal" tabindex="-1"> <div class="modal-dialog gt-modal-dialog-lg"> <div class="modal-content"> <div class="modal-header gt-with-clip"> <h3> Instrumentation JSON <span class="fa fa-clipboard gt-clip" style="font-size: 14px; position: inherit; margin-left: 5px"></span> </h3> </div> <div class="modal-body" style="padding-top: 20px; height: 500px; overflow-y: auto"> <pre id="jsonExport" style="white-space: pre-wrap; word-wrap: break-word">{{jsonExport}}</pre> </div> </div> </div> </div> <div class="modal" id="deleteAllConfirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3>Delete all configured instrumentation</h3> </div> <div class="modal-body"> <p>Are you sure you want to delete all configured instrumentation?</p> <div style="min-height: 60px"> <div class="gt-inline-block"> <div gt-spinner gt-show="deletingAll" class="gt-left-aligned-spinner" style="width: 50px; margin-bottom: -30px"> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-default" ng-click="deleteAll()">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/config/instrumentation.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="config/instrumentation-list{{agentQueryString()}}"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Instrumentation <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px; word-wrap: break-word">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-warning"> Limited functionality since agent is not currently connected </div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl"> <fieldset> <legend>What method(s) to instrument</legend> <div class="form-group" ng-class="{\'has-error\': loaded && formCtrl.className.$invalid}"> <label class="col-lg-3 control-label" for="className{{$id}}"> Class name </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="config.className" ng-required="true" ng-disabled="!agentPermissions.config.edit.instrumentation" uib-typeahead="suggestion for suggestion in classNames($viewValue)" typeahead-on-select="onSelectClassName()" typeahead-template-url="template/gt-typeahead-class-match.html" typeahead-wait-ms="5" name="className" id="className{{$id}}" style="max-width: 40em; display: inline-block"> <div gt-spinner gt-spinner-inline="true" gt-show="showClassNameSpinner" gt-no-delay="true" class="gt-inline-spinner"> </div> <div class="help-block"> The class or interface containing the method(s) to instrument. </div> </div> </div> <div class="form-group" ng-class="{\'has-error\': loaded && formCtrl.methodName.$invalid}"> <label class="col-lg-3 control-label" for="methodName{{$id}}"> Method name </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="config.methodName" ng-required="true" ng-disabled="!agentPermissions.config.edit.instrumentation" uib-typeahead="suggestion for suggestion in methodNames($viewValue)" typeahead-on-select="onSelectMethodName()" typeahead-wait-ms="5" ng-blur="onBlurMethodName()" name="methodName" id="methodName{{$id}}" style="max-width: 40em; display: inline-block"> <div gt-spinner gt-spinner-inline="true" gt-show="showMethodNameSpinner" gt-no-delay="true" class="gt-inline-spinner"> </div> <div class="help-block"> The method(s) to instrument. All overriding methods will also be instrumented (including all implementations of the method if the class above is an interface). </div> <div class="help-block"> The wildcard&nbsp;<code style="font-size: 120%">*</code>&nbsp;is supported anywhere in the method name. Multiple method names (including multiple method names with the wildcard&nbsp;<code style="font-size: 120%">*</code>&nbsp;in them) can be listed with the&nbsp;<code style="font-size: 120%">|</code>&nbsp;separator between them. </div> </div> </div> <div class="form-group" style="margin-top: -7px"> <label class="col-lg-3 control-label"> Method signature </label> <div class="col-lg-9"> <div ng-repeat="methodSignature in methodSignatures"> <div class="radio"> <label> <input type="radio" name="selectedMethodSignature" ng-model="$parent.selectedMethodSignature" ng-value="methodSignature" ng-required="true" ng-disabled="!agentPermissions.config.edit.instrumentation"> {{methodSignatureText(methodSignature)}} <div class="gt-red" ng-show="methodSignature.notAvailable"> Warning: this signature could not be found in the runtime classpath </div> </label> </div> </div> <div class="help-block"> Only the method name and parameter types are used when evaluating what to instrument (the return type and access modifiers are ignored). </div> </div> </div> </fieldset> <fieldset> <legend style="margin-bottom: 15px">What to capture</legend> <div class="form-group"> <label class="col-lg-3 control-label"> What to capture </label> <div class="col-lg-9"> <div class="radio"> <label> <input type="radio" ng-model="config.captureKind" ng-disabled="!agentPermissions.config.edit.instrumentation" value="timer"> Timer </label> </div> <div class="radio"> <label> <input type="radio" ng-model="config.captureKind" ng-disabled="!agentPermissions.config.edit.instrumentation" value="trace-entry"> Trace entry </label> </div> <div class="radio"> <label> <input type="radio" ng-model="config.captureKind" ng-disabled="!agentPermissions.config.edit.instrumentation" value="transaction"> Transaction </label> </div> <div class="radio"> <label> <input type="radio" ng-model="config.captureKind" ng-disabled="!agentPermissions.config.edit.instrumentation" value="other"> Optional transaction overrides only </label> </div> <div class="help-block"> A timer captures the total time and count of the above method(s) to produce the data in the <em>breakdown</em> section on the <a href="transaction/average{{agentQueryString()}}">average response time page</a>, and the data in the <em>breakdown</em> section when viewing an individual trace (on the <a href="transaction/traces{{agentQueryString()}}">slow traces</a> or <a href="error/traces{{agentQueryString()}}">error traces</a> pages). </div> <div class="help-block"> A trace entry is a timer plus it captures a message on each invocation of the above method(s) to produce the data in the <em>trace entries</em> section when viewing an individual trace. </div> <div class="help-block"> A transaction defines the capture point boundary for a new request or background operation. </div> </div> </div> <div gt-form-group gt-label="Transaction type" gt-model="config.transactionType" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="40em" gt-required="captureKindTransaction" ng-show="captureKindTransaction"> <div class="help-block"> The transaction type is used for aggregation and filtering. </div> <div class="help-block"> This can be one of the current transaction types ({{layout.transactionTypes.join(\', \')}}) or a new transaction type. </div> </div> <div gt-form-group gt-label="Transaction name" gt-model="config.transactionNameTemplate" gt-required="captureKindTransaction" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="40em" ng-show="captureKindTransaction"> <div class="help-block"> The transaction name is used for aggregation and filtering. </div> <div ng-non-bindable class="help-block"> This is a template which can be populated with values from the method invocation. The same rules apply as for the trace headline (see below), except that the return value {{_}} cannot be used. </div> </div> <div gt-form-group gt-type="textarea" gt-label="{{captureKindTransaction ? \'Trace headline\' : \'Trace entry\'}}" gt-model="config.traceEntryMessageTemplate" gt-required="showTraceEntry" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="40em" gt-rows="2" ng-show="showTraceEntry"> <div class="help-block"> </div> <div ng-non-bindable class="help-block"> This is a template which can be populated with values from the method invocation: <ul> <li> {{0}}, {{1}}, ... resolve to the method parameters </li> <li> {{this}} resolves to the object that the method is invoked on (except for static methods) </li> <li> {{_}} resolves to the return value (if not void) </li> <li> {{methodName}} resolves to the method name, which can be useful if&nbsp;<code style="font-size: 120%">*</code>&nbsp;or&nbsp;<code style="font-size: 120%">|</code>&nbsp;are used to define the method name above </li> </ul> </div> <div ng-non-bindable class="help-block"> Nested paths are resolved as well, e.g. {{0.size}} and {{this.class.name}}. If a path resolves to <code>null</code> at any point, then the entire path will resolve to <code>null</code>. Finally, resolved value is rendered into the template using <code>String.valueOf()</code>. </div> </div> <div gt-form-group gt-label="Timer name" gt-model="config.timerName" gt-pattern="/^[a-zA-Z0-9 ]*$/" gt-required="loaded && showTimer" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="20em" ng-show="showTimer"> <div class="help-block"> Multiple instrumentation definitions can share the same timer name, in which case their timers are aggregated together. </div> </div> <div gt-form-group gt-type="checkbox" gt-label="Self nesting" gt-checkbox-label="Capture self nested trace entries" gt-model="config.traceEntryCaptureSelfNested" gt-disabled="!agentPermissions.config.edit.instrumentation" ng-show="showTraceEntry"> <div class="help-block"> If checked, and this custom instrumentation is encountered beneath itself or beneath another pointcut that shares the same timer name, a nested trace entry <em>will</em> be captured. This can sometimes lead to a lot of extra noise, e.g. in a fairly common case where the custom instrumentation matches several overloaded methods that cascade to each other. </div> </div> <div gt-form-group gt-label="Stack trace threshold" gt-model="config.traceEntryStackThresholdMillis" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="7em" gt-addon="milliseconds" ng-show="showTraceEntryStackThreshold"> <div class="help-block"> Any trace entry that exceeds this threshold will have a stack trace captured and attached to it in order to help identify the source of this trace entry. Empty means never capture a stack trace for this trace entry. </div> </div> </fieldset> <fieldset> <legend>Optional transaction overrides</legend> <div gt-form-group gt-label="Transaction type" gt-model="config.transactionType" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="40em" ng-hide="captureKindTransaction"> <div class="help-block"> The transaction type is used for aggregation and filtering. </div> <div class="help-block"> This can be one of the current transaction types ({{layout.transactionTypes.join(\', \')}}) or a new transaction type. </div> <div class="help-block"> The value provided will override the transaction type for the containing transaction. If the transaction type is overridden more than once for a given transaction, the first non-null/non-empty value will be used. </div> </div> <div gt-form-group gt-label="Transaction name" gt-model="config.transactionNameTemplate" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="40em" ng-hide="captureKindTransaction"> <div class="help-block"> The transaction name is used for aggregation and filtering. </div> <div class="help-block"> The value provided will override the transaction name for the containing transaction. If the transaction name is overridden more than once for a given transaction, the first non-null/non-empty value will be used. </div> <div ng-non-bindable class="help-block"> This is a template which can be populated with values from the method invocation: <ul> <li> {{0}}, {{1}}, ... resolve to the method parameters </li> <li> {{this}} resolves to the object that the method is invoked on (except for static methods) </li> <li> {{methodName}} resolves to the method name, which can be useful if&nbsp;<code style="font-size: 120%">*</code>&nbsp;or&nbsp;<code style="font-size: 120%">|</code>&nbsp;are used to define the method name above </li> </ul> </div> <div ng-non-bindable class="help-block"> Nested paths are resolved as well, e.g. {{0.size}} and {{this.class.name}}. If a path resolves to <code>null</code> at any point, then the entire path will resolve to <code>null</code>. Finally, resolved value is rendered into the template using <code>String.valueOf()</code>. </div> </div> <div gt-form-group gt-label="Slow trace threshold" gt-model="config.transactionSlowThresholdMillis" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!agentPermissions.config.edit.instrumentation" gt-width="7em" gt-addon="milliseconds"> <div class="help-block"> This will override the slow threshold for the containing transaction. The value can be smaller than the global slow threshold to force slow transaction traces to be stored more often, or larger to force slow transaction traces to be stored less often. If the slow threshold is overridden more than once for a given transaction, the smallest override value will be used. </div> </div> </fieldset> <div class="form-group gt-form-buttons"> <div class="col-lg-offset-3 col-lg-9 gt-sometimes-legend-padding"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" ng-if="agentPermissions.config.edit.instrumentation" class="gt-inline-block"> </div> <div gt-button ng-show="config.version" gt-label="Delete" gt-click="delete(deferred)" gt-btn-class="btn-default" ng-if="agentPermissions.config.edit.instrumentation" class="gt-inline-block"> </div> <button ng-disabled="formCtrl.$invalid" ng-click="exportToJson()" class="btn btn-default gt-button-spacing"> Export to JSON </button> </div> </div> </div> </div> </div> </div> <div class="modal" id="jsonExportModal" tabindex="-1"> <div class="modal-dialog gt-modal-dialog-lg"> <div class="modal-content"> <div class="modal-header gt-with-clip"> <h3> Instrumentation JSON <span class="fa fa-clipboard gt-clip" style="font-size: 14px; position: inherit; margin-left: 5px"></span> </h3> </div> <div class="modal-body" style="padding-top: 20px"> <pre id="jsonExport" style="white-space: pre-wrap; word-wrap: break-word">{{jsonExport}}</pre> </div> </div> </div> </div> '),e.put("views/config/plugin-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Plugins</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-repeat="plugin in plugins" class="gt-second-line-indent" style="padding-bottom: 8px"> <a ng-href="config/plugin{{pluginQueryString(plugin)}}">{{plugin.name}}</a> </div> <div style="padding-top: 25px; font-style: italic; color: #666" ng-if="pluginsWithNoConfig"> Plugins with no configuration settings: {{pluginsWithNoConfig}} </div> </div> </div> </div> </div> '),e.put("views/config/plugin.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="config/plugin-list{{agentQueryString()}}"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Plugins <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{config.name}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input ng-show="loaded" class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div ng-repeat="property in config.properties"> <div ng-switch on="property.type"> <div ng-switch-when="string"> <div gt-form-group gt-label="{{property.label}}" gt-model="property.value" gt-disabled="!agentPermissions.config.edit.plugin" gt-width="25em" ng-class="{ \'gt-form-group-without-help-block\': property.description === null }" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> {{property.description}} </div> </div> </div> <div ng-switch-when="boolean"> <div gt-form-group gt-type="checkbox" gt-label="{{property.label}}" gt-checkbox-label="{{property.checkboxLabel}}" gt-model="property.value" gt-disabled="!agentPermissions.config.edit.plugin" ng-class="{ \'gt-form-group-without-help-block\': property.description === null }" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> {{property.description}} </div> </div> </div> <div ng-switch-when="double"> <div gt-form-group gt-label="{{property.label}}" gt-model="property.value" gt-disabled="!agentPermissions.config.edit.plugin" gt-number="true" gt-pattern="pattern.double" gt-width="7em" ng-class="{ \'gt-form-group-without-help-block\': property.description === null }" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> {{property.description}} </div> </div> </div> </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.plugin"> <div class="col-lg-offset-4 col-lg-8"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> '),e.put("views/config/synthetic-monitor-list.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Synthetic monitors</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-if="!configs.length" style="font-style: italic"> There are no configured synthetic monitors </div> <div ng-repeat="config in configs" class="gt-second-line-indent" style="padding-bottom: 8px"> <a ng-href="config/synthetic-monitor{{configQueryString(config)}}"> {{config.display}} </a> </div> <div ng-if="loaded && agentPermissions.config.edit.syntheticMonitor" style="margin-top: 30px"> <a class="btn btn-primary" href="config/synthetic-monitor{{newQueryString()}}"> Add new </a> </div> </div> </div> </div> </div> '),e.put("views/config/synthetic-monitor.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2> <a class="pull-right" style="font-size: 16px; padding-top: 14px" href="config/synthetic-monitor-list{{agentQueryString()}}"> Return to list </a> <span ng-class="{\'gt-lighten-font\': !loaded && !httpError}"> Synthetic monitors <span class="gt-inline-block gt-separator"> | </span> <span style="font-size: 24px">{{heading}}</span> </span> </h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div class="form-group gt-form-group-without-help-block"> <label class="col-lg-3 control-label"> Synthetic monitor type </label> <div class="col-lg-9"> <div class="radio"> <label> <input type="radio" ng-model="config.kind" ng-disabled="!agentPermissions.config.edit.syntheticMonitor" value="ping"> Ping </label> </div> <div class="radio"> <label> <input type="radio" ng-model="config.kind" ng-disabled="!agentPermissions.config.edit.syntheticMonitor" value="java"> Java </label> </div> </div> </div> <div gt-form-group gt-label="Display" gt-model="config.display" gt-disabled="!agentPermissions.config.edit.syntheticMonitor" gt-width="40em" gt-required="loaded"> <div class="help-block"> Display for this synthetic monitor. Must be unique across synthetic monitors for the same agent{{isAgentRollup() ? \' rollup\' : \'\'}}. </div> </div> <div ng-if="config.kind === \'ping\'"> <div gt-form-group gt-type="url" gt-label="Ping URL" gt-model="config.pingUrl" gt-pattern="/^https?:\\/\\//" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.syntheticMonitor" gt-rows="10" class="gt-alert-java-class"> <div class="help-block"> The HTTP or HTTPS URL to ping with a simple GET request. </div> </div> </div> <div ng-if="config.kind === \'java\'"> <div gt-form-group gt-type="codemirror" gt-label="Java source" gt-model="config.javaSource" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.syntheticMonitor" id="gtSyntheticJavaSource" class="gt-synthetic-java-source" ng-class="{\'has-error\': !config.javaSource}"> <div class="help-block"> A Java class that executes the synthetic monitor. </div> <div class="help-block"> The class can be named anything. The entry method must be named <em>test</em> and take a single parameter of type <em>org.openqa.selenium.WebDriver</em>. </div> <div class="help-block"> Any string constants that begins with the text "ENCRYPT:" will be encrypted (using two-way encryption so they can be decrypted when running the synthetic monitor). The encryption/decryption key is unique to your glowroot central instance and is stored in the file named <em>secret</em> inside the glowroot central directory. </div> <div ng-if="javaSourceCompilationErrors" class="gt-button-message-error" style="font-weight: bold"> <div ng-repeat="compilationError in javaSourceCompilationErrors"> {{compilationError}} </div> </div> </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.syntheticMonitor"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button-group> <div gt-button gt-label="{{config.version ? \'Save changes\' : \'Add\'}}" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> <div gt-button ng-show="config.version" gt-label="Delete" gt-click="delete(deferred)" gt-btn-class="btn-default" class="gt-inline-block"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/transaction.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Transactions</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Slow threshold" gt-model="config.slowThresholdMillis" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.transaction" gt-width="7em" gt-addon="milliseconds"> <div class="help-block"> Any transaction that exceeds this amount of time will be viewable immediately as an active trace and the trace will be stored to disk at its completion. </div> </div> <div gt-form-group gt-label="Profiling interval" gt-model="config.profilingIntervalMillis" gt-number="true" gt-pattern="pattern.integer" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.transaction" gt-width="7em" gt-addon="milliseconds"> <div class="help-block"> The interval at which the profiler samples stack traces. Each sampling time is randomized within its given interval in order to avoid periodicity bias. </div> </div> <div gt-form-group gt-type="checkbox" gt-label="Capture JVM thread stats" gt-checkbox-label="Capture JVM thread stats" gt-model="config.captureThreadStats" gt-disabled="!agentPermissions.config.edit.transaction"> <div class="help-block"> Capture CPU time, blocked time, waited time and allocated memory if available. <span ng-if="agentPermissions.jvm.capabilities">See <a href="jvm/capabilities">JVM Capabilities</a>.</span> Capturing this data has some overhead (around 5 microseconds per transaction). </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.transaction"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/ui.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>UI</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Default displayed transaction type" gt-model="config.defaultDisplayedTransactionType" gt-number="true" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.ui" gt-width="20em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> The default transaction type displayed on the transactions and errors page. </div> </div> <div gt-form-group gt-label="Default displayed percentiles" gt-model="page.defaultDisplayedPercentiles" gt-pattern="pattern.percentageList" gt-required="loaded" gt-disabled="!agentPermissions.config.edit.ui" gt-width="20em" gt-col-class1="col-lg-4" gt-col-class2="col-lg-8"> <div class="help-block"> The default percentiles displayed on the transaction percentiles tab. <a href="http://hdrhistogram.github.io/HdrHistogram/">HdrHistogram</a> is used to bucket and store the full range of values so that any percentile value can be reported with at most 1% error, e.g. if the 99.9<sup>th</sup> percentile is reported as 1400 milliseconds, then that would be at most 14 milliseconds from the true 99.9<sup>th</sup> percentile value. </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.ui"> <div class="col-lg-offset-4 col-lg-8"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/config/user-recording.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>User recording</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Users" gt-model="page.users" gt-disabled="!agentPermissions.config.edit.userRecording" gt-width="20em"> <div class="help-block"> Comma-separated list of users. All transactions for the given users will be profiled and trace will be stored. The username matching is case-insensitive. </div> </div> <div gt-form-group gt-label="Profile interval" gt-model="config.profilingIntervalMillis" gt-number="true" gt-pattern="pattern.integer" gt-disabled="!agentPermissions.config.edit.userRecording" gt-width="7em" gt-addon="milliseconds"> <div class="help-block"> The interval at which the profiler captures stack traces. </div> </div> <div class="form-group gt-form-buttons" ng-if="agentPermissions.config.edit.userRecording"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Save changes" gt-click="save(deferred)" gt-disabled="formCtrl.$invalid"> </div> </div> </div> </div> </div> </div> '),e.put("views/incidents.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> Incidents </div> </div> <div class="panel panel-default gt-incident-active"> <div class="panel-heading"> <h2>Active incidents</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-repeat="incident in incidents" class="gt-red" style="font-weight: bold; font-size: 16px"> <span ng-if="layout.central">{{layout.agentRollups[incident.agentRollupId].display}} - </span> {{incident.display}} </div> </div> </div> </div> '),e.put("views/jvm.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> <div ng-show="hideAgentRollupDropdown()"> JVM </div> <div style="margin-top: -16px" ng-hide="hideAgentRollupDropdown()"> <span class="gt-inline-block gt-header-menu"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle"> {{layout.agentRollups[agentRollupId].display || \'&lt;agent&gt;\'}} <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu" style="margin-bottom: 100px"> <li ng-repeat="agentRollup in layout.agentRollupValues"> <a role="menuitem" tabindex="-1" ng-href="{{agentRollupUrl(agentRollup)}}"> {{agentRollup.indentedDisplay}} </a> </li> </ul> </span> </span> <span class="gt-inline-block gt-separator"> | </span> <span class="gt-inline-block"> JVM </span> </div> </div> </div> <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <div gt-sidebar-item gt-display="Gauges" gt-url="jvm/gauges{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/gauges\'" ng-if="agentPermissions.jvm.gauges || (layout.central && !agentRollupId)"> </div> <div gt-sidebar-item gt-display="Thread dump" gt-url="jvm/thread-dump{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/thread-dump\' || currentUrl() === \'jvm/jstack\'" ng-if="agentPermissions.jvm.threadDump && !layout.offlineViewer"> </div> <div gt-sidebar-item gt-display="Heap dump" gt-url="jvm/heap-dump{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/heap-dump\'" ng-if="agentPermissions.jvm.heapDump && !layout.offlineViewer"> </div> <div gt-sidebar-item gt-display="Heap histogram" gt-url="jvm/heap-histogram{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/heap-histogram\'" ng-if="agentPermissions.jvm.heapHistogram && !layout.offlineViewer"> </div> <div gt-sidebar-item gt-display="MBean tree" gt-url="jvm/mbean-tree{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/mbean-tree\'" ng-if="agentPermissions.jvm.mbeanTree && !layout.offlineViewer"> </div> <div gt-sidebar-item gt-display="System properties" gt-url="jvm/system-properties{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/system-properties\'" ng-if="agentPermissions.jvm.systemProperties && !layout.offlineViewer"> </div> <div gt-sidebar-item gt-display="Environment" gt-url="jvm/environment{{agentQueryString()}}" gt-active="currentUrl() === \'jvm/environment\'" ng-if="agentPermissions.jvm.environment"> </div> </ul> </div> </div> <div class="panel panel-default gt-main-column"> <div class="panel-heading"> <h2>{{heading}}</h2> </div> <div class="panel-body"> <div ui-view autoscroll="false" ng-hide="hideMainContent()"> </div> </div> </div> '),e.put("views/jvm/capabilities.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-if="loaded && !agentNotConnected"> <div class="row gt-capability"> <div class="col-sm-4"> <label>Thread CPU time</label> </div> <div class="col-sm-8"> {{capabilities.threadCpuTime.available | gtOnOff}} <div class="gt-secondary-text" ng-show="!capabilities.threadCpuTime.available"> {{capabilities.threadCpuTime.reason}} </div> </div> </div> <div class="row gt-capability"> <div class="col-sm-4"> <label>Thread contention time</label> </div> <div class="col-sm-8"> {{capabilities.threadContentionTime.available | gtOnOff}} <div class="gt-secondary-text" ng-show="!capabilities.threadContentionTime.available"> {{capabilities.threadContentionTime.reason}} </div> </div> </div> <div class="row gt-capability"> <div class="col-sm-4"> <label>Thread allocated bytes</label> </div> <div class="col-sm-8"> {{capabilities.threadAllocatedBytes.available | gtOnOff}} <div class="gt-secondary-text" ng-show="!capabilities.threadAllocatedBytes.available"> {{capabilities.threadAllocatedBytes.reason}} </div> </div> </div> </div> '),e.put("views/jvm/environment.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="data.agentNotConnected" class="alert alert-danger"> The agent is not currently connected. The values below were reported at last JVM start. </div> <div ng-if="layout.offlineViewer" class="alert alert-warning"> The values below were reported at last JVM start. </div> <fieldset style="padding-bottom: 22px"> <legend style="margin-bottom: 10px">Host</legend> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Host name</label> </div> <div class="col-md-9"> {{data.host.hostName}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Available processors</label> </div> <div class="col-md-9"> {{data.host.availableProcessors}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Total physical memory</label> </div> <div class="col-md-9"> {{data.host.totalPhysicalMemoryBytes | gtBytes}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">OS name</label> </div> <div class="col-md-9"> {{data.host.osName}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">OS version</label> </div> <div class="col-md-9"> {{data.host.osVersion}} </div> </div> </fieldset> <fieldset style="padding-bottom: 22px"> <legend style="margin-bottom: 10px">Process</legend> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Process ID</label> </div> <div class="col-md-9"> {{data.process.processId === undefined ? \'N/A\' : data.process.processId}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Start time</label> </div> <div class="col-md-9"> {{data.process.startTime | date:\'medium\'}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Uptime</label> </div> <div class="col-md-9" ng-if="data.agentNotConnected || layout.offlineViewer"> - </div> <div class="col-md-9" ng-if="!data.agentNotConnected && !layout.offlineViewer"> {{uptime | gtDuration}} </div> </div> </fieldset> <fieldset style="padding-bottom: 17px"> <legend style="margin-bottom: 10px">Java</legend> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Version</label> </div> <div class="col-md-9"> {{data.java.version}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">VM</label> </div> <div class="col-md-9"> {{data.java.vm}} </div> </div> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Args</label> </div> <div class="col-md-9"> <div ng-repeat="arg in data.java.args track by $index"> <div class="gt-jvm-argument gt-break-word"> <span style="white-space: nowrap">{{argFirstPart(arg)}}</span>{{argSecondPart(arg)}} </div> </div> </div> </div> </fieldset> <fieldset style="padding-bottom: 22px"> <legend style="margin-bottom: 10px">Glowroot agent</legend> <div class="row gt-jvm-general-row"> <div> <label class="col-md-3" style="text-align: right">Version</label> </div> <div class="col-md-9"> {{data.java.glowrootAgentVersion}} </div> </div> </fieldset> '),e.put("views/jvm/gauge-values.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-show="loaded"> <div ng-hide="allGauges.length" style="font-size: 16px; margin-top: 20px"> No gauges configured. See <a href="config/gauge-list{{agentQueryString()}}">Gauge configuration</a>. </div> <div ng-show="allGauges.length"> <div style="margin: -13px 0 15px 30px"> <div ng-controller="ChartRangeCtrl" ng-include="\'template/gt-chart-range.html\'"></div> </div> <div class="clearfix" style="position: relative; z-index: 800"> <div class="pull-right gt-gauge-chart-tools" style="margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" class="gt-panel-overlay gt-chart-panel" id="chartSpinner"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div ng-if="gaugeNames.length" class="gt-chart-no-data">No data</div> <div ng-if="!gaugeNames.length" class="gt-chart-no-data">Select one or more gauges below</div> </div> </div> </div> <div class="gt-everything-below-gauge-chart"> <div class="legend" id="chartLegend" style="text-align: center; margin-top: 10px; width: 100%"> <div class="gt-inline-block"> <div class="gt-inline-block" ng-repeat="seriesLabel in seriesLabels" style="white-space: nowrap; margin: 0 6px"> <div class="legendColorBox gt-inline-block" style="border: 1px solid rgb(204, 204, 204); padding: 1px"> <div style="width: 4px; height: 0px; border: 5px solid rgb(237, 194, 64); overflow: hidden" ng-style="{\'border\': \'5px solid \' + seriesLabel.color}"> </div> </div> <div class="legendLabel gt-inline-block">{{seriesLabel.text}}</div> </div> </div> </div> <br> <table class="gt-gauge-table" style="margin-top: 10px"> <thead> <tr> <th style="padding-left: 20px; width: 70%"> Gauge </th> <th style="width: 100px"> Color </th> <th style="min-width: 120px"> Scale </th> </tr> </thead> <tbody ng-if="!smallScreen()"> <tr> <td style="padding: 8px 20px 5px 20px"> <input type="text" class="form-control gt-inline-block" ng-model="page.gaugeFilter" placeholder="filter the gauge list"> </td> <td></td> <td></td> </tr> <tr ng-repeat="gauge in allGauges | filter:{display: page.gaugeFilter}"> <td style="padding-left: 0"> <div class="checkbox gt-gauge-second-line-indent" style="margin-top: 0; margin-bottom: 0"> <label ng-style="gaugeNameStyle(gauge.name)"> <input type="checkbox" ng-checked="gaugeNames.indexOf(gauge.name) !== -1" ng-click="clickGaugeName(gauge.name)"> {{gauge.display}} </label> </div> </td> <td> <div ng-style="gaugeColorStyle(gauge.name)"></div> </td> <td> <div ng-show="hasGaugeScale(gauge.name)" ng-style="gaugeScaleStyle(gauge.name)"> {{getGaugeScale(gauge.name)}} </div> </td> </tr> </tbody> <tbody ng-if="smallScreen()"> <tr> <td style="padding: 8px 20px 5px 20px" colspan="3"> <input type="text" class="form-control gt-inline-block" ng-model="page.gaugeFilter" placeholder="filter the gauge list" style="max-width: 358px"> </td> </tr> <tr ng-repeat-start="gauge in allGauges | filter:{display: page.gaugeFilter}"> <td style="padding-left: 0" colspan="3"> <div class="checkbox gt-gauge-second-line-indent" style="margin-top: 0; margin-bottom: 0"> <label ng-style="gaugeNameStyle(gauge.name)"> <input type="checkbox" ng-checked="gaugeNames.indexOf(gauge.name) !== -1" ng-click="clickGaugeName(gauge.name)" id="{{gauge.name}}"> {{gauge.display}} </label> </div> </td> </tr> <tr ng-repeat-end ng-if="hasGaugeScale(gauge.name)"> <td></td> <td> <div ng-style="gaugeColorStyle(gauge.name)">{{gaugeColorText(gauge.name)}}</div> </td> <td> <div ng-show="hasGaugeScale(gauge.name)"> {{getGaugeScale(gauge.name)}} </div> </td> </tr> </tbody> </table> <div style="margin-top: 20px; padding-left: 20px"> <button class="btn btn-default" ng-click="selectAllGauges()"> select all {{!showingAllGauges() ? \'showing\' : \'\'}} </button> <button class="btn btn-default" ng-click="deselectAllGauges()" style="margin-left: 5px"> deselect all {{!showingAllGauges() ? \'showing\' : \'\'}} </button> </div> </div> </div> </div> '),e.put("views/jvm/gc.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-if="loaded && !agentNotConnected"> <div gt-button gt-label="GC" gt-click="gc(deferred)" style="padding: 28px 0 0 20px"> </div> </div> '),e.put("views/jvm/heap-dump.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" ng-if="loaded && !agentNotConnected" style="margin-top: 10px"> <div class="form-group"> <label class="control-label col-lg-2" for="directory"> Directory </label> <div class="col-lg-9"> <input type="text" class="form-control" ng-model="page.directory" id="directory" name="directory"> </div> </div> <div class="form-group" style="margin-bottom: 5px"> <div class="col-lg-offset-2 col-lg-9 help-block"> Use the jvm arg <code style="white-space: nowrap">-XX:HeapDumpPath=&lt;directory&gt;</code> to change the default heap dump location. </div> </div> <div class="form-group gt-form-buttons"> <div class="col-lg-offset-2 col-lg-10"> <div gt-button-group> <div gt-button gt-btn-class="btn-danger" gt-label="Heap dump" gt-click="heapDump(deferred)" gt-confirm-header="Perform heap dump?" gt-confirm-body="Note: This may hang the JVM for a bit while the heap dump is generated." class="gt-inline-block"> </div> <div gt-button gt-label="Check disk space" gt-click="checkDiskSpace(deferred)" gt-btn-class="btn-default" class="gt-inline-block"> </div> </div> </div> </div> <div class="form-group gt-form-buttons" ng-show="availableDiskSpaceBytes !== undefined"> <div class="col-lg-offset-2 col-lg-9"> <div class="well"> <table class="gt-heap-dump-response"> <tr> <td>Free disk space</td> <td><strong>{{availableDiskSpaceBytes | gtBytes}}</strong></td> </tr> </table> </div> </div> </div> <div class="form-group gt-form-buttons" ng-show="heapDumpResponse"> <div class="col-lg-offset-2 col-lg-9"> <div class="well"> <table class="gt-heap-dump-response"> <tr> <td class="gt-nowrap">Heap dump</td> <td><strong style="word-break: break-all">{{heapDumpResponse.filePath}}</strong></td> </tr> <tr> <td class="gt-nowrap">File size</td> <td><strong>{{heapDumpResponse.fileSizeBytes | gtBytes}}</strong></td> </tr> </table> </div> </div> </div> </div> <div class="modal" id="confirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3></h3> </div> <div class="modal-body"> <p></p> </div> <div class="modal-footer"> <button class="btn btn-default" id="confirmationModalButton">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/jvm/heap-histogram.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-if="agentUnsupportedOperation" class="alert alert-danger"> This feature is only supported by Glowroot agent 0.9.2 and later (currently reporting agent version is {{agentUnsupportedOperation}}) </div> <div ng-if="unavailableDueToRunningInJre" class="alert alert-danger"> This feature is only available when the agent is running in a JDK (currently running in a JRE). </div> <div ng-if="unavailableDueToRunningInIbmJvm" class="alert alert-danger"> This feature is not available when the agent is running in IBM J9 VM. </div> <div ng-if="loaded && !agentNotConnected && !agentUnsupportedOperation && !unavailableDueToRunningInJre && !unavailableDueToRunningInIbmJvm"> <div class="clearfix" style="float: right"> <button class="btn btn-default" ng-click="exportAsCsv()"> Export as text </button> </div> <div gt-button gt-label="Refresh" gt-click="refresh(deferred)" style="margin-bottom: 20px"> </div> <div ng-form class="form-horizontal well"> <div class="row"> <div class="col-md-9"> <div class="input-group" style="width: 100%"> <div gt-input-group-dropdown gt-model="page.filterComparator" gt-items="filterComparatorOptions"> </div> <input type="text" ng-model="page.filterValue" class="form-control" placeholder="Filter by class name"> </div> </div> <div class="col-md-3"> <select ng-model="page.filterLimit" class="heap-histogram-limit form-control inline-block" style="max-width: 8em"> <option value="" disabled="disabled">Display limit</option> <option value="" disabled="disabled">&mdash;&mdash;&mdash;&mdash;&mdash;</option> <option value="100">100</option> <option value="200">200</option> <option value="500">500</option> <option value="1000">1,000</option> <option value="2000">2,000</option> <option value="5000">5,000</option> </select> </div> </div> </div> <table class="table table-sortable" style="table-layout: fixed"> <thead> <tr> <th> <a ng-href="jvm/heap-histogram{{sortQueryString(\'class-name\')}}" class="gt-sortable-table-header"> <span ng-class="sortIconClass(\'class-name\')" ng-show="sortAttribute === \'class-name\'"> </span> Class name </a> </th> <th class="gt-heap-histogram-other-column"> <a ng-href="jvm/heap-histogram{{sortQueryString(\'bytes\')}}" class="gt-sortable-table-header"> <span ng-class="sortIconClass(\'bytes\')" ng-show="sortAttribute === \'bytes\'"> </span> Bytes </a> </th> <th class="gt-heap-histogram-other-column"> <a ng-href="jvm/heap-histogram{{sortQueryString(\'count\')}}" class="gt-sortable-table-header"> <span ng-class="sortIconClass(\'count\')" ng-show="sortAttribute === \'count\'"> </span> Count </a> </th> </tr> </thead> <tfoot> <tr> <td>Total</td> <td class="gt-heap-histogram-other-column">{{filteredTotalBytes}}</td> <td class="gt-heap-histogram-other-column">{{filteredTotalCount}}</td> </tr> </tfoot> <tbody ng-if="!smallScreen()"> <tr ng-repeat="item in displayedItems track by item.className"> <td ng-if="sortAttribute === \'bytes\' && !sortAsc" style="padding: 0"> <div style="position: relative"> <div style="position: absolute; height: 100%; background-color: #eee" ng-style="{width: classNameBarWidth(item.bytes)}"> </div> <div style="position: relative; padding: 8px; word-break: break-all"> {{item.className}} </div> </div> </td> <td ng-if="sortAttribute !== \'bytes\' || sortAsc">{{item.className}}</td> <td class="gt-heap-histogram-other-column">{{item.bytes}}</td> <td class="gt-heap-histogram-other-column">{{item.count}}</td> </tr> <tr ng-show="limitApplied"> <td>... <em>display limit applied</em></td> <td></td> <td></td> </tr> </tbody> <tbody ng-if="smallScreen()"> <tr ng-repeat-start="item in displayedItems track by item.className"> <td colspan="3" style="padding-bottom: 4px"> {{item.className}} </td> </tr> <tr ng-repeat-end> <td style="border-top: none; padding-top: 0"></td> <td class="gt-heap-histogram-other-column" style="border-top: none; padding-top: 0"> {{item.bytes}} </td> <td class="gt-heap-histogram-other-column" style="border-top: none; padding-top: 0"> {{item.count}} </td> </tr> <tr ng-show="limitApplied"> <td>... <em>display limit applied</em></td> <td></td> <td></td> </tr> </tbody> </table> </div> '),e.put("views/jvm/jstack.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-if="agentUnsupportedOperation" class="alert alert-danger"> This feature is only supported by Glowroot agent 0.9.2 and later (currently reporting agent version is {{agentUnsupportedOperation}}) </div> <div ng-if="unavailableDueToRunningInJre" class="alert alert-danger"> This feature is only available when the agent is running in a JDK (currently running in a JRE). </div> <div ng-if="unavailableDueToRunningInIbmJvm" class="alert alert-danger"> This feature is not available when the agent is running in IBM J9 VM. </div> <div ng-show="loaded && !agentNotConnected && !agentUnsupportedOperation && !unavailableDueToRunningInJre && !unavailableDueToRunningInIbmJvm"> <div class="clearfix" style="float: right"> <button class="btn btn-default" ng-click="exportAsText()"> Export as text </button> </div> <div gt-button gt-label="Refresh" gt-click="refresh(deferred)" style="margin-bottom: 20px"> </div> <div class="gt-thread-dump-flat-pre" id="jstack"> </div> </div> '),e.put("views/jvm/mbean-tree.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-show="loaded && !agentNotConnected"> <div gt-button gt-label="Refresh" gt-click="refresh(deferred)" style="margin-bottom: 20px"> </div> <div id="mbeanTree"></div> </div> '),e.put("views/jvm/system-properties.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-if="agentUnsupportedOperation" class="alert alert-danger"> This feature is only supported by Glowroot agent 0.9.2 and later (currently reporting agent version is {{agentUnsupportedOperation}}) </div> <div ng-if="loaded && !agentNotConnected && !agentUnsupportedOperation" style="margin-top: 10px"> <div ng-repeat="property in properties"> <div class="row gt-system-property"> <div class="col-lg-4 gt-break-word"> <label>{{property.name}}</label> </div> <div gt-display-whitespace gt-bind="property.value" ng-if="!isArray(property.value)" class="col-lg-8 gt-break-word"> </div> <div ng-if="isArray(property.value)" class="col-lg-8 gt-break-word" ng-style="{\'margin-bottom\': property.value.length > 1 ? \'5px\' : \'0\'}"> <div ng-repeat="val in property.value track by $index" style="margin-left: 40px; text-indent: -40px"> {{val}} </div> </div> </div> </div> </div> '),e.put("views/jvm/thread-dump.html",' <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-if="agentNotConnected" class="alert alert-danger"> This feature is only available when the agent is running and connected </div> <div ng-show="loaded && !agentNotConnected"> <div class="clearfix" style="float: right"> <button class="btn btn-default" ng-click="exportAsText()"> Export as text </button> </div> <div gt-button gt-label="Refresh" gt-click="refresh(deferred)" style="margin-bottom: 20px"> </div> <div class="gt-thread-dump-flat-pre" id="threadDump"> </div> </div> <div class="modal gt-full-screen-modal" id="traceModal" tabindex="-1"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <div class="modal-dialog"> <div class="modal-body"></div> </div> </div> '),e.put("views/login.html",' <div class="gt-header"> <div class="gt-header-page-name"> Login </div> </div> <div ng-form gt-form-with-primary-button gt-form-autofocus-on-first-input name="formCtrl"> <div class="form-group"> <input class="form-control gt-inline-block" ng-model="page.username" id="username" placeholder="Enter username" style="max-width: 20em"> <span class="gt-red" ng-show="message" style="padding-left: 15px"> {{message}} </span> </div> <div class="form-group"> <input type="password" class="form-control gt-inline-block" ng-model="page.password" id="password" placeholder="Enter password" style="max-width: 20em"> </div> <div class="form-group gt-form-buttons"> <div gt-button gt-label="Login" gt-click="login(deferred)" gt-disabled="!page.password"> </div> </div> </div> '),e.put("views/profile.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> <span class="gt-inline-block"> Profile </span> </div> </div> <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <div gt-sidebar-item gt-display="Change my password" gt-url="profile/change-password"> </div> </ul> </div> </div> <div ui-view class="gt-main-column"> </div> <div class="modal" id="confirmationModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div class="modal-header"> <h3></h3> </div> <div class="modal-body"> <p></p> </div> <div class="modal-footer"> <button class="btn btn-default" id="confirmationModalButton">Yes</button> <button class="btn btn-primary" data-dismiss="modal">Cancel</button> </div> </div> </div> </div> '),e.put("views/profile/change-password.html",' <div class="panel panel-default"> <div class="panel-heading"> <h2>Change {{layout.adminView ? \'my\' : \'\'}} password</h2> </div> <div class="panel-body"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-autofocus-on-first-input class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div gt-form-group gt-label="Current password" gt-type="password" gt-model="page.currentPassword" gt-width="20em"> </div> <div gt-form-group gt-label="New password" gt-type="password" gt-model="page.newPassword" gt-width="20em"> </div> <div gt-form-group gt-label="Verify new password" gt-type="password" gt-model="page.verifyNewPassword" gt-width="20em"> </div> <div class="form-group gt-form-buttons"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Change password" gt-click="changePassword(deferred)" gt-disabled="!page.currentPassword || !page.newPassword || !page.verifyNewPassword"> </div> </div> </div> </div> </div> </div> '),e.put("views/report.html",' <div class="gt-header" style="margin-bottom: 6px"> <div class="gt-header-page-name"> Reporting </div> </div> <div class="gt-report-sidebar"> <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <div gt-sidebar-item gt-display="Ad hoc report" gt-url="report/ad-hoc" gt-active="currentUrl() === \'report/ad-hoc\'"> </div> </ul> </div> </div> </div> <div class="panel panel-default gt-report-main-column"> <div class="panel-heading"> <h2>{{heading}}</h2> </div> <div class="panel-body"> <div ui-view autoscroll="false"> </div> </div> </div> '),e.put("views/report/adhoc.html",' <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="margin: 15px"> <div ng-hide="hasAgents()" style="font-style: italic"> There are no agents </div> <div ng-show="hasAgents()"> <div ng-form class="form-horizontal" name="formCtrl" style="padding-top: 15px"> <div class="form-group" ng-class="{\'has-error\': !report.agentRollupIds.length}" ng-if="layout.central"> <label class="col-lg-3 control-label" for="reportAgentRollupIds"> Agents </label> <div class="col-lg-9"> <ui-select multiple="multiple" ng-model="report.agentRollupIds" ng-required="true" theme="bootstrap" close-on-select="false" style="min-width: 200px; max-width: 650px" title="Choose agents" remove-selected="false"> <ui-select-match placeholder="Select agents...">{{$item.display}}</ui-select-match> <ui-select-choices repeat="agentRollup.id as agentRollup in agentRollups | filter: {display: $select.search}"> <div ng-bind-html="agentRollup.indentedDisplay | highlight: $select.search"></div> </ui-select-choices> </ui-select> </div> </div> <div class="form-group" ng-class="{\'has-error\': formCtrl.reportMetric.$invalid}"> <label class="col-lg-3 control-label" for="reportMetric"> Metric </label> <div class="col-lg-9"> <select ng-model="report.metric" ng-required="true" class="form-control" name="reportMetric" id="reportMetric" style="width: auto"> <option ng-repeat="metric in metrics track by metric.id" ng-value="metric.id" ng-disabled="metric.disabled" ng-style="{\'font-weight\': metric.heading ? \'bold\' : \'normal\'}"> {{metric.display}} </option> </select> </div> </div> <div class="form-group" ng-class="{\'has-error\': formCtrl.reportTransactionType.$invalid}" ng-if="showTransactionTypeAndName()"> <label class="col-lg-3 control-label" for="reportTransactionType"> Transaction type </label> <div class="col-lg-9"> <select ng-model="report.transactionType" ng-required="true" class="form-control" name="reportTransactionType" id="reportTransactionType" style="width: 100%; max-width: 25em"> <option value="__________" disabled="disabled" ng-if="!report.agentRollupIds.length"> (select one or more agents to see available transaction types) </option> <option ng-repeat="transactionType in allTransactionTypes" ng-value="transactionType"> {{transactionType}} </option> </select> </div> </div> <div gt-form-group gt-label="Transaction name" gt-model="report.transactionName" gt-width="20em" ng-if="showTransactionTypeAndName()"> </div> <div gt-form-group gt-label="Percentile" gt-model="report.percentile" gt-number="true" gt-pattern="pattern.percentage" gt-width="7em" gt-addon="percentile" gt-required="report.metric === \'transaction:x-percentile\'" ng-if="report.metric === \'transaction:x-percentile\'"> </div> <div class="form-group"> <label class="col-lg-3 control-label" for="reportFromDate"> From </label> <div class="col-lg-9"> <div gt-date-picker gt-model="report.fromDate" gt-id="reportFromDate"></div> </div> </div> <div class="form-group"> <label class="col-lg-3 control-label" for="reportToDate"> To </label> <div class="col-lg-9"> <div gt-date-picker gt-model="report.toDate" gt-id="reportToDate"></div> </div> </div> <div class="form-group"> <label class="col-lg-3 control-label" for="reportRollup"> Rollup </label> <div class="col-lg-9"> <select ng-model="report.rollup" ng-options="rollup.toLowerCase() as rollup for rollup in rollups" class="form-control" id="reportRollup" style="width: 100%; max-width: 10em"> </select> </div> </div> <div class="form-group"> <label class="col-lg-3 control-label" for="reportTimeZone"> Time zone </label> <div class="col-lg-9"> <select ng-model="report.timeZoneId" ng-options="timeZoneId for timeZoneId in layout.timeZoneIds" class="form-control" id="reportTimeZone" style="width: 100%; width: auto"> </select> </div> </div> <div class="form-group gt-form-buttons"> <div class="col-lg-offset-3 col-lg-9"> <div gt-button gt-label="Run report" gt-click="runReport(deferred)" gt-disabled="formCtrl.$invalid" class="gt-inline-block"> </div> </div> </div> </div> <div ng-show="showChart" style="position: relative"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; pointer-events: none"> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> </div> <div class="legend" id="chartLegend" ng-hide="chartNoData || !layout.central" style="text-align: center; margin-top: 10px; width: 100%"> <div class="gt-inline-block" style="max-width: 600px"> <div class="gt-inline-block" ng-repeat="seriesLabel in seriesLabels" style="margin: 0 6px"> <div class="legendColorBox gt-inline-block" style="border: 1px solid rgb(204, 204, 204); padding: 1px"> <div style="width: 4px; height: 0px; border: 5px solid rgb(237, 194, 64); overflow: hidden" ng-style="{\'border\': \'5px solid \' + seriesLabel.color}"> </div> </div> <div class="legendLabel gt-inline-block">{{seriesLabel.text}}</div> </div> </div> </div> <table class="table" style="margin-top: 50px" ng-if="seriesLabels && !chartNoData"> <thead> <tr> <th ng-if="layout.central"></th> <th ng-repeat="xval in allXvals" style="text-align: right"> <a ng-click="sort(xval)" class="gt-sortable-table-header" style="cursor: pointer"> <span ng-class="sortIconClass(xval)"> </span> {{columnHeader(xval)}} </a> </th> <th style="text-align: right"> <a ng-click="sort(\'overall\')" class="gt-sortable-table-header" style="cursor: pointer; white-space: nowrap"> <span ng-class="sortIconClass(\'overall\')"> </span> Overall </a> </th> </tr> </thead> <tbody> <tr ng-repeat="tableRow in tableRows | orderBy:[sortAttr,\'-overall\']:sortAsc"> <td ng-if="layout.central">{{tableRow.label}}</td> <td ng-repeat="xval in allXvals" style="text-align: right"> <a ng-href="{{drillDownLink(tableRow.agentRollupId, xval)}}" ng-if="tableRow[xval] !== NEGATIVE_INFINITY"> {{formatValue(tableRow[xval])}} </a> <span ng-if="tableRow[xval] === NEGATIVE_INFINITY"> - </span> </td> <td style="text-align: right"> <a ng-href="{{drillDownLinkOverall(tableRow.agentRollupId)}}" ng-if="tableRow.overall !== NEGATIVE_INFINITY"> {{formatValue(tableRow.overall)}} </a> <span ng-if="tableRow.overall === NEGATIVE_INFINITY"> - </span> </td> </tr> </tbody> </table> </div> </div> </div> '),e.put("views/synthetic-monitors.html",' <div class="gt-header clearfix" style="padding-bottom: 46px"> <div class="gt-header-page-name pull-left"> <div style="margin-top: -16px"> <span class="gt-inline-block gt-header-menu"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle"> {{layout.agentRollups[agentRollupId].display || \'&lt;agent&gt;\'}} <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu" style="margin-bottom: 100px"> <li ng-repeat="agentRollup in layout.agentRollupValues" ng-hide="!agentRollup.permissions.config.view"> <a role="menuitem" tabindex="-1" ng-href="{{agentRollupUrl(agentRollup)}}"> {{agentRollup.indentedDisplay}} </a> </li> </ul> </span> </span> <span class="gt-inline-block gt-separator"> | </span> <span class="gt-inline-block"> Synthetic monitors </span> </div> </div> <div class="pull-right"> <div ng-controller="ChartRangeCtrl" ng-include="\'template/gt-chart-range.html\'"></div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <h2>Synthetic monitors</h2> </div> <div class="panel-body"> <div ng-hide="hideMainContent()"> <div ng-include src="\'template/gt-loading-overlay.html\'"></div> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-show="loaded"> <div ng-hide="allSyntheticMonitors.length" style="font-size: 16px; margin-top: 20px"> No synthetic monitors configured. See <a href="config/synthetic-list{{agentQueryString()}}">Synthetic monitor configuration</a>. </div> <div ng-show="allSyntheticMonitors.length"> <div class="clearfix" style="position: relative; z-index: 800; margin-top: 25px"> <div class="pull-right" style="margin-top: -20px; margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" class="gt-panel-overlay gt-chart-panel" id="chartSpinner"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div ng-if="syntheticMonitorIds.length" class="gt-chart-no-data">No data</div> <div ng-if="!syntheticMonitorIds.length" class="gt-chart-no-data"> Select one or more synthetic monitors below </div> </div> </div> </div> <div class="gt-everything-below-gauge-chart"> <div class="legend" id="chartLegend" style="text-align: center; margin-top: 10px; width: 100%"> <div class="gt-inline-block"> <div class="gt-inline-block" ng-repeat="seriesLabel in seriesLabels" style="white-space: nowrap; margin: 0 6px"> <div class="legendColorBox gt-inline-block" style="border: 1px solid rgb(204, 204, 204); padding: 1px"> <div style="width: 4px; height: 0px; border: 5px solid rgb(237, 194, 64); overflow: hidden" ng-style="{\'border\': \'5px solid \' + seriesLabel.color}"> </div> </div> <div class="legendLabel gt-inline-block">{{seriesLabel.text}}</div> </div> </div> </div> <br> <div ng-repeat="syntheticMonitor in allSyntheticMonitors" class="checkbox gt-gauge-second-line-indent" style="padding-left: 62px"> <label ng-class="{\'gt-bold\': syntheticMonitorIds.indexOf(syntheticMonitor.id) !== -1}" style="cursor: pointer"> <input type="checkbox" ng-checked="syntheticMonitorIds.indexOf(syntheticMonitor.id) !== -1" ng-click="clickSyntheticMonitor(syntheticMonitor.id)"> {{syntheticMonitor.display}} </label> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/transaction.html",' <div class="gt-header clearfix" style="padding-bottom: 46px"> <div class="gt-header-page-name pull-left"> <div style="margin-top: -16px"> <span class="gt-inline-block" ng-show="hideAgentRollupDropdown()"> {{headerDisplay}} </span> <span class="gt-inline-block gt-header-menu" ng-hide="hideAgentRollupDropdown()"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle"> {{layout.agentRollups[agentRollupId].display || \'&lt;agent&gt;\'}} <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu" style="margin-bottom: 100px"> <li ng-repeat="agentRollup in layout.agentRollupValues"> <a role="menuitem" tabindex="-1" ng-href="{{currentTabUrl()}}{{headerQueryString(agentRollup, transactionType)}}"> {{agentRollup.indentedDisplay}} </a> </li> </ul> </span> </span> <span class="gt-inline-block gt-separator"> | </span> <span class="gt-inline-block" ng-show="hideTransactionTypeDropdown()"> {{transactionType}} </span> <span class="gt-inline-block gt-header-menu" ng-hide="hideTransactionTypeDropdown()" style="margin-bottom: 6px"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle"> {{transactionType || \'&lt;transaction type&gt;\'}} <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu"> <li ng-repeat="tt in layout.agentRollups[agentRollupId].transactionTypes" ng-hide="tt === transactionType"> <a role="menuitem" tabindex="-1" ng-href="{{currentTabUrl()}}{{headerQueryString(layout.agentRollups[agentRollupId], tt)}}"> {{tt}} </a> </li> </ul> </span> </span> </div> </div> <div class="pull-right"> <div ng-controller="ChartRangeCtrl" ng-include="\'template/gt-chart-range.html\'"></div> </div> </div> <div class="gt-transaction-sidebar"> <div ui-view="sidebar"></div> </div> <div class="gt-transaction-main-column" ng-style="{\'min-height\': (windowHeight - 160) + \'px\'}"> <div class="panel panel-default"> <div class="panel-heading" style="word-break: break-all"> <h2>{{transactionName ? transactionName : \'All \' + transactionType + \' Transactions\'}}</h2> </div> <div class="panel-body"> <div ui-view="tabs"></div> <div ui-view="main" ng-hide="hideMainContent()"></div> </div> </div> </div> '),e.put("views/transaction/average.html",' <div style="position: relative"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="text-align: center; margin-top: -2px; margin-bottom: 6px; color: #555"> <label class="radio-inline"> <input type="radio" name="view" value="average" ng-click="clickTopRadioButton(\'average\')" checked="checked"> <a class="gt-radio-link" href="transaction/average{{tabQueryString()}}" ng-click="clickActiveTopLink($event)"> average </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="percentiles" ng-click="clickTopRadioButton(\'percentiles\')"> <a class="gt-radio-link" href="transaction/percentiles{{tabQueryString()}}"> percentiles </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="throughput" ng-click="clickTopRadioButton(\'throughput\')"> <a class="gt-radio-link" href="transaction/throughput{{tabQueryString()}}"> throughput </a> </label> </div> <div class="clearfix" style="position: relative; z-index: 800"> <div class="pull-right gt-response-time-chart-tools" style="margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div style="position: relative"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; pointer-events: none"> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> </div> <div class="legend" id="chartLegend" ng-hide="chartNoData" style="text-align: center; margin-top: 10px; width: 100%"> <div class="gt-inline-block" style="max-width: 600px"> <div class="gt-inline-block" ng-repeat="seriesLabel in seriesLabels" style="margin: 0 6px"> <div class="legendColorBox gt-inline-block" style="border: 1px solid rgb(204, 204, 204); padding: 1px"> <div style="width: 4px; height: 0px; border: 5px solid rgb(237, 194, 64); overflow: hidden" ng-style="{\'border\': \'5px solid \' + seriesLabel.color}"> </div> </div> <div class="legendLabel gt-inline-block">{{seriesLabel.text}}</div> </div> </div> </div> <div ng-if="mergedAggregate.transactionCount" class="gt-everything-below-average-chart" style="position: relative; padding-top: 30px"> <div ng-if="mainThreadFlattenedTimers.length"> <div gt-timer-display heading="Breakdown{{auxThreadFlattenedTimers.length ? \' (Main Thread)\' : \'\'}}:" flattened-timers="mainThreadFlattenedTimers" tree-timers="mainThreadTreeTimers" transaction-count="mergedAggregate.transactionCount"> </div> </div> <div ng-if="auxThreadFlattenedTimers.length" style="margin-top: 10px"> <div gt-timer-display heading="Breakdown{{mainThreadFlattenedTimers.length ? \' (Auxiliary Thread)\' : \'\'}}:" flattened-timers="auxThreadFlattenedTimers" tree-timers="auxThreadTreeTimers" transaction-count="mergedAggregate.transactionCount"> </div> </div> <div ng-if="mergedAggregate.asyncTimers.length" style="margin-top: 10px"> <table class="gt-timers-table gt-inline-block" style="border-spacing: 0"> <thead> <tr> <td class="gt-breakdown-header gt-bold" style="text-align: left">Breakdown (Async Timers):</td> <td class="gt-breakdown-header" style="font-weight: 600">total&nbsp;(ms)</td> <td class="gt-breakdown-header" style="font-weight: 600">count</td> </tr> </thead> <tbody> <tr class="align-top" ng-repeat="asyncTimer in mergedAggregate.asyncTimers"> <td style="text-align: left"> <div class="gt-indent2"> <div class="gt-break-word gt-second-line-indent">{{asyncTimer.name}}</div> </div> </td> <td>{{asyncTimer.totalNanos / (1000000 * mergedAggregate.transactionCount) | gtMillis}}</td> <td>{{asyncTimer.count / mergedAggregate.transactionCount | gtCount}}</td> </tr> </tbody> </table> </div> <div ng-if="mergedAggregate.mainThreadStats" style="margin-top: 15px"> <label> JVM Thread Stats<span ng-if="mergedAggregate.auxThreadStats"> (Main Thread)</span>: </label> <div gt-thread-stats thread-stats="mergedAggregate.mainThreadStats" transaction-count="mergedAggregate.transactionCount"> </div> </div> <div ng-if="mergedAggregate.auxThreadStats" style="margin-top: 15px"> <label> JVM Thread Stats<span ng-if="mergedAggregate.mainThreadStats"> (Auxiliary Threads)</span>: </label> <div gt-thread-stats thread-stats="mergedAggregate.auxThreadStats" transaction-count="mergedAggregate.transactionCount"> </div> </div> </div> </div> </div> '),e.put("views/transaction/error-messages.html",' <div style="position: relative"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div ng-form gt-form-with-primary-button style="margin-left: 42px; margin-bottom: 5px"> <input type="text" ng-model="filter" class="form-control" placeholder="filter the error messages" id="filter" style="display: inline-block; max-width: 25em; vertical-align: middle; margin-right: 3px; margin-bottom: 8px"> <button class="btn btn-primary" ng-click="refresh()" style="vertical-align: middle; margin-bottom: 8px"> Refresh </button> <a role="button" class="gt-chart-button gt-inline-block" href="#" uib-popover-template="\'template/help/error-message-filter.html\'" popover-placement="top" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle" style="font-size: 28px; vertical-align: middle; margin-left: 3px; margin-bottom: 8px"></span></a> <div ng-if="parsingError" class="gt-red" style="margin-top: 10px; margin-bottom: -5px"> {{parsingError}} </div> </div> <div class="clearfix" style="position: relative; z-index: 800"> <div class="pull-right gt-error-messages-chart-tools" style="margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div style="position: relative"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; pointer-events: none"> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> </div> <div ng-hide="chartNoData" style="position: relative; padding-top: 40px; margin-left: 32px"> <table class="table"> <thead> <tr> <th width="98%"> Error </th> <th width="1%"> Count </th> <th width="1%"> Traces </th> </tr> </thead> <tbody> <tr ng-repeat="errorMessage in errorMessages"> <td class="gt-monospace" style="word-break: break-all; white-space: pre-line">{{errorMessage.message}}</td> <td style="text-align: right"> {{errorMessage.count}} </td> <td style="white-space: nowrap"> <a ng-href="error/traces{{tracesQueryString(errorMessage)}}"> see traces </a> </td> </tr> </tbody> </table> <div ng-show="moreErrorMessagesAvailable" style="vertical-align: middle; padding: 20px 0 0 30px"> <div gt-button gt-btn-class="btn-default" gt-label="Show more" gt-click="showMoreErrorMessages(deferred)"> </div> </div> </div> </div> </div> '),e.put("views/transaction/error-tabs.html",' <ul class="nav nav-tabs gt-transaction-tabs"> <li ng-class="{active: activeTabItem === \'messages\'}"> <a ng-href="error/messages{{tabQueryString()}}" ng-click="clickTab(\'messages\', $event)" ng-keydown="keydownTab(null, \'tab_traces\', $event)" id="tab_messages"> Error messages </a> </li> <li ng-class="{active: activeTabItem === \'traces\'}"> <a ng-href="error/traces{{tabQueryString()}}" ng-click="clickTab(\'traces\', $event)" ng-keydown="keydownTab(\'tab_messages\', null, $event)" ng-if="agentPermissions.error.traces" id="tab_traces"> Error traces ({{traceCountDisplay()}}) </a> </li> </ul> '),e.put("views/transaction/flame-graph.html",' <div class="gt-panel-overlay" ng-show="httpError"> <div ng-include src="\'template/gt-http-error.html\'" style="padding-top: 50px"></div> </div> <div class="gt-header"> <div class="gt-header-page-name"> Flame graph (experimental) </div> </div> <div ng-if="filter" style="margin-bottom: 20px"> <div style="font-size: 20px; font-weight: bold"> Profile tree filter: {{filter}} </div> <div ng-if="parsingError" class="gt-red" style="margin-top: 10px; margin-bottom: -5px"> {{parsingError}} </div> </div> <div id="info" ng-if="!parsingError"> Hover over a block for summary information. Click a block for details. <div class="svTooltip" id="svTooltip"></div> </div> <div gt-spinner gt-show="!loaded && !httpError" class="gt-left-aligned-spinner" style="margin-left: -22px"> </div> <div ng-show="chartNoData" style="display: table; width: 100%; height: 100%; margin-top: 50px"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> <div id="chart" style="padding-top: 50px"> </div> '),e.put("views/transaction/percentiles.html",' <div style="position: relative"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="text-align: center; margin-top: -2px; margin-bottom: 6px; color: #555"> <label class="radio-inline"> <input type="radio" name="view" value="average" ng-click="clickTopRadioButton(\'average\')"> <a class="gt-radio-link" href="transaction/average{{tabQueryString()}}"> average </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="percentiles" ng-click="clickTopRadioButton(\'percentiles\')" checked="checked"> <a class="gt-radio-link" href="transaction/percentiles{{tabQueryString()}}" ng-click="clickActiveTopLink($event)"> percentiles </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="throughput" ng-click="clickTopRadioButton(\'throughput\')"> <a class="gt-radio-link" href="transaction/throughput{{tabQueryString()}}"> throughput </a> </label> </div> <div class="clearfix" style="position: relative; z-index: 800"> <div class="pull-right gt-response-time-chart-tools" style="margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div style="position: relative"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; pointer-events: none"> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> </div> <div class="legend" id="chartLegend" ng-hide="chartNoData" style="position: relative; text-align: center; margin-top: 10px; width: 100%"> <div class="gt-inline-block" style="max-width: 600px"> <div class="gt-inline-block" ng-repeat="seriesLabel in seriesLabels" style="margin: 0 6px"> <div class="legendColorBox gt-inline-block" style="border: 1px solid rgb(204, 204, 204); padding: 1px"> <div style="width: 4px; height: 0px; border: 5px solid rgb(237, 194, 64); overflow: hidden" ng-style="{\'border\': \'5px solid \' + seriesLabel.color}"> </div> </div> <div class="legendLabel gt-inline-block">{{seriesLabel.text}}</div> </div> <a role="button" class="gt-chart-button" href="#" ng-click="openCustomPercentilesModal()" style="padding-left: 3px; vertical-align: -6px; font-size: 20px"> <span title="Change currently displayed percentiles" class="fa fa-ellipsis-h"></span>&nbsp;</a> </div> </div> <div ng-show="mergedAggregate.transactionCount" style="position: relative; padding-top: 30px; margin-left: 40px"> <div ng-repeat="percentileValue in mergedAggregate.percentileValues"> <label>{{percentileValue.dataSeriesName}}:</label> {{percentileValue.value / 1000000 | gtMillis}} ms </div> </div> </div> <div class="modal" id="customPercentilesModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px"> <div class="modal-content"> <div ng-form gt-form-with-primary-button name="formCtrl"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <h4 class="modal-title">Currently displayed percentiles</h4> </div> <div class="modal-body"> <div ng-form="customPercentilesForm" class="form-group" ng-class="{\'has-error\': customPercentilesForm.customPercentiles.$invalid}"> <label class="control-label" for="customPercentiles"> Comma-separated percentiles </label> <input class="form-control" ng-model="customPercentiles" ng-pattern="pattern.percentageList" name="customPercentiles" id="customPercentiles" style="width: 20em"> <div class="help-block"> Custom list of percentiles to display. <a href="http://hdrhistogram.github.io/HdrHistogram/">HdrHistogram</a> is used to bucket and store the full range of values so that any percentile value can be reported with at most 1% error, e.g. if the 99.9<sup>th</sup> percentile is reported as 1400 milliseconds, then that would be at most 14 milliseconds from the true 99.9<sup>th</sup> percentile value. </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> <button type="button" class="btn btn-primary" ng-disabled="formCtrl.$invalid" ng-click="applyCustomPercentiles()"> Apply </button> </div> </div> </div> </div> </div> </div> '),e.put("views/transaction/profile.html",' <div style="position: relative" ng-style="{\'min-height\': async || hasUnfilteredAuxThreadProfile ? \'106px\' : \'100px\'}"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="text-align: center; margin-top: -2px; margin-bottom: 6px; color: #555" ng-if="auxiliary || hasUnfilteredAuxThreadProfile"> <label class="radio-inline" ng-class="{\'disabled\': !hasUnfilteredMainThreadProfile}"> <input type="radio" name="view" value="main" ng-click="clickTopRadioButton(false)" ng-checked="!auxiliary && !onlyExistsAuxThreadProfile" ng-disabled="!hasUnfilteredMainThreadProfile"> <a class="gt-radio-link" href="transaction/thread-profile{{tabQueryString(false)}}" ng-click="clickActiveTopLink($event, false)" ng-if="hasUnfilteredMainThreadProfile"> Main thread profile </a> <span ng-if="!hasUnfilteredMainThreadProfile" class="gt-radio-disabled">Main thread profile</span> </label> <label class="radio-inline"> <input type="radio" name="view" value="aux" ng-click="clickTopRadioButton(true)" ng-checked="auxiliary || (!hasUnfilteredMainThreadProfile && hasUnfilteredAuxThreadProfile)"> <a class="gt-radio-link" href="transaction/thread-profile{{tabQueryString(true)}}" ng-click="clickActiveTopLink($event, true)"> Auxiliary thread profile </a> </label> </div> <div gt-spinner gt-show="showSpinner && !showProfile" class="gt-left-aligned-spinner"> </div> <div style="position: absolute; width: 100%; margin-top: 50px"> <div gt-spinner gt-show="showSpinner && showProfile"> </div> </div> <div class="gt-panel-overlay" ng-show="showSpinner" style="right: -20px"> </div> <div ng-show="!showSpinner && !showProfile && !httpError" style="display: table; width: 100%; height: 100%" ng-style="{\'padding-top\': auxiliary || hasUnfilteredAuxThreadProfile ? \'25px\' : \'30px\'}"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data" ng-hide="showOverwrittenMessage"> No data for this time period </div> <div class="gt-chart-no-data" ng-show="showOverwrittenMessage"> There was profile data but it has expired, see <a href="admin/storage#rollup-capped-database-size"> Configuration &gt; Storage &gt; Queries, service calls and continuous profiling tab data </a> </div> </div> </div> <div ng-show="showProfile"> <div class="gt-nowrap hide" id="profileOuter"> <div class="clearfix" style="padding: 10px 0"> <a class="pull-right gt-flame-graph-link" ng-href="{{flameGraphHref()}}"> <em>View flame graph (experimental)</em> </a> <div class="pull-left" style="font-weight: 700"> Total of {{sampleCount | number}} sampled stack traces in selected time period </div> </div> <div ng-form gt-form-with-primary-button style="margin-bottom: 10px"> <input class="form-control gt-profile-text-filter" ng-model="filter" style="display: inline-block; vertical-align: middle; width: 25em" placeholder="filter the profile tree"> <button class="btn btn-primary gt-profile-text-filter-refresh" ng-click="refresh()" style="vertical-align: middle; margin-left: 5px"> Refresh </button> <a role="button" class="gt-chart-button gt-inline-block gt-profile-text-filter-help" href="#" uib-popover-template="\'template/help/profile-filter.html\'" popover-placement="top" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle" style="font-size: 28px; vertical-align: middle; margin-left: 3px"></span></a> <div ng-if="parsingError" class="gt-red" style="margin-top: 10px; margin-bottom: -5px"> {{parsingError}} </div> </div> <span class="gt-profile" style="background-color: white"></span> </div> </div> </div> '),e.put("views/transaction/queries.html",' <div style="position: relative; min-height: 100px"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div gt-spinner gt-show="showSpinner && !showQueries" class="gt-left-aligned-spinner"> </div> <div style="position: absolute; width: 100%; margin-top: 50px"> <div gt-spinner gt-show="showSpinner && showQueries"> </div> </div> <div class="gt-panel-overlay" ng-show="showSpinner" style="right: -20px"> </div> <div ng-show="!showSpinner && !showQueries && !httpError" style="display: table; width: 100%; height: 100%; margin-top: 50px"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data" ng-hide="showOverwrittenMessage"> No data for this time period </div> <div class="gt-chart-no-data" ng-show="showOverwrittenMessage"> There was query data but it has expired, see <a href="admin/storage#rollup-capped-database-size"> Configuration &gt; Storage &gt; Queries, service calls and continuous profiling tab data </a> </div> </div> </div> <div ng-show="showQueries"> <table class="table query-table" style="table-layout: fixed"> <thead> <tr> <th style="vertical-align: middle"> <select class="form-control" ng-model="queryType" style="width: inherit" ng-show="queryTypes.length > 1"> <option selected="selected" value="">(All)</option> <option ng-repeat="queryType in queryTypes" ng-value="queryType">{{queryType}}</option> </select> </th> <th class="gt-query-total-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'total-time\')}}" class="gt-sortable-table-header"> Total<br> time<br> <span ng-class="sortIconClass(\'total-time\')" ng-show="sortAttribute === \'total-time\'"> </span> (ms) </a> </th> <th class="gt-query-other-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'execution-count\')}}" class="gt-sortable-table-header"> Execution<br> <span ng-class="sortIconClass(\'execution-count\')" ng-show="sortAttribute === \'execution-count\'"> </span> count </a> </th> <th class="gt-query-other-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'time-per-execution\')}}" class="gt-sortable-table-header"> Time per<br> execution<br> <span ng-class="sortIconClass(\'time-per-execution\')" ng-show="sortAttribute === \'time-per-execution\'"> </span> (ms) </a> </th> <th class="gt-query-rows-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'rows-per-execution\')}}" class="gt-sortable-table-header"> Rows per<br> <span ng-class="sortIconClass(\'rows-per-execution\')" ng-show="sortAttribute === \'rows-per-execution\'"> </span> execution </a> </th> </tr> </thead> <tbody ng-if="!smallScreen()"> <tr ng-repeat="query in queries | filter:{queryType: queryType} | orderBy:sortAttr:sortAsc"> <td class="gt-query-text-column" ng-click="showQueryModal(query)"> {{query.truncatedQueryText}} </td> <td class="gt-query-total-column"> {{query.totalDurationNanos / 1000000 | gtMillis}} </td> <td class="gt-query-other-column"> {{query.executionCount | number}} </td> <td class="gt-query-other-column"> {{query.timePerExecution | gtMillis}} </td> <td class="gt-query-rows-column"> {{query.rowsPerExecution | gtCount}} </td> </tr> </tbody> <tbody ng-if="smallScreen()"> <tr ng-repeat-start="query in queries | filter:{queryType: queryType} | orderBy:sortAttr:sortAsc"> <td class="gt-query-text-column" ng-click="showQueryModal(query)" colspan="5" style="padding-bottom: 4px"> {{query.truncatedQueryText}} </td> </tr> <tr ng-repeat-end> <td style="border-top: none; padding-top: 0"></td> <td class="gt-query-total-column" style="border-top: none; padding-top: 0"> {{query.totalDurationNanos / 1000000 | gtMillis}} </td> <td class="gt-query-other-column" style="border-top: none; padding-top: 0"> {{query.executionCount}} </td> <td class="gt-query-other-column" style="border-top: none; padding-top: 0"> {{query.timePerExecution | gtMillis}} </td> <td class="gt-query-rows-column" style="border-top: none; padding-top: 0"> {{query.rowsPerExecution | gtCount}} </td> </tr> </tbody> </table> </div> </div> <div class="modal gt-full-screen-modal" id="queryModal" tabindex="-1"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <span class="fa fa-clipboard gt-clip"></span> <div class="modal-dialog"> <div class="modal-body"> <div gt-spinner gt-show="showModalSpinner" style="position: relative; display: inline-block; padding-left: 40px; padding-top: 60px"> </div> <div ng-if="queryExpired"> <strong> The full text for this query has expired </strong> </div> <div ng-if="queryError" class="gt-red"> An error occurred retrieving the query </div> <pre class="gt-monospace" id="formattedQuery" style="white-space: pre-wrap; display: inline-block; margin: 0">\n      </pre> <div class="gt-monospace" id="unformattedQuery" style="padding-bottom: 5px"> </div> <div> <a href="#" id="formattingToggle" ng-show="formattedQuery" ng-click="toggleFormatted()" style="margin: 15px 0 0 20px"> {{ showFormatted ? \'(show unformatted)\' : \'(show formatted)\' }} </a> </div> </div> </div> </div> '),e.put("views/transaction/services.html",' <div style="position: relative; min-height: 100px"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div gt-spinner gt-show="showSpinner && !showServiceCalls" class="gt-left-aligned-spinner"> </div> <div style="position: absolute; width: 100%; margin-top: 50px"> <div gt-spinner gt-show="showSpinner && showServiceCalls"> </div> </div> <div class="gt-panel-overlay" ng-show="showSpinner" style="right: -20px"> </div> <div ng-show="!showSpinner && !showServiceCalls && !httpError" style="display: table; width: 100%; height: 100%; margin-top: 50px"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data" ng-hide="showOverwrittenMessage"> No data for this time period </div> <div class="gt-chart-no-data" ng-show="showOverwrittenMessage"> There was service data but it has expired, see <a href="admin/storage#rollup-capped-database-size"> Configuration &gt; Storage &gt; Queries, service calls and continuous profiling tab data </a> </div> </div> </div> <div ng-show="showServiceCalls"> <table class="table query-table" style="table-layout: fixed"> <thead> <tr> <th style="vertical-align: middle"> <select class="form-control" ng-model="type" style="width: inherit" ng-show="types.length > 1"> <option selected="selected" value="">(All)</option> <option ng-repeat="type in types" ng-value="type">{{type}}</option> </select> </th> <th class="gt-query-total-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'total-time\')}}" class="gt-sortable-table-header"> Total<br> time<br> <span ng-class="sortIconClass(\'total-time\')" ng-show="sortAttribute === \'total-time\'"> </span> (ms) </a> </th> <th class="gt-query-other-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'execution-count\')}}" class="gt-sortable-table-header"> Execution<br> <span ng-class="sortIconClass(\'execution-count\')" ng-show="sortAttribute === \'execution-count\'"> </span> count </a> </th> <th class="gt-query-other-column"> <a ng-href="{{currentTabUrl()}}{{sortQueryString(\'time-per-execution\')}}" class="gt-sortable-table-header"> Time per<br> execution<br> <span ng-class="sortIconClass(\'time-per-execution\')" ng-show="sortAttribute === \'time-per-execution\'"> </span> (ms) </a> </th> </tr> </thead> <tbody> <tr ng-repeat="serviceCall in serviceCalls | filter:{type: type} | orderBy:sortAttr:sortAsc"> <td class="gt-monospace gt-break-word"> {{serviceCall.text}} </td> <td class="gt-query-total-column"> {{serviceCall.totalDurationNanos / 1000000 | gtMillis}} </td> <td class="gt-query-other-column"> {{serviceCall.executionCount | number}} </td> <td class="gt-query-other-column"> {{serviceCall.timePerExecution | gtMillis}} </td> </tr> </tbody> </table> </div> </div> '),e.put("views/transaction/sidebar.html",' <div class="gt-sidebar hidden-print"> <div class="panel panel-default"> <ul class="list-group"> <select gt-selectpicker gt-selectpicker-options="{width: \'100%\', style: \'gt-transaction-sidebar-by\'}" ng-model="$parent.summarySortOrder" gt-title="summarySortOrders[summarySortOrder]"> <option ng-repeat="(value, display) in summarySortOrders" value="{{value}}"> {{display}} </option> </select> <div style="position: relative"> <div ng-show="summariesNoData || summariesNoSearch" class="gt-transaction-sidebar-no-data" style="display: table; width: 100%; height: 100px"> <div ng-show="summariesNoData" style="font-weight: 600; display: table-cell; text-align: center; vertical-align: middle"> No data for this time period </div> </div> <div gt-spinner gt-show="showSpinner" class="gt-transaction-sidebar-no-data" style="display: table; width: 100%; height: 100px"> </div> <div class="gt-panel-overlay" ng-show="summariesLoadingMore"> <div gt-spinner gt-show="summariesLoadingMore" gt-no-delay="true" style="position: absolute; width: 100%; bottom: 70px"> </div> </div> <div style="height: 2px; border-top: 1px solid #eee" ng-show="transactionSummaries.length"> </div> <div gt-sidebar-item ng-show="transactionSummaries.length" gt-display="{{\'All \' + transactionType + \' Transactions\'}}" gt-display-right="{{overallSummaryValue()}}" gt-url="{{currentTabUrl()}}{{sidebarQueryString(null)}}" gt-active="!transactionName"> </div> <div style="height: 3px" ng-show="transactionSummaries.length"> </div> <div gt-sidebar-item ng-repeat="transactionSummary in transactionSummaries" gt-display="{{transactionSummary.transactionName}}" gt-display-right="{{transactionSummaryValue(transactionSummary)}}" gt-url="{{currentTabUrl()}}{{sidebarQueryString(transactionSummary.transactionName)}}" gt-active="transactionName == transactionSummary.transactionName"> </div> <button class="list-group-item selectable-list-group-item" ng-if="moreSummariesAvailable" ng-click="showMoreSummaries()" style="font-style: italic; width: 100%; text-align: left"> Show more </button> </div> </ul> </div> </div> '),e.put("views/transaction/tabs.html",' <ul class="nav nav-tabs gt-transaction-tabs"> <li ng-class="{active: activeTabItem === \'time\'}"> <a ng-href="transaction/average{{tabQueryString()}}" ng-click="clickTab(\'time\', $event)" ng-keydown="keydownTab(null, \'tab_traces\', $event)" id="tab_time"> Response time </a> </li> <li ng-class="{active: activeTabItem === \'traces\'}"> <a ng-href="transaction/traces{{tabQueryString()}}" ng-click="clickTab(\'traces\', $event)" ng-keydown="keydownTab(\'tab_time\', \'tab_queries\', $event)" ng-if="agentPermissions.transaction.traces" id="tab_traces"> {{transactionType === \'Startup\' ? \'Traces\' : \'Slow traces\'}} ({{traceCountDisplay()}}) </a> </li> <li ng-class="{active: activeTabItem === \'queries\'}"> <a ng-href="transaction/queries{{tabQueryString()}}" ng-click="clickTab(\'queries\', $event)" ng-keydown="keydownTab(\'tab_traces\', \'tab_services\', $event)" ng-if="agentPermissions.transaction.queries" id="tab_queries"> Queries </a> </li> <li ng-class="{active: activeTabItem === \'services\'}"> <a ng-href="transaction/services{{tabQueryString()}}" ng-click="clickTab(\'services\', $event)" ng-keydown="keydownTab(\'tab_queries\', \'tab_profile\', $event)" ng-if="agentPermissions.transaction.serviceCalls" id="tab_services"> Service calls </a> </li> <li ng-class="{active: activeTabItem === \'profile\'}"> <a ng-href="transaction/thread-profile{{tabQueryString()}}" ng-click="clickTab(\'profile\', $event)" ng-keydown="keydownTab(\'tab_services\', null, $event)" ng-if="agentPermissions.transaction.profile" id="tab_profile"> Continuous profiling </a> </li> </ul> '),e.put("views/transaction/throughput.html",' <div style="position: relative"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div style="text-align: center; margin-top: -2px; margin-bottom: 6px; color: #555"> <label class="radio-inline"> <input type="radio" name="view" value="average" ng-click="clickTopRadioButton(\'average\')"> <a class="gt-radio-link" href="transaction/average{{tabQueryString()}}"> average </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="percentiles" ng-click="clickTopRadioButton(\'percentiles\')"> <a class="gt-radio-link" href="transaction/percentiles{{tabQueryString()}}"> percentiles </a> </label> <label class="radio-inline"> <input type="radio" name="view" value="throughput" ng-click="clickTopRadioButton(\'throughput\')" checked="checked"> <a class="gt-radio-link" href="transaction/throughput{{tabQueryString()}}" ng-click="clickActiveTopLink($event)"> throughput </a> </label> </div> <div class="clearfix" style="position: relative; z-index: 800"> <div class="pull-right gt-response-time-chart-tools" style="margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div style="position: relative"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; pointer-events: none"> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data">No data for this time period</div> </div> </div> </div> <div ng-show="transactionCount" class="gt-everything-below-throughput-chart" style="position: relative; padding-top: 30px"> <div style="margin-top: 20px"> <label>Throughput:</label> <div class="gt-inline-block" style="vertical-align: top"> {{transactionsPerMin | gtCount}} transactions per minute<br> ({{transactionCount | number}} <span ng-pluralize count="transactionCount" when="{\'1\':\'transaction\',\'other\':\'transactions\'}"> </span> in this period) </div> </div> </div> </div> </div> '),e.put("views/transaction/traces.html",' <div class="clearfix" style="position: relative"> <div ng-include src="\'template/gt-http-error-overlay.html\'"></div> <div class="clearfix" style="position: relative; z-index: 800; margin-top: 25px"> <div class="pull-right" style="margin-top: -20px; margin-bottom: -8px; font-size: 22px"> <a role="button" class="gt-chart-button" href="#" ng-click="zoomOut()"> <span title="Zoom out" class="fa fa-search-minus"></span></a> <a role="button" class="gt-chart-button" href="#" ng-click="refresh()"> <span title="Refresh" class="fa fa-refresh"></span></a> <a role="button" class="gt-chart-button" href="#" uib-popover-template="\'template/help/traces-chart.html\'" popover-placement="left" popover-trigger="\'outsideClick\'"> <span title="Help" class="fa fa-question-circle"></span></a> </div> </div> <div class="gt-chart-container"> <div gt-spinner gt-show="showChartSpinner" gt-no-delay="true" id="chartSpinner" class="gt-chart-panel"> </div> <div class="gt-chart-panel"> <div class="gt-panel-overlay" ng-show="showChartSpinner" style="right: -20px; bottom: -20px"> </div> </div> <div class="gt-chart-dimensions" id="chart"></div> <div ng-show="chartNoData && !showChartSpinner" class="gt-chart-panel" style="display: table"> <div style="display: table-cell; text-align: center; vertical-align: middle"> <div class="gt-chart-no-data" ng-hide="showExpiredMessage"> No data </div> <div class="gt-chart-no-data" ng-show="showExpiredMessage"> *There were traces but they have expired, see <a href="admin/storage#rollup-capped-database-size" style="pointer-events: auto"> Configuration &gt; Storage &gt; Trace detail data </a> </div> </div> </div> </div> <br> <div class="col-lg-3 col-lg-push-9" style="margin: 10px auto 0; padding-right: 0"> <div ng-show="chartLimitExceeded"> <div class="gt-chart-warning"> <strong> Specified limit exceeded, only displaying slowest {{chartLimit}} matching traces </strong> </div> </div> </div> <div ng-form="formCtrl" gt-form-with-primary-button class="col-lg-9 col-lg-pull-3 form-horizontal trace-filters" style="margin: 20px auto 0 auto"> <div class="form-group"> <label class="col-lg-4 control-label" for="searchHeadline"> Headline/URL </label> <div class="col-lg-8"> <div class="input-group" style="width: 100%; max-width: 25em"> <div gt-input-group-dropdown gt-model="filter.headlineComparator" gt-items="filterTextComparatorOptions" class="input-group-left"> </div> <input type="text" ng-model="filter.headline" class="form-control" id="searchHeadline"> </div> </div> </div> <div class="form-group" ng-show="showErrorMessageFilter"> <label class="col-lg-4 control-label" for="searchErrorMessage"> Error </label> <div class="col-lg-8"> <div class="input-group" style="width: 100%; max-width: 25em"> <div gt-input-group-dropdown gt-model="filter.errorMessageComparator" gt-items="filterTextComparatorOptions" class="input-group-left"> </div> <input type="text" ng-model="filter.errorMessage" class="form-control" id="searchErrorMessage"> </div> </div> </div> <div class="form-group"> <label class="col-lg-4 control-label" for="searchUser"> User </label> <div class="col-lg-8"> <div class="input-group" style="width: 100%; max-width: 25em"> <div gt-input-group-dropdown gt-model="filter.userComparator" gt-items="filterTextComparatorOptions" class="input-group-left"> </div> <input type="text" ng-model="filter.user" class="form-control" id="searchUser"> </div> </div> </div> <div class="form-group" ng-if="traceAttributeNames.length"> <label class="col-lg-4 control-label" for="searchAttributeName"> Attribute name </label> <div class="col-lg-8"> <select ng-model="filter.attributeName" class="form-control" id="searchAttributeName" style="width: 100%; max-width: 25em"> <option value=""></option> <option ng-repeat="attributeName in traceAttributeNames" ng-value="attributeName"> {{attributeName}} </option> </select> </div> </div> <div class="form-group" ng-if="traceAttributeNames.length"> <label class="col-lg-4 control-label" for="searchAttributeValue"> Attribute value </label> <div class="col-lg-8"> <div class="input-group" style="width: 100%; max-width: 25em"> <div gt-input-group-dropdown gt-model="filter.attributeValueComparator" gt-items="filterTextComparatorOptions" class="input-group-left"> </div> <input type="text" ng-model="filter.attributeValue" class="form-control" id="searchAttributeValue"> </div> </div> </div> <div class="form-group"> <label class="col-lg-4 control-label" for="searchLimit"> Result limit </label> <div class="col-lg-8"> <select ng-model="filter.limit" ng-options="option.value as option.text for option in filterLimitOptions" class="form-control" id="searchLimit" style="width: 100%; max-width: 8em"> </select> </div> </div> <div class="form-group"> <div class="col-lg-offset-4 col-lg-8"> <button class="btn btn-primary pull-left" ng-click="refresh()" ng-disabled="formCtrl.$invalid"> Refresh </button> <button class="btn btn-default pull-left" ng-click="clearCriteria()" style="margin-left: 8px"> Clear criteria </button> </div> </div> </div> <div class="modal gt-full-screen-modal" id="traceModal" tabindex="-1"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <div class="modal-dialog"> <div class="modal-body"></div> </div> </div> </div> <div class="gt-trace-point-normal gt-offscreen" id="offscreenNormalColor"></div> <div class="gt-trace-point-error gt-offscreen" id="offscreenErrorColor"></div> <div class="gt-trace-point-active gt-offscreen" id="offscreenActiveColor"></div> '),e.put("template/gt-button.html",' <div ng-if="noGroup" class="clearfix"> <button class="btn gt-button-spacing" ng-class="gtBtnClass || \'btn-primary\'" ng-click="onClick()" ng-disabled="gtDisabled()" style="margin-right: 15px"> {{gtLabel}} </button> <div class="gt-button-spinner hide"></div> <div class="gt-button-message hide" style="padding-top: 5px; white-space: pre-wrap"> </div> </div> <span ng-if="!noGroup" class="gt-inline-block"> <button class="btn gt-button-spacing" ng-class="gtBtnClass || \'btn-primary\'" ng-click="onClick()" ng-disabled="gtDisabled()" style="margin-right: 5px"> {{gtLabel}} </button> </span> '),e.put("template/gt-chart-range.html",' <div class="gt-header-page-name" ng-form gt-form-with-primary-button> <span class="gt-inline-block gt-header-menu"> <span class="dropdown"> <a href="#" role="button" data-toggle="dropdown" class="dropdown-toggle" style="font-size: 24px"> <span style="padding-right: 15px; vertical-align: middle; color: #555"> {{timeDisplay()}} </span> <span class="gt-large-caret"></span> </a> <ul class="dropdown-menu" role="menu"> <li ng-repeat="last in rangeSelections"> <a role="menuitem" tabindex="-1" ng-href="{{currentTabUrl()}}{{headerRangeQueryString(last)}}" ng-click="updateLast(last, $event)"> {{lastDisplay(last)}} </a> </li> <li> <a ng-click="openCustomRange()">Custom range...</a> </li> </ul> </span> </span> </div> <div class="modal" id="customDateRangeModal" tabindex="-1"> <div class="modal-dialog" style="max-width: 500px; font-size: 14px"> <div class="modal-content"> <div ng-form gt-form-with-primary-button> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <h4 class="modal-title">Custom date range</h4> </div> <div class="modal-body"> <div class="container"> <div class="form-group"> <label class="control-label"> From </label> <div class="clearfix"> <div style="width: 12em; float: left; margin-right: 10px; margin-bottom: 10px"> <div class="input-group date" id="customDateRangeFromDate"> <input type="text" class="form-control"> <span class="input-group-addon"><span class="fa fa-calendar"></span></span> </div> </div> <div style="width: 10em; float: left"> <div class="input-group date" id="customDateRangeFromTime"> <input type="text" class="form-control"> <span class="input-group-addon"><span class="fa fa-clock-o"></span></span> </div> </div> </div> </div> <div class="form-group"> <label class="control-label"> To </label> <div class="clearfix"> <div style="width: 12em; float: left; margin-right: 10px; margin-bottom: 10px"> <div class="input-group date" id="customDateRangeToDate"> <input type="text" class="form-control"> <span class="input-group-addon"><span class="fa fa-calendar"></span></span> </div> </div> <div style="width: 10em; float: left"> <div class="input-group date" id="customDateRangeToTime"> <input type="text" class="form-control"> <span class="input-group-addon"><span class="fa fa-clock-o"></span></span> </div> </div> </div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> <button type="button" class="btn btn-primary" ng-click="applyCustomDateRange()">Apply</button> </div> </div> </div> </div> </div> '),e.put("template/gt-date-picker.html",'<div class="input-group date"> <input type="text" class="form-control" id="{{gtId}}" style="width: 10em"> <span class="input-group-addon"><span class="fa fa-calendar"></span></span> </div> '),e.put("template/gt-form-group.html",' <div ng-form="formGroupCtrl" class="form-group" ng-class="{\'has-error\': formGroupCtrl.property.$invalid}"> <div ng-switch="gtType"> <div ng-switch-when="checkbox"> <label class="control-label {{gtColClass1 || \'col-lg-3\'}}" for="{{gtId}}" style="margin-top: -7px"> {{gtLabel}} </label> </div> <div ng-switch-default> <label class="control-label {{gtColClass1 || \'col-lg-3\'}}" for="{{gtId}}"> {{gtLabel}} </label> </div> </div> <div class="{{gtColClass2 || \'col-lg-9\'}}"> <div ng-switch="gtType"> <div ng-switch-when="checkbox"> <div class="checkbox" style="margin-top: -7px"> <label> <input type="checkbox" ng-model="$parent.ngModel" ng-disabled="gtDisabled()" name="property" id="{{gtId}}"> {{gtCheckboxLabel}} </label> </div> </div> <div ng-switch-when="textarea"> <textarea class="form-control" ng-model="$parent.ngModel" name="property" id="{{gtId}}" ng-required="gtRequired()" ng-disabled="gtDisabled()" ng-style="{\'max-width\': gtWidth ? gtWidth : \'none\'}" rows="{{gtRows ? gtRows : \'\'}}">\n        </textarea> </div> <div ng-switch-when="codemirror"> <div ui-codemirror ui-codemirror-opts="codeMirrorOpts" ng-model="$parent.ngModel" ng-class="{\'codemirror-disabled\': gtDisabled()}"> </div> </div> <div ng-switch-default> <div ng-style="{display : gtWidth ? \'inline\' : \'block\'}"> <div ng-class="{\'input-group\' : gtAddon}"> <input type="{{gtType}}" class="form-control" ng-model="$parent.ngModel" name="property" id="{{gtId}}" ng-pattern="ngPattern" ng-required="gtRequired()" ng-disabled="gtDisabled()" placeholder="{{gtPlaceholder}}" ng-style="{\'max-width\': gtWidth ? gtWidth : \'none\'}"> <span ng-if="gtAddon" class="input-group-addon">{{gtAddon}}</span> </div> </div> </div> </div> <div ng-transclude></div> </div> </div> '),e.put("template/gt-http-error-overlay.html",' <div class="gt-panel-overlay" ng-show="httpError" style="z-index: 900"> <div ng-include src="\'template/gt-http-error.html\'"></div> </div> '),e.put("template/gt-http-error.html",'<div class="gt-http-error" ng-show="httpError"> {{httpError.headline}}<br> <div class="gt-http-error-message" ng-show="httpError.message">{{httpError.message}}</div> <a ng-click="showHttpErrorStackTrace = !showHttpErrorStackTrace" ng-show="httpError.stackTrace" class="gt-http-error-message" href=""> {{showHttpErrorStackTrace ? \'hide stack trace\' : \'show stack trace\'}} </a> <div ng-show="showHttpErrorStackTrace"> <div class="gt-http-error-stack-trace" ng-show="httpError.stackTrace">{{httpError.stackTrace}}</div> </div> </div> '),e.put("template/gt-input-group-dropdown.html",'<div uib-dropdown class="input-group-btn" ng-class="gtClass"> <button uib-dropdown-toggle type="button" class="btn btn-default"> {{gtDisplay}} <span class="caret"></span> </button> <ul class="dropdown-menu" style="min-width: 0"> <li ng-repeat="item in gtItems()"> <a ng-click="$parent.gtModel = item.value" href="">{{item.display}}</a> </li> </ul> </div> '),e.put("template/gt-loading-overlay.html",'<div class="gt-panel-overlay" ng-show="!loaded && !httpError"> <div style="position: absolute; width: 100%; margin-top: 50px"> <div gt-spinner gt-show="!loaded && !httpError"> </div> </div> </div> '),e.put("template/gt-navbar-item.html",'<li ng-class="{active: isActive()}"> <a ng-href="{{gtUrl}}"> {{gtDisplay}} <div ng-transclude></div> </a> </li> '),e.put("template/gt-sidebar-item.html",'<a class="list-group-item selectable-list-group-item" ng-class="{active: isActive() || isSubActive()}" ng-href="{{gtUrl}}" style="cursor: pointer"> <div ng-if="!gtDisplayRight"> {{gtDisplay}} </div> <table ng-if="gtDisplayRight" style="width: 100%"> <tr> <td style="word-break: break-all; padding-right: 15px">{{gtDisplay}}</td> <td style="text-align: right; vertical-align: top; white-space: nowrap">{{gtDisplayRight}}</td> </tr> </table> </a> '),e.put("template/gt-thread-stats.html",'<div class="gt-indent2"> <div ng-show="threadStats.totalCpuNanos != -1"> CPU time: {{threadStats.totalCpuNanos / (1000000 * transactionCount) | gtMillis}} ms </div> <div ng-show="threadStats.totalBlockedNanos != -1"> Blocked time: {{threadStats.totalBlockedNanos / (1000000 * transactionCount) | gtMillis}} ms </div> <div ng-show="threadStats.totalWaitedNanos != -1"> Waited time: {{threadStats.totalWaitedNanos / (1000000 * transactionCount) | gtMillis}} ms </div> <div ng-show="threadStats.totalAllocatedBytes != -1"> Allocated memory: {{threadStats.totalAllocatedBytes / transactionCount | gtBytes}} </div> </div> '),e.put("template/gt-timer-display.html",'<div> <table class="gt-timers-table gt-inline-block" ng-hide="showTreeView" style="border-spacing: 0"> <thead> <tr> <td class="gt-breakdown-header gt-bold" style="text-align: left">{{heading}}</td> <td class="gt-breakdown-header" style="font-weight: 600">total&nbsp;(ms)</td> <td class="gt-breakdown-header" style="font-weight: 600">count</td> </tr> </thead> <tbody> <tr class="align-top" ng-repeat="flattenedTimer in flattenedTimers | filter:{show: true}"> <td style="text-align: left"> <div class="gt-indent2"> <div class="gt-break-word gt-second-line-indent">{{flattenedTimer.name}}</div> </div> </td> <td>{{flattenedTimer.totalNanos / (1000000 * transactionCount) | gtMillis}}</td> <td>{{flattenedTimer.count / transactionCount | gtCount}}</td> </tr> <tr class="align-top"> <td colspan="3" style="text-align: left"> <div class="gt-indent2"> <div style="margin-left: -6px"> <span tabindex="-1"></span> <button class="gt-flat-btn gt-link-color" ng-click="clickShowMore()" ng-if="ftShowMore"> show more </button> <span ng-if="ftShowMoreAndLess">/</span> <button class="gt-flat-btn gt-link-color" ng-click="clickShowLessFT()" ng-if="showLess"> show less </button> <span ng-if="ftShowMore"> / <button class="gt-flat-btn gt-link-color" ng-click="clickShowAll()" ng-if="ftShowMore"> show all </button> </span> </div> </div> </td> </tr> </tbody> </table> <button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color" ng-hide="showTreeView" ng-click="showTreeView = true" style="vertical-align: top; margin-top: -1px"> switch to tree view </button> <table class="gt-timers-table gt-inline-block" ng-show="showTreeView" style="border-spacing: 0"> <thead> <tr> <td class="gt-breakdown-header gt-bold" style="text-align: left">{{heading}}</td> <td class="gt-breakdown-header" style="font-weight: 600">total&nbsp;(ms)</td> <td class="gt-breakdown-header" style="font-weight: 600">count</td> </tr> </thead> <tbody> <tr class="align-top" ng-repeat="treeTimer in treeTimers | filter:{show: true}"> <td style="text-align: left"> <div class="gt-indent2"> <div class="gt-break-word gt-second-line-indent" ng-style="{\'margin-left\': treeTimer.nestingIndent + \'px\'}"> {{treeTimer.name}}{{treeTimer.extended ? \' (extended)\' : \'\'}} </div> </div> </td> <td>{{treeTimer.totalNanos / (1000000 * transactionCount) | gtMillis}}</td> <td>{{treeTimer.count / transactionCount | gtCount}}</td> </tr> <tr class="align-top"> <td colspan="3" style="text-align: left"> <div class="gt-indent2"> <div style="margin-left: -6px"> <span tabindex="-1"></span> <button class="gt-flat-btn gt-link-color" ng-click="clickShowMore()" ng-if="ttShowMore"> show more </button> <span ng-if="ttShowMoreAndLess">/</span> <button class="gt-flat-btn gt-link-color" ng-click="clickShowLessTT()" ng-if="showLess"> show less </button> <span ng-if="ttShowMore"> / <button class="gt-flat-btn gt-link-color" ng-click="clickShowAll()" ng-if="ttShowMore"> show all </button> </span> </div> </div> </td> </tr> </tbody> </table> <button class="gt-indent1 gt-flat-btn gt-flat-btn-big gt-link-color" ng-show="showTreeView" ng-click="showTreeView = false" style="vertical-align: top; margin-top: -1px"> switch to flattened view </button> </div> '),e.put("template/gt-typeahead-class-match.html",'<a tabindex="-1" ng-bind-html="match.label | gtTypeaheadClassHighlight:query"></a> '),e.put("template/help/chart.html",'<div style="margin: 10px"> <div><strong>Chart navigation tips</strong></div> <ul style="margin-left: -13px"> <li>drag or double click to zoom in</li> <li>use ctrl + scroll wheel to zoom in and out</li> </ul> </div> '),e.put("template/help/error-message-filter.html",'<div style="margin: 10px"> <div><strong>Error message filter</strong></div> Use spaces to separate multiple terms. Use quotes for text that has spaces. Add a minus in front of a term to exclude errors containing that text. <span style="white-space: nowrap">E.g. <em>one "two with a space" -three</em></span> </div> '),e.put("template/help/profile-filter.html",'<div style="margin: 10px"> <div><strong>Profile tree filter</strong></div> Use spaces to separate multiple terms. Add a minus in front of a term to exclude stack traces containing that text. <span style="white-space: nowrap">E.g. <em>one two -three</em></span> </div> '),e.put("template/help/traces-chart.html",'<div style="margin: 10px"> <div><strong>Chart navigation tips</strong></div> <ul style="margin-left: -13px"> <li>click a data point to view the trace</li> <li>drag or double click to zoom in</li> <li>use ctrl + scroll wheel to zoom in and out</li> </ul> </div> ')}]);